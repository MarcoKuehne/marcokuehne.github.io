<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 First Difference | Make A Long Character Readable in R</title>
  <meta name="description" content="A guide to become fluent in data." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 First Difference | Make A Long Character Readable in R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/icons8-trading-64.png" />
  <meta property="og:description" content="A guide to become fluent in data." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 First Difference | Make A Long Character Readable in R" />
  
  <meta name="twitter:description" content="A guide to become fluent in data." />
  <meta name="twitter:image" content="/images/icons8-trading-64.png" />

<meta name="author" content="Marco Kühne" />


<meta name="date" content="2022-10-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/icons8-trading-64.ico" type="image/x-icon" />
<link rel="prev" href="fixed-effects.html"/>
<link rel="next" href="wikipedia-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/tippyjs-3.2.0/themes/google.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/light-border.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/light.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/translucent.css" rel="stylesheet" />
<script src="libs/tippyjs-3.2.0/tippy.all.min.js"></script>
<script src="libs/tippy-binding-0.1.0/tippy.js"></script>
<link href="libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<script async defer src="https://hypothes.is/embed.js"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P9BQG7T00K"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-P9BQG7T00K');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="www/webex.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/box_def.css" type="text/css" />
<link rel="stylesheet" href="css/box_amazing.css" type="text/css" />
<link rel="stylesheet" href="css/box_challenge.css" type="text/css" />
<link rel="stylesheet" href="css/box_dedicated.css" type="text/css" />
<link rel="stylesheet" href="css/box_reading.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://marcokuehne.github.io/">Becoming Fluent in Data</a></li> <li><p class="aligncenter"> <img src="images/icons8-trading-64.png"> </p></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Dust and Dark</a></li>
<li class="part"><span><b>I Preface</b></span></li>
<li class="chapter" data-level="" data-path="teach-learn-repeat.html"><a href="teach-learn-repeat.html"><i class="fa fa-check"></i>Teach – Learn – Repeat</a></li>
<li class="chapter" data-level="" data-path="aim-of-this-books.html"><a href="aim-of-this-books.html"><i class="fa fa-check"></i>Aim of this books</a></li>
<li class="chapter" data-level="" data-path="structure-of-this-books.html"><a href="structure-of-this-books.html"><i class="fa fa-check"></i>Structure of this books</a>
<ul>
<li class="chapter" data-level="" data-path="structure-of-this-books.html"><a href="structure-of-this-books.html#content"><i class="fa fa-check"></i>Content</a></li>
<li class="chapter" data-level="" data-path="structure-of-this-books.html"><a href="structure-of-this-books.html#color"><i class="fa fa-check"></i>Color</a></li>
<li class="chapter" data-level="" data-path="structure-of-this-books.html"><a href="structure-of-this-books.html#components"><i class="fa fa-check"></i>Components</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i>Intro to R</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#watching-paint-dry"><i class="fa fa-check"></i>Watching paint dry</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#when-paint-becomes-art"><i class="fa fa-check"></i>When paint becomes art</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#define-objects"><i class="fa fa-check"></i>Define objects</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#numeric-variables"><i class="fa fa-check"></i>Numeric Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#logical-variables"><i class="fa fa-check"></i>Logical Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#string-variables"><i class="fa fa-check"></i>String Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#factor-variables"><i class="fa fa-check"></i>Factor Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#combine-objects"><i class="fa fa-check"></i>Combine objects</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#data-frame"><i class="fa fa-check"></i>Data frame</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#plots"><i class="fa fa-check"></i>Plots</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html"><i class="fa fa-check"></i><b>1</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#why-we-measure"><i class="fa fa-check"></i><b>1.1</b> Why we measure</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#women-are-having-far-fewer-children."><i class="fa fa-check"></i><b>1.1.1</b> Women are having far fewer children.</a></li>
<li class="chapter" data-level="1.1.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#global-surface-temperature-is-rising."><i class="fa fa-check"></i><b>1.1.2</b> Global surface temperature is rising.</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#how-we-measure"><i class="fa fa-check"></i><b>1.2</b> How we measure</a></li>
<li class="chapter" data-level="1.3" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#types-of-data"><i class="fa fa-check"></i><b>1.3</b> Types of data</a></li>
<li class="chapter" data-level="1.4" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#the-reality-behind-the-data"><i class="fa fa-check"></i><b>1.4</b> The reality behind the data</a></li>
<li class="chapter" data-level="1.5" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#data-sets"><i class="fa fa-check"></i><b>1.5</b> Data sets</a></li>
<li class="chapter" data-level="1.6" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#dataset-collections"><i class="fa fa-check"></i><b>1.6</b> Dataset collections</a></li>
<li class="chapter" data-level="1.7" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#open-data"><i class="fa fa-check"></i><b>1.7</b> Open data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html"><i class="fa fa-check"></i><b>2</b> Software is everywhere</a>
<ul>
<li class="chapter" data-level="2.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#software"><i class="fa fa-check"></i><b>2.1</b> Software</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#command-line-interface-cli"><i class="fa fa-check"></i><b>2.1.1</b> Command line interface (CLI)</a></li>
<li class="chapter" data-level="2.1.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#graphical-user-interface-gui"><i class="fa fa-check"></i><b>2.1.2</b> Graphical user interface (GUI)</a></li>
<li class="chapter" data-level="2.1.3" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#integrated-development-environment-ide"><i class="fa fa-check"></i><b>2.1.3</b> Integrated development environment (IDE)</a></li>
<li class="chapter" data-level="2.1.4" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#software-in-your-browser"><i class="fa fa-check"></i><b>2.1.4</b> Software in your browser</a></li>
<li class="chapter" data-level="2.1.5" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#software-in-the-cloud"><i class="fa fa-check"></i><b>2.1.5</b> Software in the cloud</a></li>
<li class="chapter" data-level="2.1.6" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#dashboards"><i class="fa fa-check"></i><b>2.1.6</b> Dashboards</a></li>
<li class="chapter" data-level="2.1.7" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#shiny-apps"><i class="fa fa-check"></i><b>2.1.7</b> Shiny Apps</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#file-formats"><i class="fa fa-check"></i><b>2.2</b> File formats</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#text-files"><i class="fa fa-check"></i><b>2.2.1</b> Text files</a></li>
<li class="chapter" data-level="2.2.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#text-with-structure"><i class="fa fa-check"></i><b>2.2.2</b> Text with structure</a></li>
<li class="chapter" data-level="2.2.3" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#file-formats-1"><i class="fa fa-check"></i><b>2.2.3</b> File formats</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="group-comparison.html"><a href="group-comparison.html"><i class="fa fa-check"></i><b>3</b> Group Comparison</a>
<ul>
<li class="chapter" data-level="3.1" data-path="group-comparison.html"><a href="group-comparison.html#story-telling"><i class="fa fa-check"></i><b>3.1</b> Story Telling</a></li>
<li class="chapter" data-level="3.2" data-path="group-comparison.html"><a href="group-comparison.html#less-is-more"><i class="fa fa-check"></i><b>3.2</b> Less is more</a></li>
<li class="chapter" data-level="3.3" data-path="group-comparison.html"><a href="group-comparison.html#comparability"><i class="fa fa-check"></i><b>3.3</b> Comparability</a></li>
<li class="chapter" data-level="3.4" data-path="group-comparison.html"><a href="group-comparison.html#never-use-pie-charts"><i class="fa fa-check"></i><b>3.4</b> Never use pie charts</a></li>
<li class="chapter" data-level="3.5" data-path="group-comparison.html"><a href="group-comparison.html#application"><i class="fa fa-check"></i><b>3.5</b> Application</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="group-comparison.html"><a href="group-comparison.html#loading-the-data"><i class="fa fa-check"></i><b>3.5.1</b> Loading the data</a></li>
<li class="chapter" data-level="3.5.2" data-path="group-comparison.html"><a href="group-comparison.html#look-into-data"><i class="fa fa-check"></i><b>3.5.2</b> Look into data</a></li>
<li class="chapter" data-level="3.5.3" data-path="group-comparison.html"><a href="group-comparison.html#fly-over-data"><i class="fa fa-check"></i><b>3.5.3</b> Fly over data</a></li>
<li class="chapter" data-level="3.5.4" data-path="group-comparison.html"><a href="group-comparison.html#missing-data"><i class="fa fa-check"></i><b>3.5.4</b> Missing data</a></li>
<li class="chapter" data-level="3.5.5" data-path="group-comparison.html"><a href="group-comparison.html#explore-data"><i class="fa fa-check"></i><b>3.5.5</b> Explore data</a></li>
<li class="chapter" data-level="3.5.6" data-path="group-comparison.html"><a href="group-comparison.html#standardization"><i class="fa fa-check"></i><b>3.5.6</b> Standardization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mean-comparison.html"><a href="mean-comparison.html"><i class="fa fa-check"></i><b>4</b> Mean Comparison</a>
<ul>
<li class="chapter" data-level="4.1" data-path="mean-comparison.html"><a href="mean-comparison.html#application-1"><i class="fa fa-check"></i><b>4.1</b> Application</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="mean-comparison.html"><a href="mean-comparison.html#data-preparation"><i class="fa fa-check"></i><b>4.1.1</b> Data Preparation</a></li>
<li class="chapter" data-level="4.1.2" data-path="mean-comparison.html"><a href="mean-comparison.html#grouped-mean"><i class="fa fa-check"></i><b>4.1.2</b> Grouped Mean</a></li>
<li class="chapter" data-level="4.1.3" data-path="mean-comparison.html"><a href="mean-comparison.html#furious-with-factors"><i class="fa fa-check"></i><b>4.1.3</b> Furious with Factors</a></li>
<li class="chapter" data-level="4.1.4" data-path="mean-comparison.html"><a href="mean-comparison.html#plot-with-confidence"><i class="fa fa-check"></i><b>4.1.4</b> Plot with Confidence</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="mean-comparison.html"><a href="mean-comparison.html#students-t-test"><i class="fa fa-check"></i><b>4.2</b> Student's t-test</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="mean-comparison.html"><a href="mean-comparison.html#independent-t-test"><i class="fa fa-check"></i><b>4.2.1</b> Independent t-test</a></li>
<li class="chapter" data-level="4.2.2" data-path="mean-comparison.html"><a href="mean-comparison.html#dependent-t-test"><i class="fa fa-check"></i><b>4.2.2</b> Dependent t-test</a></li>
<li class="chapter" data-level="4.2.3" data-path="mean-comparison.html"><a href="mean-comparison.html#one-sample-t-test"><i class="fa fa-check"></i><b>4.2.3</b> One sample t-test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="panel-data.html"><a href="panel-data.html"><i class="fa fa-check"></i><b>5</b> Panel Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="panel-data.html"><a href="panel-data.html#unemployment"><i class="fa fa-check"></i><b>5.1</b> Unemployment</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="panel-data.html"><a href="panel-data.html#on-decline-in-germany"><i class="fa fa-check"></i><b>5.1.1</b> On decline in Germany</a></li>
<li class="chapter" data-level="5.1.2" data-path="panel-data.html"><a href="panel-data.html#measurement"><i class="fa fa-check"></i><b>5.1.2</b> Measurement</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="panel-data.html"><a href="panel-data.html#application-2"><i class="fa fa-check"></i><b>5.2</b> Application</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="panel-data.html"><a href="panel-data.html#data-inspection"><i class="fa fa-check"></i><b>5.2.1</b> Data Inspection</a></li>
<li class="chapter" data-level="5.2.2" data-path="panel-data.html"><a href="panel-data.html#data-preparation-1"><i class="fa fa-check"></i><b>5.2.2</b> Data Preparation</a></li>
<li class="chapter" data-level="5.2.3" data-path="panel-data.html"><a href="panel-data.html#data-visualization"><i class="fa fa-check"></i><b>5.2.3</b> Data Visualization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-scraping.html"><a href="data-scraping.html"><i class="fa fa-check"></i><b>6</b> Data Scraping</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-scraping.html"><a href="data-scraping.html#student-numbers-at-viadrina"><i class="fa fa-check"></i><b>6.1</b> Student numbers at Viadrina</a></li>
<li class="chapter" data-level="6.2" data-path="data-scraping.html"><a href="data-scraping.html#pdf-scraping"><i class="fa fa-check"></i><b>6.2</b> PDF scraping</a></li>
<li class="chapter" data-level="6.3" data-path="data-scraping.html"><a href="data-scraping.html#share-of-female-students"><i class="fa fa-check"></i><b>6.3</b> Share of female students</a></li>
<li class="chapter" data-level="6.4" data-path="data-scraping.html"><a href="data-scraping.html#share-of-foreign-students"><i class="fa fa-check"></i><b>6.4</b> Share of foreign students</a></li>
<li class="chapter" data-level="6.5" data-path="data-scraping.html"><a href="data-scraping.html#web-scraping"><i class="fa fa-check"></i><b>6.5</b> Web scraping</a></li>
<li class="chapter" data-level="6.6" data-path="data-scraping.html"><a href="data-scraping.html#most-recent-student-numbers"><i class="fa fa-check"></i><b>6.6</b> Most recent student numbers</a></li>
<li class="chapter" data-level="6.7" data-path="data-scraping.html"><a href="data-scraping.html#the-long-run-trend"><i class="fa fa-check"></i><b>6.7</b> The long run trend</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>7</b> Text Mining</a>
<ul>
<li class="chapter" data-level="7.1" data-path="text-mining.html"><a href="text-mining.html#wikipedia"><i class="fa fa-check"></i><b>7.1</b> Wikipedia</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="text-mining.html"><a href="text-mining.html#little-bit-of-scraping"><i class="fa fa-check"></i><b>7.1.1</b> Little bit of Scraping</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="text-mining.html"><a href="text-mining.html#field-trip-to-berlin"><i class="fa fa-check"></i><b>7.2</b> Field Trip to Berlin</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="text-mining.html"><a href="text-mining.html#text-preparation"><i class="fa fa-check"></i><b>7.2.1</b> Text Preparation</a></li>
<li class="chapter" data-level="7.2.2" data-path="text-mining.html"><a href="text-mining.html#sentiment-analysis"><i class="fa fa-check"></i><b>7.2.2</b> Sentiment Analysis</a></li>
<li class="chapter" data-level="7.2.3" data-path="text-mining.html"><a href="text-mining.html#aggregate-level-1-pt"><i class="fa fa-check"></i><b>7.2.3</b> Aggregate Level (1 pt)</a></li>
<li class="chapter" data-level="7.2.4" data-path="text-mining.html"><a href="text-mining.html#sentence-level-2-pt"><i class="fa fa-check"></i><b>7.2.4</b> Sentence Level (2 pt)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="relationships.html"><a href="relationships.html"><i class="fa fa-check"></i><b>8</b> Relationships</a>
<ul>
<li class="chapter" data-level="8.1" data-path="relationships.html"><a href="relationships.html#minimal-example"><i class="fa fa-check"></i><b>8.1</b> Minimal Example</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="relationships.html"><a href="relationships.html#variance"><i class="fa fa-check"></i><b>8.1.1</b> Variance</a></li>
<li class="chapter" data-level="8.1.2" data-path="relationships.html"><a href="relationships.html#variation-around-the-mean"><i class="fa fa-check"></i><b>8.1.2</b> Variation ARound the Mean</a></li>
<li class="chapter" data-level="8.1.3" data-path="relationships.html"><a href="relationships.html#scatterplot"><i class="fa fa-check"></i><b>8.1.3</b> Scatterplot</a></li>
<li class="chapter" data-level="8.1.4" data-path="relationships.html"><a href="relationships.html#covariance"><i class="fa fa-check"></i><b>8.1.4</b> Covariance</a></li>
<li class="chapter" data-level="8.1.5" data-path="relationships.html"><a href="relationships.html#covariance-visualization"><i class="fa fa-check"></i><b>8.1.5</b> Covariance Visualization</a></li>
<li class="chapter" data-level="8.1.6" data-path="relationships.html"><a href="relationships.html#correlation"><i class="fa fa-check"></i><b>8.1.6</b> Correlation</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="relationships.html"><a href="relationships.html#application-3"><i class="fa fa-check"></i><b>8.2</b> Application</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="relationships.html"><a href="relationships.html#one-variable-graphics"><i class="fa fa-check"></i><b>8.2.1</b> One Variable Graphics</a></li>
<li class="chapter" data-level="8.2.2" data-path="relationships.html"><a href="relationships.html#two-variable-graphics"><i class="fa fa-check"></i><b>8.2.2</b> Two Variable Graphics</a></li>
<li class="chapter" data-level="8.2.3" data-path="relationships.html"><a href="relationships.html#correlation-and-regression"><i class="fa fa-check"></i><b>8.2.3</b> Correlation and Regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>9</b> Regression</a>
<ul>
<li class="chapter" data-level="9.1" data-path="regression.html"><a href="regression.html#from-artists-and-economists"><i class="fa fa-check"></i><b>9.1</b> From Artists and Economists</a></li>
<li class="chapter" data-level="9.2" data-path="regression.html"><a href="regression.html#data-is-everywhere-1"><i class="fa fa-check"></i><b>9.2</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="regression.html"><a href="regression.html#data-in-a-table"><i class="fa fa-check"></i><b>9.2.1</b> Data in a table</a></li>
<li class="chapter" data-level="9.2.2" data-path="regression.html"><a href="regression.html#data-in-a-graph"><i class="fa fa-check"></i><b>9.2.2</b> Data in a graph</a></li>
<li class="chapter" data-level="9.2.3" data-path="regression.html"><a href="regression.html#the-trend"><i class="fa fa-check"></i><b>9.2.3</b> The trend</a></li>
<li class="chapter" data-level="9.2.4" data-path="regression.html"><a href="regression.html#the-blackbox"><i class="fa fa-check"></i><b>9.2.4</b> The blackbox</a></li>
<li class="chapter" data-level="9.2.5" data-path="regression.html"><a href="regression.html#nobodys-perfect"><i class="fa fa-check"></i><b>9.2.5</b> Nobody's perfect</a></li>
<li class="chapter" data-level="9.2.6" data-path="regression.html"><a href="regression.html#vocab-wrap-up"><i class="fa fa-check"></i><b>9.2.6</b> Vocab Wrap-Up</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regression.html"><a href="regression.html#for-the-truly-dedicated"><i class="fa fa-check"></i><b>9.3</b> For the truly dedicated</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="regression.html"><a href="regression.html#algebra"><i class="fa fa-check"></i><b>9.3.1</b> Algebra</a></li>
<li class="chapter" data-level="9.3.2" data-path="regression.html"><a href="regression.html#analysis"><i class="fa fa-check"></i><b>9.3.2</b> Analysis</a></li>
<li class="chapter" data-level="9.3.3" data-path="regression.html"><a href="regression.html#take-the-long-way-home"><i class="fa fa-check"></i><b>9.3.3</b> Take the Long Way Home</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression.html"><a href="regression.html#survival-of-the-fittest-line"><i class="fa fa-check"></i><b>9.4</b> Survival of the Fittest Line</a></li>
<li class="chapter" data-level="9.5" data-path="regression.html"><a href="regression.html#on-the-shoulders-of-giants"><i class="fa fa-check"></i><b>9.5</b> On the Shoulders of Giants</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>10</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="10.1" data-path="logistic-regression.html"><a href="logistic-regression.html#minimal-example-1"><i class="fa fa-check"></i><b>10.1</b> Minimal Example</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="logistic-regression.html"><a href="logistic-regression.html#think-inside-of-a-box"><i class="fa fa-check"></i><b>10.1.1</b> Think inside of a box</a></li>
<li class="chapter" data-level="10.1.2" data-path="logistic-regression.html"><a href="logistic-regression.html#from-probability-to-odds"><i class="fa fa-check"></i><b>10.1.2</b> From probability to odds</a></li>
<li class="chapter" data-level="10.1.3" data-path="logistic-regression.html"><a href="logistic-regression.html#from-odds-to-log-of-odds"><i class="fa fa-check"></i><b>10.1.3</b> From odds to log of odds</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="logistic-regression.html"><a href="logistic-regression.html#application-titanic-survival"><i class="fa fa-check"></i><b>10.2</b> Application: Titanic Survival</a></li>
<li class="chapter" data-level="10.3" data-path="logistic-regression.html"><a href="logistic-regression.html#addons"><i class="fa fa-check"></i><b>10.3</b> Addons</a></li>
<li class="chapter" data-level="10.4" data-path="logistic-regression.html"><a href="logistic-regression.html#motivation"><i class="fa fa-check"></i><b>10.4</b> Motivation</a></li>
<li class="chapter" data-level="10.5" data-path="logistic-regression.html"><a href="logistic-regression.html#load-and-merge"><i class="fa fa-check"></i><b>10.5</b> Load and Merge</a></li>
<li class="chapter" data-level="10.6" data-path="logistic-regression.html"><a href="logistic-regression.html#data-manipulation"><i class="fa fa-check"></i><b>10.6</b> Data Manipulation</a></li>
<li class="chapter" data-level="10.7" data-path="logistic-regression.html"><a href="logistic-regression.html#simple-linear-model"><i class="fa fa-check"></i><b>10.7</b> Simple linear model</a></li>
<li class="chapter" data-level="10.8" data-path="logistic-regression.html"><a href="logistic-regression.html#multiple-regression-with-control"><i class="fa fa-check"></i><b>10.8</b> Multiple regression with control</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="logistic-regression.html"><a href="logistic-regression.html#regression-model"><i class="fa fa-check"></i><b>10.8.1</b> Regression model</a></li>
<li class="chapter" data-level="10.8.2" data-path="logistic-regression.html"><a href="logistic-regression.html#visualization-parallel-slopes"><i class="fa fa-check"></i><b>10.8.2</b> Visualization (parallel slopes)</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="logistic-regression.html"><a href="logistic-regression.html#multiple-regression-with-moderator"><i class="fa fa-check"></i><b>10.9</b> Multiple regression with moderator</a>
<ul>
<li class="chapter" data-level="10.9.1" data-path="logistic-regression.html"><a href="logistic-regression.html#interaction-dummy-dummy"><i class="fa fa-check"></i><b>10.9.1</b> Interaction (dummy * dummy)</a></li>
<li class="chapter" data-level="10.9.2" data-path="logistic-regression.html"><a href="logistic-regression.html#interaction-categorical-dummy"><i class="fa fa-check"></i><b>10.9.2</b> Interaction (categorical * dummy)</a></li>
<li class="chapter" data-level="10.9.3" data-path="logistic-regression.html"><a href="logistic-regression.html#interaction-continuous-dummy"><i class="fa fa-check"></i><b>10.9.3</b> Interaction (continuous * dummy)</a></li>
<li class="chapter" data-level="10.9.4" data-path="logistic-regression.html"><a href="logistic-regression.html#visualization-non-parallel-slopes"><i class="fa fa-check"></i><b>10.9.4</b> Visualization (non-parallel slopes)</a></li>
<li class="chapter" data-level="10.9.5" data-path="logistic-regression.html"><a href="logistic-regression.html#interaction-continuous-continuous"><i class="fa fa-check"></i><b>10.9.5</b> Interaction (continuous * continuous)</a></li>
<li class="chapter" data-level="10.9.6" data-path="logistic-regression.html"><a href="logistic-regression.html#visualization-non-parallel-slopes-1"><i class="fa fa-check"></i><b>10.9.6</b> Visualization (non-parallel slopes)</a></li>
</ul></li>
<li class="chapter" data-level="10.10" data-path="logistic-regression.html"><a href="logistic-regression.html#marginal-effects-1"><i class="fa fa-check"></i><b>10.10</b> Marginal Effects</a>
<ul>
<li class="chapter" data-level="10.10.1" data-path="logistic-regression.html"><a href="logistic-regression.html#marginal-effects-at-representatives-task"><i class="fa fa-check"></i><b>10.10.1</b> Marginal effects at representatives (TASK)</a></li>
<li class="chapter" data-level="10.10.2" data-path="logistic-regression.html"><a href="logistic-regression.html#marginal-effects-at-the-mean-task"><i class="fa fa-check"></i><b>10.10.2</b> Marginal effects at the mean (TASK)</a></li>
<li class="chapter" data-level="10.10.3" data-path="logistic-regression.html"><a href="logistic-regression.html#average-marginal-effects"><i class="fa fa-check"></i><b>10.10.3</b> Average marginal effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="fixed-effects.html"><a href="fixed-effects.html"><i class="fa fa-check"></i><b>11</b> Fixed effects</a>
<ul>
<li class="chapter" data-level="11.1" data-path="fixed-effects.html"><a href="fixed-effects.html#cross-sectional-data-2-pt"><i class="fa fa-check"></i><b>11.1</b> Cross-sectional Data (2 pt)</a></li>
<li class="chapter" data-level="11.2" data-path="fixed-effects.html"><a href="fixed-effects.html#panel-data-2-pt"><i class="fa fa-check"></i><b>11.2</b> Panel Data (2 pt)</a></li>
<li class="chapter" data-level="11.3" data-path="fixed-effects.html"><a href="fixed-effects.html#fixed-effects-regression"><i class="fa fa-check"></i><b>11.3</b> Fixed Effects Regression</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="fixed-effects.html"><a href="fixed-effects.html#first-difference-2-pt"><i class="fa fa-check"></i><b>11.3.1</b> First Difference (2 pt)</a></li>
<li class="chapter" data-level="11.3.2" data-path="fixed-effects.html"><a href="fixed-effects.html#within-estimator-2-pt"><i class="fa fa-check"></i><b>11.3.2</b> Within Estimator (2 pt)</a></li>
<li class="chapter" data-level="11.3.3" data-path="fixed-effects.html"><a href="fixed-effects.html#lsdv-1-pt"><i class="fa fa-check"></i><b>11.3.3</b> LSDV (1 pt)</a></li>
<li class="chapter" data-level="11.3.4" data-path="fixed-effects.html"><a href="fixed-effects.html#comparison-1-pt"><i class="fa fa-check"></i><b>11.3.4</b> Comparison (1 pt)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="first-difference.html"><a href="first-difference.html"><i class="fa fa-check"></i><b>12</b> First Difference</a>
<ul>
<li class="chapter" data-level="12.1" data-path="first-difference.html"><a href="first-difference.html#application-mincer-earnings-function"><i class="fa fa-check"></i><b>12.1</b> Application: Mincer earnings function</a></li>
<li class="chapter" data-level="12.2" data-path="first-difference.html"><a href="first-difference.html#data-management-4-pt"><i class="fa fa-check"></i><b>12.2</b> Data Management (4 pt)</a></li>
<li class="chapter" data-level="12.3" data-path="first-difference.html"><a href="first-difference.html#data-visualization-2-pt"><i class="fa fa-check"></i><b>12.3</b> Data Visualization (2 pt)</a></li>
<li class="chapter" data-level="12.4" data-path="first-difference.html"><a href="first-difference.html#data-modeling-2-pt"><i class="fa fa-check"></i><b>12.4</b> Data Modeling (2 pt)</a></li>
<li class="chapter" data-level="12.5" data-path="first-difference.html"><a href="first-difference.html#minimal-example-2"><i class="fa fa-check"></i><b>12.5</b> Minimal Example</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="wikipedia-1.html"><a href="wikipedia-1.html"><i class="fa fa-check"></i><b>13</b> Wikipedia</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://marco-kuehne.com/" target="blank">Visit my personal page</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Make A Long Character Readable in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<br>
<div class = infobox>
This book is <b>Work in Progress</b>. I appreciate your feedback to make the book better.
</div>
<div id="first-difference" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Chapter 12</span> First Difference<a href="first-difference.html#first-difference" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="application-mincer-earnings-function" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Application: Mincer earnings function<a href="first-difference.html#application-mincer-earnings-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="data-management-4-pt" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Data Management (4 pt)<a href="first-difference.html#data-management-4-pt" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="first-difference.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb168-2"><a href="first-difference.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb168-3"><a href="first-difference.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb168-4"><a href="first-difference.html#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb168-5"><a href="first-difference.html#cb168-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-6"><a href="first-difference.html#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Read</span></span>
<span id="cb168-7"><a href="first-difference.html#cb168-7" aria-hidden="true" tabindex="-1"></a>pl <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;./SOEPteaching/pl_reduced.rds&quot;</span>)</span>
<span id="cb168-8"><a href="first-difference.html#cb168-8" aria-hidden="true" tabindex="-1"></a>pequiv <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;./SOEPteaching/pequiv_reduced.rds&quot;</span>)</span>
<span id="cb168-9"><a href="first-difference.html#cb168-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-10"><a href="first-difference.html#cb168-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge data</span></span>
<span id="cb168-11"><a href="first-difference.html#cb168-11" aria-hidden="true" tabindex="-1"></a>master <span class="ot">&lt;-</span> <span class="fu">merge</span>(pl, pequiv, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>, <span class="st">&quot;syear&quot;</span>))</span></code></pre></div>
<p>All negative values represent missing values. Do a complete case analysis (n should be 338892). Drop all Stata labels with <code>remove_all_labels()</code> from <code>sjlabelled</code> package.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="first-difference.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop missings</span></span>
<span id="cb169-2"><a href="first-difference.html#cb169-2" aria-hidden="true" tabindex="-1"></a>master[master <span class="sc">&lt;</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb169-3"><a href="first-difference.html#cb169-3" aria-hidden="true" tabindex="-1"></a>master <span class="ot">&lt;-</span> master[<span class="fu">complete.cases</span>(master), ]</span>
<span id="cb169-4"><a href="first-difference.html#cb169-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-5"><a href="first-difference.html#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop labels </span></span>
<span id="cb169-6"><a href="first-difference.html#cb169-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjlabelled)</span>
<span id="cb169-7"><a href="first-difference.html#cb169-7" aria-hidden="true" tabindex="-1"></a>master <span class="ot">&lt;-</span> <span class="fu">remove_all_labels</span>(master)</span></code></pre></div>
<p>Calculate each information in <code>master</code> per individual (group by <code>id</code>). <em>Rename</em> <code>plh0182</code> to <code>satis</code>, <code>d11109</code> to <code>years_educ</code> and <code>d11101</code> to <code>age</code>.</p>
<ol style="list-style-type: decimal">
<li><strong>Hourly wages</strong> can be calculated as total annual income (<code>ijob1</code>) divided by total annual work hours (<code>e11101</code>).
<ul>
<li>You may store log of hourly wage as a separate column/variable <code>log_inc_hourly</code>.</li>
<li>Please filter for annual work hours larger than 0 (otherwise results might be <code>Inf</code>), before dividing.</li>
<li>Please filter for hourly wages larger than 1, before taking the log.</li>
</ul></li>
<li><strong>Years of schooling</strong> are readily available in SOEP.</li>
<li><strong>Tenure</strong> is not available in SOEP.
<ul>
<li><span class="citation">Reilich (<a href="references.html#ref-reilich2011smoking" role="doc-biblioref">2011</a>)</span> suggests "Experience is the potential experience following Mincer. We calculate the age minus the years of schooling minus 6 and minus the number of years with the experience of being unemployed.".</li>
<li>Calculate <code>tenure</code> like this <code>tenure = age - years_educ - 6 - years_unemp</code>.</li>
<li>Calculate the number of years being unemployed <code>years_unemp</code> as the number of observations per individual minus the sum of all years that this individual was employed. <code>e11102</code> is the employment status (0 for unemployed, 1 for employed) in a particular year.</li>
<li>Some people exhibit negative tenure for various reasons. Filter for positive values.</li>
</ul></li>
</ol>
<p>Store the prepared data as <code>mincer</code>. Summary statistics should roughly be equal to the following table:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="first-difference.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data stuff</span></span>
<span id="cb170-2"><a href="first-difference.html#cb170-2" aria-hidden="true" tabindex="-1"></a>mincer <span class="ot">&lt;-</span> master <span class="sc">%&gt;%</span></span>
<span id="cb170-3"><a href="first-difference.html#cb170-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">satis =</span> plh0182,</span>
<span id="cb170-4"><a href="first-difference.html#cb170-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">years_educ =</span> d11109,</span>
<span id="cb170-5"><a href="first-difference.html#cb170-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> d11101) <span class="sc">%&gt;%</span></span>
<span id="cb170-6"><a href="first-difference.html#cb170-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid) <span class="sc">%&gt;%</span></span>
<span id="cb170-7"><a href="first-difference.html#cb170-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(e11101 <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb170-8"><a href="first-difference.html#cb170-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inc_hourly =</span> ijob1<span class="sc">/</span>e11101) <span class="sc">%&gt;%</span></span>
<span id="cb170-9"><a href="first-difference.html#cb170-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inc_hourly <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb170-10"><a href="first-difference.html#cb170-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_inc_hourly =</span> <span class="fu">log</span>(inc_hourly)) <span class="sc">%&gt;%</span></span>
<span id="cb170-11"><a href="first-difference.html#cb170-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">years_obs =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb170-12"><a href="first-difference.html#cb170-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">years_emp =</span> <span class="fu">sum</span>(e11102)) <span class="sc">%&gt;%</span></span>
<span id="cb170-13"><a href="first-difference.html#cb170-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">years_unemp =</span> <span class="fu">n</span>() <span class="sc">-</span> <span class="fu">sum</span>(e11102)) <span class="sc">%&gt;%</span></span>
<span id="cb170-14"><a href="first-difference.html#cb170-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tenure =</span> age <span class="sc">-</span> years_educ <span class="sc">-</span> <span class="dv">6</span> <span class="sc">-</span> years_unemp) <span class="sc">%&gt;%</span></span>
<span id="cb170-15"><a href="first-difference.html#cb170-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tenure <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb170-16"><a href="first-difference.html#cb170-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pid)</span>
<span id="cb170-17"><a href="first-difference.html#cb170-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#select(c(&quot;pid&quot;, &quot;syear&quot;, &quot;years_educ&quot;, &quot;tenure&quot;, &quot;inc_hourly&quot;, &quot;log_inc_hourly&quot;))</span></span></code></pre></div>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="first-difference.html#cb171-1" aria-hidden="true" tabindex="-1"></a>mincer <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(mincer)</span>
<span id="cb171-2"><a href="first-difference.html#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb171-3"><a href="first-difference.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(mincer[,<span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>)], <span class="at">type=</span><span class="st">&quot;text&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="first-difference.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb172-2"><a href="first-difference.html#cb172-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-3"><a href="first-difference.html#cb172-3" aria-hidden="true" tabindex="-1"></a>mincer <span class="sc">%&gt;%</span></span>
<span id="cb172-4"><a href="first-difference.html#cb172-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;years_educ&quot;</span>, <span class="st">&quot;tenure&quot;</span>, <span class="st">&quot;inc_hourly&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb172-5"><a href="first-difference.html#cb172-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>() <span class="sc">%&gt;%</span></span>
<span id="cb172-6"><a href="first-difference.html#cb172-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold_labels</span>() <span class="sc">%&gt;%</span></span>
<span id="cb172-7"><a href="first-difference.html#cb172-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_n</span>()</span></code></pre></div>
<div id="ogueufmkvt" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ogueufmkvt .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ogueufmkvt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ogueufmkvt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ogueufmkvt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ogueufmkvt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ogueufmkvt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ogueufmkvt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ogueufmkvt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ogueufmkvt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ogueufmkvt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ogueufmkvt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ogueufmkvt .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ogueufmkvt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ogueufmkvt .gt_from_md > :first-child {
  margin-top: 0;
}

#ogueufmkvt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ogueufmkvt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ogueufmkvt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ogueufmkvt .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ogueufmkvt .gt_row_group_first td {
  border-top-width: 2px;
}

#ogueufmkvt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ogueufmkvt .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ogueufmkvt .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ogueufmkvt .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ogueufmkvt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ogueufmkvt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ogueufmkvt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ogueufmkvt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ogueufmkvt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ogueufmkvt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ogueufmkvt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ogueufmkvt .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ogueufmkvt .gt_left {
  text-align: left;
}

#ogueufmkvt .gt_center {
  text-align: center;
}

#ogueufmkvt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ogueufmkvt .gt_font_normal {
  font-weight: normal;
}

#ogueufmkvt .gt_font_bold {
  font-weight: bold;
}

#ogueufmkvt .gt_font_italic {
  font-style: italic;
}

#ogueufmkvt .gt_super {
  font-size: 65%;
}

#ogueufmkvt .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#ogueufmkvt .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ogueufmkvt .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ogueufmkvt .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#ogueufmkvt .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#ogueufmkvt .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N = 189,514</strong><sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="font-weight: bold;">pid</td>
<td class="gt_row gt_center">189,514</td>
<td class="gt_row gt_center">2,977,501 (505,402, 20,009,405)</td></tr>
    <tr><td class="gt_row gt_left" style="font-weight: bold;">years_educ</td>
<td class="gt_row gt_center">189,514</td>
<td class="gt_row gt_center">11.50 (10.50, 13.50)</td></tr>
    <tr><td class="gt_row gt_left" style="font-weight: bold;">tenure</td>
<td class="gt_row gt_center">189,514</td>
<td class="gt_row gt_center">24 (14, 32)</td></tr>
    <tr><td class="gt_row gt_left" style="font-weight: bold;">inc_hourly</td>
<td class="gt_row gt_center">189,514</td>
<td class="gt_row gt_center">12 (8, 17)</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="3"><sup class="gt_footnote_marks">1</sup> Median (IQR)</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="data-visualization-2-pt" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Data Visualization (2 pt)<a href="first-difference.html#data-visualization-2-pt" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The graph shows the hourly wage (not logged) in relation to the work experience for 5 random people that are observed for at least 5 years. You can use the <code>sample_n_groups()</code> function from previous exercises.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="first-difference.html#cb173-1" aria-hidden="true" tabindex="-1"></a>sample_n_groups <span class="ot">=</span> <span class="cf">function</span>(grouped_df, size, <span class="at">replace =</span> <span class="cn">FALSE</span>, <span class="at">weight=</span><span class="cn">NULL</span>) {</span>
<span id="cb173-2"><a href="first-difference.html#cb173-2" aria-hidden="true" tabindex="-1"></a>  grp_var <span class="ot">&lt;-</span> grouped_df <span class="sc">%&gt;%</span> </span>
<span id="cb173-3"><a href="first-difference.html#cb173-3" aria-hidden="true" tabindex="-1"></a>    groups <span class="sc">%&gt;%</span></span>
<span id="cb173-4"><a href="first-difference.html#cb173-4" aria-hidden="true" tabindex="-1"></a>    unlist <span class="sc">%&gt;%</span> </span>
<span id="cb173-5"><a href="first-difference.html#cb173-5" aria-hidden="true" tabindex="-1"></a>    as.character</span>
<span id="cb173-6"><a href="first-difference.html#cb173-6" aria-hidden="true" tabindex="-1"></a>  random_grp <span class="ot">&lt;-</span> grouped_df <span class="sc">%&gt;%</span> </span>
<span id="cb173-7"><a href="first-difference.html#cb173-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb173-8"><a href="first-difference.html#cb173-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample_n</span>(size, replace, weight) <span class="sc">%&gt;%</span> </span>
<span id="cb173-9"><a href="first-difference.html#cb173-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">unique_id =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">NROW</span>(.))</span>
<span id="cb173-10"><a href="first-difference.html#cb173-10" aria-hidden="true" tabindex="-1"></a>  grouped_df <span class="sc">%&gt;%</span> </span>
<span id="cb173-11"><a href="first-difference.html#cb173-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">right_join</span>(random_grp, <span class="at">by=</span>grp_var) <span class="sc">%&gt;%</span> </span>
<span id="cb173-12"><a href="first-difference.html#cb173-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by_</span>(grp_var) </span>
<span id="cb173-13"><a href="first-difference.html#cb173-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="first-difference.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb174-2"><a href="first-difference.html#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">44</span>)</span>
<span id="cb174-3"><a href="first-difference.html#cb174-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-4"><a href="first-difference.html#cb174-4" aria-hidden="true" tabindex="-1"></a>mincer <span class="sc">%&gt;%</span> </span>
<span id="cb174-5"><a href="first-difference.html#cb174-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid) <span class="sc">%&gt;%</span></span>
<span id="cb174-6"><a href="first-difference.html#cb174-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb174-7"><a href="first-difference.html#cb174-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(purrr<span class="sc">::</span><span class="fu">map_lgl</span>(data, <span class="sc">~</span> <span class="fu">nrow</span>(.x) <span class="sc">&gt;=</span> <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb174-8"><a href="first-difference.html#cb174-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb174-9"><a href="first-difference.html#cb174-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n_groups</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="co"># select 3 pid for all time</span></span>
<span id="cb174-10"><a href="first-difference.html#cb174-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> tenure, <span class="at">y =</span> inc_hourly, <span class="at">col=</span><span class="fu">factor</span>(pid))) <span class="sc">+</span>  </span>
<span id="cb174-11"><a href="first-difference.html#cb174-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb174-12"><a href="first-difference.html#cb174-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Income and Work Experience&quot;</span>, </span>
<span id="cb174-13"><a href="first-difference.html#cb174-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">&quot;Selected Sample of 5 People&quot;</span>,</span>
<span id="cb174-14"><a href="first-difference.html#cb174-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Work Experience (Years)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Hourly Wage (Euro)&quot;</span>, </span>
<span id="cb174-15"><a href="first-difference.html#cb174-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">colour=</span><span class="st">&quot;person&quot;</span>) <span class="sc">+</span> <span class="co"># give some illustrative labels</span></span>
<span id="cb174-16"><a href="first-difference.html#cb174-16" aria-hidden="true" tabindex="-1"></a>       <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-239-1.png" width="576" /></p>
</div>
<div id="data-modeling-2-pt" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Data Modeling (2 pt)<a href="first-difference.html#data-modeling-2-pt" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We select a subset of data for the years 2017 and 2018 (T=2). We calculate a pooling model, first difference and fixed effects. We use the <code>plm</code> package for all model setups. Estimate models without education and without the constant:</p>
<p><span class="math display">\[\ln w_{it} = \beta_1 \text{tenure}_{it} + \beta_2 \text{tenure}^2_{it}  \]</span></p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="first-difference.html#cb175-1" aria-hidden="true" tabindex="-1"></a>mincer1718 <span class="ot">&lt;-</span> mincer <span class="sc">%&gt;%</span></span>
<span id="cb175-2"><a href="first-difference.html#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(syear <span class="sc">==</span> <span class="dv">2017</span> <span class="sc">|</span> syear <span class="sc">==</span> <span class="dv">2018</span>)</span>
<span id="cb175-3"><a href="first-difference.html#cb175-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-4"><a href="first-difference.html#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="co"># OLS </span></span>
<span id="cb175-5"><a href="first-difference.html#cb175-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plm)</span>
<span id="cb175-6"><a href="first-difference.html#cb175-6" aria-hidden="true" tabindex="-1"></a>LM2 <span class="ot">&lt;-</span> <span class="fu">plm</span>(log_inc_hourly <span class="sc">~</span> tenure <span class="sc">+</span> <span class="fu">I</span>(tenure<span class="sc">^</span><span class="dv">2</span>) <span class="sc">-</span><span class="dv">1</span>, <span class="at">data=</span>mincer1718, </span>
<span id="cb175-7"><a href="first-difference.html#cb175-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">model=</span><span class="st">&quot;pooling&quot;</span>, </span>
<span id="cb175-8"><a href="first-difference.html#cb175-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>,<span class="st">&quot;syear&quot;</span>))</span>
<span id="cb175-9"><a href="first-difference.html#cb175-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-10"><a href="first-difference.html#cb175-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Fixed Effects</span></span>
<span id="cb175-11"><a href="first-difference.html#cb175-11" aria-hidden="true" tabindex="-1"></a>FE2 <span class="ot">&lt;-</span> <span class="fu">plm</span>(log_inc_hourly <span class="sc">~</span> tenure <span class="sc">+</span> <span class="fu">I</span>(tenure<span class="sc">^</span><span class="dv">2</span>) <span class="sc">-</span><span class="dv">1</span>, <span class="at">data=</span>mincer1718, </span>
<span id="cb175-12"><a href="first-difference.html#cb175-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">model=</span><span class="st">&quot;within&quot;</span>, </span>
<span id="cb175-13"><a href="first-difference.html#cb175-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>,<span class="st">&quot;syear&quot;</span>))</span>
<span id="cb175-14"><a href="first-difference.html#cb175-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-15"><a href="first-difference.html#cb175-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fixed Effects</span></span>
<span id="cb175-16"><a href="first-difference.html#cb175-16" aria-hidden="true" tabindex="-1"></a>FD2 <span class="ot">&lt;-</span> <span class="fu">plm</span>(log_inc_hourly <span class="sc">~</span> tenure <span class="sc">+</span> <span class="fu">I</span>(tenure<span class="sc">^</span><span class="dv">2</span>) <span class="sc">-</span><span class="dv">1</span>, <span class="at">data=</span>mincer1718, </span>
<span id="cb175-17"><a href="first-difference.html#cb175-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">model=</span><span class="st">&quot;fd&quot;</span>, </span>
<span id="cb175-18"><a href="first-difference.html#cb175-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>,<span class="st">&quot;syear&quot;</span>))</span></code></pre></div>
<p>Create a <strong>stargazer</strong> table for model comparison, such as:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="first-difference.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stargazer Comparison</span></span>
<span id="cb176-2"><a href="first-difference.html#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb176-3"><a href="first-difference.html#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(LM2, FD2, FE2, <span class="at">type=</span><span class="st">&quot;text&quot;</span>,</span>
<span id="cb176-4"><a href="first-difference.html#cb176-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">column.labels=</span><span class="fu">c</span>(<span class="st">&quot;Pooling&quot;</span>, <span class="st">&quot;FD&quot;</span>, <span class="st">&quot;FE&quot;</span>),</span>
<span id="cb176-5"><a href="first-difference.html#cb176-5" aria-hidden="true" tabindex="-1"></a>          <span class="co">#keep=c(&quot;inc&quot;),</span></span>
<span id="cb176-6"><a href="first-difference.html#cb176-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">dep.var.labels.include =</span> <span class="cn">FALSE</span>, <span class="at">model.numbers =</span> <span class="cn">FALSE</span>,</span>
<span id="cb176-7"><a href="first-difference.html#cb176-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">omit.stat=</span><span class="st">&quot;f&quot;</span>)</span>
<span id="cb176-8"><a href="first-difference.html#cb176-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb176-9"><a href="first-difference.html#cb176-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ==========================================</span></span>
<span id="cb176-10"><a href="first-difference.html#cb176-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   Dependent variable:     </span></span>
<span id="cb176-11"><a href="first-difference.html#cb176-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              -----------------------------</span></span>
<span id="cb176-12"><a href="first-difference.html#cb176-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               Pooling     FD        FE    </span></span>
<span id="cb176-13"><a href="first-difference.html#cb176-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ------------------------------------------</span></span>
<span id="cb176-14"><a href="first-difference.html#cb176-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tenure       0.203***  0.077***  0.077*** </span></span>
<span id="cb176-15"><a href="first-difference.html#cb176-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               (0.001)   (0.012)   (0.012) </span></span>
<span id="cb176-16"><a href="first-difference.html#cb176-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb176-17"><a href="first-difference.html#cb176-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; I(tenure2)   -0.003*** -0.001*** -0.001***</span></span>
<span id="cb176-18"><a href="first-difference.html#cb176-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              (0.00002) (0.0002)  (0.0002) </span></span>
<span id="cb176-19"><a href="first-difference.html#cb176-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb176-20"><a href="first-difference.html#cb176-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ------------------------------------------</span></span>
<span id="cb176-21"><a href="first-difference.html#cb176-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Observations  15,440     6,229    15,440  </span></span>
<span id="cb176-22"><a href="first-difference.html#cb176-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; R2             0.106    0.0003     0.015  </span></span>
<span id="cb176-23"><a href="first-difference.html#cb176-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Adjusted R2    0.106    0.0001    -1.443  </span></span>
<span id="cb176-24"><a href="first-difference.html#cb176-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ==========================================</span></span>
<span id="cb176-25"><a href="first-difference.html#cb176-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Note:          *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</span></span></code></pre></div>
</div>
<div id="minimal-example-2" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> Minimal Example<a href="first-difference.html#minimal-example-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Please create a <strong>minimal working example</strong> to illustrate the differences between FD and FE. How minimal can it be?</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="first-difference.html#cb177-1" aria-hidden="true" tabindex="-1"></a>MWE <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>),</span>
<span id="cb177-2"><a href="first-difference.html#cb177-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">time =</span> <span class="fu">seq</span>(<span class="at">from=</span><span class="dv">1</span>, <span class="at">to=</span><span class="dv">7</span>, <span class="at">by=</span><span class="dv">1</span>),</span>
<span id="cb177-3"><a href="first-difference.html#cb177-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">married =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb177-4"><a href="first-difference.html#cb177-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">happy =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">5</span>, <span class="dv">7</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb177-5"><a href="first-difference.html#cb177-5" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#married = c(0,0,1,1,0,1,1, 1,1,0,0,0,1,0),</span></span>
<span id="cb177-6"><a href="first-difference.html#cb177-6" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#happy = c(6,5,8,7,4,7,5, 7,7,3,3,5,5,6))</span></span>
<span id="cb177-7"><a href="first-difference.html#cb177-7" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#married = round(runif(14, min = 0, max = 1),0),</span></span>
<span id="cb177-8"><a href="first-difference.html#cb177-8" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#happy = round(runif(14, min = 4, max = 10),0))</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Create a dataset <code>MWE</code> for two people (<code>id</code> 1 and 2) with 7 observations (<code>time</code> periods from 1 to 7).</li>
<li>Create two variables. A dummy called <code>married</code> (regressor) and a <code>happiness</code> outcome variable (natural numbers ranging from 0 to 10). You may create the values of <code>married</code> and <code>happy</code> manually.</li>
<li>Create a line plot for happiness over time colored by each individual. (In total, you should have two lines of different color.)</li>
<li>Mark the marriage status by any reasonable label (there are several options in <code>ggplot</code>).</li>
</ol>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="first-difference.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb178-2"><a href="first-difference.html#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(MWE, <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> happy, <span class="at">col=</span><span class="fu">factor</span>(id))) <span class="sc">+</span>  </span>
<span id="cb178-3"><a href="first-difference.html#cb178-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="fl">0.2</span>, <span class="at">h =</span> <span class="fl">0.2</span>)) <span class="sc">+</span> </span>
<span id="cb178-4"><a href="first-difference.html#cb178-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape=</span><span class="fu">factor</span>(married)), <span class="at">size=</span><span class="dv">4</span>, <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="fl">0.2</span>, <span class="at">h =</span> <span class="fl">0.2</span>)) <span class="sc">+</span> </span>
<span id="cb178-5"><a href="first-difference.html#cb178-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Marriage and Happiness&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Jitter added to confuse the reader.&quot;</span>,</span>
<span id="cb178-6"><a href="first-difference.html#cb178-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Time (Years)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Happiness&quot;</span>, </span>
<span id="cb178-7"><a href="first-difference.html#cb178-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">colour=</span><span class="st">&quot;Person&quot;</span>, <span class="at">shape=</span><span class="st">&quot;Marriage&quot;</span>)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-243-1.png" width="576" /></p>
<p>Calculate a FE and FD estimator for how the marriage dummy affects happiness. Play around with different values and see how the FE and FD estimators changes. Select values such that FD is reasonable higher than FE. The two models look like this:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="first-difference.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fixed Effects</span></span>
<span id="cb179-2"><a href="first-difference.html#cb179-2" aria-hidden="true" tabindex="-1"></a>FE_marry <span class="ot">&lt;-</span> <span class="fu">plm</span>(happy <span class="sc">~</span> married <span class="sc">-</span><span class="dv">1</span>, <span class="at">data=</span>MWE, </span>
<span id="cb179-3"><a href="first-difference.html#cb179-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">model=</span><span class="st">&quot;within&quot;</span>, </span>
<span id="cb179-4"><a href="first-difference.html#cb179-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>,<span class="st">&quot;time&quot;</span>))</span>
<span id="cb179-5"><a href="first-difference.html#cb179-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-6"><a href="first-difference.html#cb179-6" aria-hidden="true" tabindex="-1"></a><span class="co">#FE_marry &lt;- lm(happy ~ married + as.factor(id), data=MWE)</span></span>
<span id="cb179-7"><a href="first-difference.html#cb179-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-8"><a href="first-difference.html#cb179-8" aria-hidden="true" tabindex="-1"></a><span class="co"># First Difference</span></span>
<span id="cb179-9"><a href="first-difference.html#cb179-9" aria-hidden="true" tabindex="-1"></a>FD_marry <span class="ot">&lt;-</span> <span class="fu">plm</span>(happy <span class="sc">~</span> married <span class="sc">-</span><span class="dv">1</span>, <span class="at">data=</span>MWE, </span>
<span id="cb179-10"><a href="first-difference.html#cb179-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">model=</span><span class="st">&quot;fd&quot;</span>, </span>
<span id="cb179-11"><a href="first-difference.html#cb179-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">index =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>,<span class="st">&quot;time&quot;</span>))</span>
<span id="cb179-12"><a href="first-difference.html#cb179-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-13"><a href="first-difference.html#cb179-13" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(FE_marry, FD_marry, <span class="at">type=</span><span class="st">&quot;text&quot;</span>, </span>
<span id="cb179-14"><a href="first-difference.html#cb179-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">column.labels=</span><span class="fu">c</span>(<span class="st">&quot;FE&quot;</span>, <span class="st">&quot;FD&quot;</span>),</span>
<span id="cb179-15"><a href="first-difference.html#cb179-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">keep=</span><span class="fu">c</span>(<span class="st">&quot;married&quot;</span>),</span>
<span id="cb179-16"><a href="first-difference.html#cb179-16" aria-hidden="true" tabindex="-1"></a>          <span class="at">dep.var.labels.include =</span> <span class="cn">FALSE</span>, </span>
<span id="cb179-17"><a href="first-difference.html#cb179-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">model.numbers =</span> <span class="cn">FALSE</span>)</span>
<span id="cb179-18"><a href="first-difference.html#cb179-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb179-19"><a href="first-difference.html#cb179-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; =====================================================</span></span>
<span id="cb179-20"><a href="first-difference.html#cb179-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                              Dependent variable:     </span></span>
<span id="cb179-21"><a href="first-difference.html#cb179-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          ----------------------------</span></span>
<span id="cb179-22"><a href="first-difference.html#cb179-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                FE            FD      </span></span>
<span id="cb179-23"><a href="first-difference.html#cb179-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -----------------------------------------------------</span></span>
<span id="cb179-24"><a href="first-difference.html#cb179-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; married                     1.750**       2.833***   </span></span>
<span id="cb179-25"><a href="first-difference.html#cb179-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                             (0.592)        (0.405)   </span></span>
<span id="cb179-26"><a href="first-difference.html#cb179-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                      </span></span>
<span id="cb179-27"><a href="first-difference.html#cb179-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -----------------------------------------------------</span></span>
<span id="cb179-28"><a href="first-difference.html#cb179-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Observations                   14            12      </span></span>
<span id="cb179-29"><a href="first-difference.html#cb179-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; R2                           0.443          0.883    </span></span>
<span id="cb179-30"><a href="first-difference.html#cb179-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Adjusted R2                  0.341          0.883    </span></span>
<span id="cb179-31"><a href="first-difference.html#cb179-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F Statistic (df = 1; 11)    8.741**       48.908***  </span></span>
<span id="cb179-32"><a href="first-difference.html#cb179-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; =====================================================</span></span>
<span id="cb179-33"><a href="first-difference.html#cb179-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Note:                     *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</span></span></code></pre></div>
<p>From this table, it can be seen that the immediate impact getting married (2.83) is higher than the overall level difference of being married (1.75).</p>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="fixed-effects.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="wikipedia-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Becoming Fluent In Data.pdf", "Becoming Fluent In Data.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": false
},
"toc_depth": 1,
"toc-title": "Table of Contents",
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
