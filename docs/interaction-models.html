<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Interaction Models | Becoming Fluent in Data</title>
  <meta name="description" content="A guide to become fluent in data." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Interaction Models | Becoming Fluent in Data" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/Cover.png" />
  <meta property="og:description" content="A guide to become fluent in data." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Interaction Models | Becoming Fluent in Data" />
  
  <meta name="twitter:description" content="A guide to become fluent in data." />
  <meta name="twitter:image" content="/images/Cover.png" />

<meta name="author" content="Marco Kühne" />


<meta name="date" content="2023-04-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/Logo.ico" type="image/x-icon" />
<link rel="prev" href="linear-regression.html"/>
<link rel="next" href="logistic-regression.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="libs/tippyjs-3.2.0/themes/google.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/light-border.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/light.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/translucent.css" rel="stylesheet" />
<script src="libs/tippyjs-3.2.0/tippy.all.min.js"></script>
<script src="libs/tippy-binding-0.1.0/tippy.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.27/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script type="application/json" class="js-hypothesis-config">
{
"showHighlights": false
}
</script>
<script async defer src="https://hypothes.is/embed.js"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P9BQG7T00K"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-P9BQG7T00K');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="www/webex.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/box_def.css" type="text/css" />
<link rel="stylesheet" href="css/box_amazing.css" type="text/css" />
<link rel="stylesheet" href="css/box_challenge.css" type="text/css" />
<link rel="stylesheet" href="css/box_dedicated.css" type="text/css" />
<link rel="stylesheet" href="css/box_reading.css" type="text/css" />
<link rel="stylesheet" href="css/ani.css" type="text/css" />
<link rel="stylesheet" href="css/background.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://marcokuehne.github.io/">Becoming Fluent in Data</a></li> <li><p class="aligncenter"> <img src="images/Logo.png" width="60%" height="60%"> </p></li>
<li class="divider"></li>
<li class="part"><span><b>I Intro</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html#dust-and-dark"><i class="fa fa-check"></i>Dust and Dark</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html#teach-learn-repeat"><i class="fa fa-check"></i>Teach – Learn – Repeat</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html"><i class="fa fa-check"></i>About the book</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#aims-of-this-book"><i class="fa fa-check"></i>Aims of this book</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#structure"><i class="fa fa-check"></i>Structure</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#color"><i class="fa fa-check"></i>Color</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#components"><i class="fa fa-check"></i>Components</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i>Intro to R</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#watching-paint-dry"><i class="fa fa-check"></i>Watching paint dry</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#when-paint-becomes-art"><i class="fa fa-check"></i>When paint becomes art</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#define-objects"><i class="fa fa-check"></i>Define objects</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#numeric-variables"><i class="fa fa-check"></i>Numeric Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#logical-variables"><i class="fa fa-check"></i>Logical Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#string-variables"><i class="fa fa-check"></i>String Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#factor-variables"><i class="fa fa-check"></i>Factor Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#combine-objects"><i class="fa fa-check"></i>Combine objects</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#data-frame"><i class="fa fa-check"></i>Data frame</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#plots"><i class="fa fa-check"></i>Plots</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html"><i class="fa fa-check"></i><b>1</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#why-we-measure"><i class="fa fa-check"></i><b>1.1</b> Why we measure</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#women-are-having-far-fewer-children."><i class="fa fa-check"></i><b>1.1.1</b> Women are having far fewer children.</a></li>
<li class="chapter" data-level="1.1.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#global-surface-temperature-is-rising."><i class="fa fa-check"></i><b>1.1.2</b> Global surface temperature is rising.</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#means-of-measuring"><i class="fa fa-check"></i><b>1.2</b> Means of measuring</a></li>
<li class="chapter" data-level="1.3" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#types-of-data"><i class="fa fa-check"></i><b>1.3</b> Types of data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#origin-of-data"><i class="fa fa-check"></i><b>1.3.1</b> Origin of data</a></li>
<li class="chapter" data-level="1.3.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#analysis-of-data"><i class="fa fa-check"></i><b>1.3.2</b> Analysis of data</a></li>
<li class="chapter" data-level="1.3.3" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#structure-of-data"><i class="fa fa-check"></i><b>1.3.3</b> Structure of data</a></li>
<li class="chapter" data-level="1.3.4" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#the-level-of-access"><i class="fa fa-check"></i><b>1.3.4</b> The level of access</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#variables-inside-the-data"><i class="fa fa-check"></i><b>1.4</b> Variables inside the data</a></li>
<li class="chapter" data-level="1.5" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#the-reality-behind-the-data"><i class="fa fa-check"></i><b>1.5</b> The reality behind the data</a></li>
<li class="chapter" data-level="1.6" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#apply-your-knowledge"><i class="fa fa-check"></i><b>1.6</b> Apply your knowledge</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html"><i class="fa fa-check"></i><b>2</b> Stories and Visuals</a>
<ul>
<li class="chapter" data-level="2.1" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#facts"><i class="fa fa-check"></i><b>2.1</b> Facts</a></li>
<li class="chapter" data-level="2.2" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#visualization"><i class="fa fa-check"></i><b>2.2</b> Visualization</a></li>
<li class="chapter" data-level="2.3" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#telling-a-story"><i class="fa fa-check"></i><b>2.3</b> Telling a story</a></li>
<li class="chapter" data-level="2.4" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#mans-best-friend"><i class="fa fa-check"></i><b>2.4</b> Man's best friend</a></li>
<li class="chapter" data-level="2.5" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#less-is-more"><i class="fa fa-check"></i><b>2.5</b> Less is more</a></li>
<li class="chapter" data-level="2.6" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#grammar-of-graphics"><i class="fa fa-check"></i><b>2.6</b> Grammar of Graphics</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="group-comparison.html"><a href="group-comparison.html"><i class="fa fa-check"></i><b>3</b> Group Comparison</a>
<ul>
<li class="chapter" data-level="3.1" data-path="group-comparison.html"><a href="group-comparison.html#comparability"><i class="fa fa-check"></i><b>3.1</b> Comparability</a></li>
<li class="chapter" data-level="3.2" data-path="group-comparison.html"><a href="group-comparison.html#application"><i class="fa fa-check"></i><b>3.2</b> Application</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="group-comparison.html"><a href="group-comparison.html#loading-the-data"><i class="fa fa-check"></i><b>3.2.1</b> Loading the data</a></li>
<li class="chapter" data-level="3.2.2" data-path="group-comparison.html"><a href="group-comparison.html#look-into-data"><i class="fa fa-check"></i><b>3.2.2</b> Look into data</a></li>
<li class="chapter" data-level="3.2.3" data-path="group-comparison.html"><a href="group-comparison.html#fly-over-data"><i class="fa fa-check"></i><b>3.2.3</b> Fly over data</a></li>
<li class="chapter" data-level="3.2.4" data-path="group-comparison.html"><a href="group-comparison.html#missing-data"><i class="fa fa-check"></i><b>3.2.4</b> Missing data</a></li>
<li class="chapter" data-level="3.2.5" data-path="group-comparison.html"><a href="group-comparison.html#explore-data"><i class="fa fa-check"></i><b>3.2.5</b> Explore data</a></li>
<li class="chapter" data-level="3.2.6" data-path="group-comparison.html"><a href="group-comparison.html#standardization"><i class="fa fa-check"></i><b>3.2.6</b> Standardization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mean-comparison.html"><a href="mean-comparison.html"><i class="fa fa-check"></i><b>4</b> Mean Comparison</a>
<ul>
<li class="chapter" data-level="4.1" data-path="mean-comparison.html"><a href="mean-comparison.html#application-1"><i class="fa fa-check"></i><b>4.1</b> Application</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="mean-comparison.html"><a href="mean-comparison.html#data-preparation"><i class="fa fa-check"></i><b>4.1.1</b> Data Preparation</a></li>
<li class="chapter" data-level="4.1.2" data-path="mean-comparison.html"><a href="mean-comparison.html#grouped-mean"><i class="fa fa-check"></i><b>4.1.2</b> Grouped Mean</a></li>
<li class="chapter" data-level="4.1.3" data-path="mean-comparison.html"><a href="mean-comparison.html#furious-with-factors"><i class="fa fa-check"></i><b>4.1.3</b> Furious with Factors</a></li>
<li class="chapter" data-level="4.1.4" data-path="mean-comparison.html"><a href="mean-comparison.html#plot-with-confidence"><i class="fa fa-check"></i><b>4.1.4</b> Plot with Confidence</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="mean-comparison.html"><a href="mean-comparison.html#students-t-test"><i class="fa fa-check"></i><b>4.2</b> Student's t-test</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="mean-comparison.html"><a href="mean-comparison.html#independent-t-test"><i class="fa fa-check"></i><b>4.2.1</b> Independent t-test</a></li>
<li class="chapter" data-level="4.2.2" data-path="mean-comparison.html"><a href="mean-comparison.html#dependent-t-test"><i class="fa fa-check"></i><b>4.2.2</b> Dependent t-test</a></li>
<li class="chapter" data-level="4.2.3" data-path="mean-comparison.html"><a href="mean-comparison.html#one-sample-t-test"><i class="fa fa-check"></i><b>4.2.3</b> One sample t-test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="panel-data.html"><a href="panel-data.html"><i class="fa fa-check"></i><b>5</b> Panel Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="panel-data.html"><a href="panel-data.html#types-of-data-1"><i class="fa fa-check"></i><b>5.1</b> Types of Data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="panel-data.html"><a href="panel-data.html#cross-section"><i class="fa fa-check"></i><b>5.1.1</b> Cross-section</a></li>
<li class="chapter" data-level="5.1.2" data-path="panel-data.html"><a href="panel-data.html#repeated-cross-section"><i class="fa fa-check"></i><b>5.1.2</b> Repeated cross-section</a></li>
<li class="chapter" data-level="5.1.3" data-path="panel-data.html"><a href="panel-data.html#time-series"><i class="fa fa-check"></i><b>5.1.3</b> Time series</a></li>
<li class="chapter" data-level="5.1.4" data-path="panel-data.html"><a href="panel-data.html#panel-data-1"><i class="fa fa-check"></i><b>5.1.4</b> Panel data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="panel-data.html"><a href="panel-data.html#unemployment"><i class="fa fa-check"></i><b>5.2</b> Unemployment</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="panel-data.html"><a href="panel-data.html#on-decline-in-germany"><i class="fa fa-check"></i><b>5.2.1</b> On decline in Germany</a></li>
<li class="chapter" data-level="5.2.2" data-path="panel-data.html"><a href="panel-data.html#measurement"><i class="fa fa-check"></i><b>5.2.2</b> Measurement</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="panel-data.html"><a href="panel-data.html#application-2"><i class="fa fa-check"></i><b>5.3</b> Application</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="panel-data.html"><a href="panel-data.html#data-inspection"><i class="fa fa-check"></i><b>5.3.1</b> Data Inspection</a></li>
<li class="chapter" data-level="5.3.2" data-path="panel-data.html"><a href="panel-data.html#data-preparation-1"><i class="fa fa-check"></i><b>5.3.2</b> Data Preparation</a></li>
<li class="chapter" data-level="5.3.3" data-path="panel-data.html"><a href="panel-data.html#data-visualization"><i class="fa fa-check"></i><b>5.3.3</b> Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="panel-data.html"><a href="panel-data.html#panel-studies"><i class="fa fa-check"></i><b>5.4</b> Panel Studies</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-scraping.html"><a href="data-scraping.html"><i class="fa fa-check"></i><b>6</b> Data Scraping</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-scraping.html"><a href="data-scraping.html#most-expensive-paintings"><i class="fa fa-check"></i><b>6.1</b> Most expensive paintings</a></li>
<li class="chapter" data-level="6.2" data-path="data-scraping.html"><a href="data-scraping.html#student-numbers-at-viadrina"><i class="fa fa-check"></i><b>6.2</b> Student numbers at Viadrina</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data-scraping.html"><a href="data-scraping.html#pdf-scraping"><i class="fa fa-check"></i><b>6.2.1</b> PDF scraping</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-scraping.html"><a href="data-scraping.html#share-of-female-students"><i class="fa fa-check"></i><b>6.2.2</b> Share of female students</a></li>
<li class="chapter" data-level="6.2.3" data-path="data-scraping.html"><a href="data-scraping.html#share-of-foreign-students"><i class="fa fa-check"></i><b>6.2.3</b> Share of foreign students</a></li>
<li class="chapter" data-level="6.2.4" data-path="data-scraping.html"><a href="data-scraping.html#web-scraping"><i class="fa fa-check"></i><b>6.2.4</b> Web scraping</a></li>
<li class="chapter" data-level="6.2.5" data-path="data-scraping.html"><a href="data-scraping.html#most-recent-student-numbers"><i class="fa fa-check"></i><b>6.2.5</b> Most recent student numbers</a></li>
<li class="chapter" data-level="6.2.6" data-path="data-scraping.html"><a href="data-scraping.html#the-long-run-trend"><i class="fa fa-check"></i><b>6.2.6</b> The long run trend</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>7</b> Text Mining</a>
<ul>
<li class="chapter" data-level="7.1" data-path="text-mining.html"><a href="text-mining.html#wikipedia"><i class="fa fa-check"></i><b>7.1</b> Wikipedia</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="text-mining.html"><a href="text-mining.html#cleaning"><i class="fa fa-check"></i><b>7.1.1</b> Cleaning</a></li>
<li class="chapter" data-level="7.1.2" data-path="text-mining.html"><a href="text-mining.html#tidytext-format"><i class="fa fa-check"></i><b>7.1.2</b> Tidytext Format</a></li>
<li class="chapter" data-level="7.1.3" data-path="text-mining.html"><a href="text-mining.html#stopwords"><i class="fa fa-check"></i><b>7.1.3</b> Stopwords</a></li>
<li class="chapter" data-level="7.1.4" data-path="text-mining.html"><a href="text-mining.html#term-frequency"><i class="fa fa-check"></i><b>7.1.4</b> Term Frequency</a></li>
<li class="chapter" data-level="7.1.5" data-path="text-mining.html"><a href="text-mining.html#little-bit-of-scraping"><i class="fa fa-check"></i><b>7.1.5</b> Little bit of Scraping</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="text-mining.html"><a href="text-mining.html#field-trip-to-berlin"><i class="fa fa-check"></i><b>7.2</b> Field Trip to Berlin</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="text-mining.html"><a href="text-mining.html#text-preparation"><i class="fa fa-check"></i><b>7.2.1</b> Text Preparation</a></li>
<li class="chapter" data-level="7.2.2" data-path="text-mining.html"><a href="text-mining.html#sentiment-analysis"><i class="fa fa-check"></i><b>7.2.2</b> Sentiment Analysis</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Models</b></span></li>
<li class="chapter" data-level="8" data-path="relationships.html"><a href="relationships.html"><i class="fa fa-check"></i><b>8</b> Relationships</a>
<ul>
<li class="chapter" data-level="8.1" data-path="relationships.html"><a href="relationships.html#variance"><i class="fa fa-check"></i><b>8.1</b> Variance</a></li>
<li class="chapter" data-level="8.2" data-path="relationships.html"><a href="relationships.html#covariance"><i class="fa fa-check"></i><b>8.2</b> Covariance</a></li>
<li class="chapter" data-level="8.3" data-path="relationships.html"><a href="relationships.html#correlation"><i class="fa fa-check"></i><b>8.3</b> Correlation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>9</b> Regression</a>
<ul>
<li class="chapter" data-level="9.1" data-path="regression.html"><a href="regression.html#old-but-gold"><i class="fa fa-check"></i><b>9.1</b> Old but Gold</a></li>
<li class="chapter" data-level="9.2" data-path="regression.html"><a href="regression.html#data-is-everywhere-1"><i class="fa fa-check"></i><b>9.2</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="regression.html"><a href="regression.html#data-in-a-table"><i class="fa fa-check"></i><b>9.2.1</b> Data in a table</a></li>
<li class="chapter" data-level="9.2.2" data-path="regression.html"><a href="regression.html#data-in-a-graph"><i class="fa fa-check"></i><b>9.2.2</b> Data in a graph</a></li>
<li class="chapter" data-level="9.2.3" data-path="regression.html"><a href="regression.html#the-trend"><i class="fa fa-check"></i><b>9.2.3</b> The trend</a></li>
<li class="chapter" data-level="9.2.4" data-path="regression.html"><a href="regression.html#the-blackbox"><i class="fa fa-check"></i><b>9.2.4</b> The blackbox</a></li>
<li class="chapter" data-level="9.2.5" data-path="regression.html"><a href="regression.html#nobodys-perfect"><i class="fa fa-check"></i><b>9.2.5</b> Nobody's perfect</a></li>
<li class="chapter" data-level="9.2.6" data-path="regression.html"><a href="regression.html#vocab-wrap-up"><i class="fa fa-check"></i><b>9.2.6</b> Vocab Wrap-Up</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regression.html"><a href="regression.html#for-the-truly-dedicated"><i class="fa fa-check"></i><b>9.3</b> For the truly dedicated</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="regression.html"><a href="regression.html#algebra"><i class="fa fa-check"></i><b>9.3.1</b> Algebra</a></li>
<li class="chapter" data-level="9.3.2" data-path="regression.html"><a href="regression.html#analysis"><i class="fa fa-check"></i><b>9.3.2</b> Analysis</a></li>
<li class="chapter" data-level="9.3.3" data-path="regression.html"><a href="regression.html#take-the-long-way-home"><i class="fa fa-check"></i><b>9.3.3</b> Take the Long Way Home</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression.html"><a href="regression.html#survival-of-the-fittest-line"><i class="fa fa-check"></i><b>9.4</b> Survival of the Fittest Line</a></li>
<li class="chapter" data-level="9.5" data-path="regression.html"><a href="regression.html#on-the-shoulders-of-giants"><i class="fa fa-check"></i><b>9.5</b> On the Shoulders of Giants</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>10</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="10.1" data-path="linear-regression.html"><a href="linear-regression.html#what-you-deserve-is-what-you-get"><i class="fa fa-check"></i><b>10.1</b> What You Deserve Is What You Get</a></li>
<li class="chapter" data-level="10.2" data-path="linear-regression.html"><a href="linear-regression.html#data-sample"><i class="fa fa-check"></i><b>10.2</b> Data &amp; Sample</a></li>
<li class="chapter" data-level="10.3" data-path="linear-regression.html"><a href="linear-regression.html#data-visualization-1"><i class="fa fa-check"></i><b>10.3</b> Data Visualization</a></li>
<li class="chapter" data-level="10.4" data-path="linear-regression.html"><a href="linear-regression.html#simplest-regression"><i class="fa fa-check"></i><b>10.4</b> Simplest Regression</a></li>
<li class="chapter" data-level="10.5" data-path="linear-regression.html"><a href="linear-regression.html#simple-regression"><i class="fa fa-check"></i><b>10.5</b> Simple Regression</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="linear-regression.html"><a href="linear-regression.html#x-is-continuous"><i class="fa fa-check"></i><b>10.5.1</b> X is continuous</a></li>
<li class="chapter" data-level="10.5.2" data-path="linear-regression.html"><a href="linear-regression.html#x-is-a-dummy"><i class="fa fa-check"></i><b>10.5.2</b> X is a dummy</a></li>
<li class="chapter" data-level="10.5.3" data-path="linear-regression.html"><a href="linear-regression.html#x-is-categorical"><i class="fa fa-check"></i><b>10.5.3</b> X is categorical</a></li>
<li class="chapter" data-level="10.5.4" data-path="linear-regression.html"><a href="linear-regression.html#x-is-categorical-is-it"><i class="fa fa-check"></i><b>10.5.4</b> X is categorical, is it?</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="linear-regression.html"><a href="linear-regression.html#parallel-slopes"><i class="fa fa-check"></i><b>10.6</b> Parallel Slopes</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="linear-regression.html"><a href="linear-regression.html#x-is-continuous-dummy"><i class="fa fa-check"></i><b>10.6.1</b> X is continuous + dummy</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="linear-regression.html"><a href="linear-regression.html#model-comparison"><i class="fa fa-check"></i><b>10.7</b> Model Comparison</a></li>
<li class="chapter" data-level="10.8" data-path="linear-regression.html"><a href="linear-regression.html#future"><i class="fa fa-check"></i><b>10.8</b> Future</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="interaction-models.html"><a href="interaction-models.html"><i class="fa fa-check"></i><b>11</b> Interaction Models</a>
<ul>
<li class="chapter" data-level="11.1" data-path="interaction-models.html"><a href="interaction-models.html#motivation"><i class="fa fa-check"></i><b>11.1</b> Motivation</a></li>
<li class="chapter" data-level="11.2" data-path="interaction-models.html"><a href="interaction-models.html#load-and-merge"><i class="fa fa-check"></i><b>11.2</b> Load and Merge</a></li>
<li class="chapter" data-level="11.3" data-path="interaction-models.html"><a href="interaction-models.html#data-manipulation"><i class="fa fa-check"></i><b>11.3</b> Data Manipulation</a></li>
<li class="chapter" data-level="11.4" data-path="interaction-models.html"><a href="interaction-models.html#simple-linear-model"><i class="fa fa-check"></i><b>11.4</b> Simple linear model</a></li>
<li class="chapter" data-level="11.5" data-path="interaction-models.html"><a href="interaction-models.html#multiple-regression-with-control"><i class="fa fa-check"></i><b>11.5</b> Multiple regression with control</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="interaction-models.html"><a href="interaction-models.html#regression-model"><i class="fa fa-check"></i><b>11.5.1</b> Regression model</a></li>
<li class="chapter" data-level="11.5.2" data-path="interaction-models.html"><a href="interaction-models.html#visualization-parallel-slopes"><i class="fa fa-check"></i><b>11.5.2</b> Visualization (parallel slopes)</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="interaction-models.html"><a href="interaction-models.html#multiple-regression-with-moderator"><i class="fa fa-check"></i><b>11.6</b> Multiple regression with moderator</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="interaction-models.html"><a href="interaction-models.html#interaction-dummy-dummy"><i class="fa fa-check"></i><b>11.6.1</b> Interaction (dummy * dummy)</a></li>
<li class="chapter" data-level="11.6.2" data-path="interaction-models.html"><a href="interaction-models.html#interaction-categorical-dummy"><i class="fa fa-check"></i><b>11.6.2</b> Interaction (categorical * dummy)</a></li>
<li class="chapter" data-level="11.6.3" data-path="interaction-models.html"><a href="interaction-models.html#interaction-continuous-dummy"><i class="fa fa-check"></i><b>11.6.3</b> Interaction (continuous * dummy)</a></li>
<li class="chapter" data-level="11.6.4" data-path="interaction-models.html"><a href="interaction-models.html#visualization-non-parallel-slopes"><i class="fa fa-check"></i><b>11.6.4</b> Visualization (non-parallel slopes)</a></li>
<li class="chapter" data-level="11.6.5" data-path="interaction-models.html"><a href="interaction-models.html#interaction-continuous-continuous"><i class="fa fa-check"></i><b>11.6.5</b> Interaction (continuous * continuous)</a></li>
<li class="chapter" data-level="11.6.6" data-path="interaction-models.html"><a href="interaction-models.html#visualization-non-parallel-slopes-1"><i class="fa fa-check"></i><b>11.6.6</b> Visualization (non-parallel slopes)</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="interaction-models.html"><a href="interaction-models.html#marginal-effects"><i class="fa fa-check"></i><b>11.7</b> Marginal Effects</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="interaction-models.html"><a href="interaction-models.html#marginal-effects-at-representatives-task"><i class="fa fa-check"></i><b>11.7.1</b> Marginal effects at representatives (TASK)</a></li>
<li class="chapter" data-level="11.7.2" data-path="interaction-models.html"><a href="interaction-models.html#marginal-effects-at-the-mean-task"><i class="fa fa-check"></i><b>11.7.2</b> Marginal effects at the mean (TASK)</a></li>
<li class="chapter" data-level="11.7.3" data-path="interaction-models.html"><a href="interaction-models.html#average-marginal-effects"><i class="fa fa-check"></i><b>11.7.3</b> Average marginal effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>12</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="12.1" data-path="logistic-regression.html"><a href="logistic-regression.html#think-inside-the-box"><i class="fa fa-check"></i><b>12.1</b> Think inside the box</a></li>
<li class="chapter" data-level="12.2" data-path="logistic-regression.html"><a href="logistic-regression.html#from-probability-to-odds"><i class="fa fa-check"></i><b>12.2</b> From probability to odds</a></li>
<li class="chapter" data-level="12.3" data-path="logistic-regression.html"><a href="logistic-regression.html#from-odds-to-log-of-odds"><i class="fa fa-check"></i><b>12.3</b> From odds to log of odds</a></li>
<li class="chapter" data-level="12.4" data-path="logistic-regression.html"><a href="logistic-regression.html#titanic-survival"><i class="fa fa-check"></i><b>12.4</b> Titanic Survival</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="logistic-regression.html"><a href="logistic-regression.html#the-data"><i class="fa fa-check"></i><b>12.4.1</b> The Data</a></li>
<li class="chapter" data-level="12.4.2" data-path="logistic-regression.html"><a href="logistic-regression.html#no-predictor-variables"><i class="fa fa-check"></i><b>12.4.2</b> No Predictor Variables</a></li>
<li class="chapter" data-level="12.4.3" data-path="logistic-regression.html"><a href="logistic-regression.html#single-dichotomous-predictor"><i class="fa fa-check"></i><b>12.4.3</b> Single Dichotomous Predictor</a></li>
<li class="chapter" data-level="12.4.4" data-path="logistic-regression.html"><a href="logistic-regression.html#effect-plot"><i class="fa fa-check"></i><b>12.4.4</b> Effect plot</a></li>
<li class="chapter" data-level="12.4.5" data-path="logistic-regression.html"><a href="logistic-regression.html#chi-square"><i class="fa fa-check"></i><b>12.4.5</b> Chi Square</a></li>
<li class="chapter" data-level="12.4.6" data-path="logistic-regression.html"><a href="logistic-regression.html#some-are-more-equal-than-others"><i class="fa fa-check"></i><b>12.4.6</b> Some Are More Equal Than Others</a></li>
<li class="chapter" data-level="12.4.7" data-path="logistic-regression.html"><a href="logistic-regression.html#the-cheaper-the-deader"><i class="fa fa-check"></i><b>12.4.7</b> The Cheaper The Deader?</a></li>
<li class="chapter" data-level="12.4.8" data-path="logistic-regression.html"><a href="logistic-regression.html#the-bigger-picture"><i class="fa fa-check"></i><b>12.4.8</b> The Bigger Picture</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="fixed-effects.html"><a href="fixed-effects.html"><i class="fa fa-check"></i><b>13</b> Fixed effects</a>
<ul>
<li class="chapter" data-level="13.1" data-path="fixed-effects.html"><a href="fixed-effects.html#cross-sectional-data-2-pt"><i class="fa fa-check"></i><b>13.1</b> Cross-sectional Data (2 pt)</a></li>
<li class="chapter" data-level="13.2" data-path="fixed-effects.html"><a href="fixed-effects.html#panel-data-2-pt"><i class="fa fa-check"></i><b>13.2</b> Panel Data (2 pt)</a></li>
<li class="chapter" data-level="13.3" data-path="fixed-effects.html"><a href="fixed-effects.html#fixed-effects-regression"><i class="fa fa-check"></i><b>13.3</b> Fixed Effects Regression</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="fixed-effects.html"><a href="fixed-effects.html#first-difference-2-pt"><i class="fa fa-check"></i><b>13.3.1</b> First Difference (2 pt)</a></li>
<li class="chapter" data-level="13.3.2" data-path="fixed-effects.html"><a href="fixed-effects.html#within-estimator-2-pt"><i class="fa fa-check"></i><b>13.3.2</b> Within Estimator (2 pt)</a></li>
<li class="chapter" data-level="13.3.3" data-path="fixed-effects.html"><a href="fixed-effects.html#lsdv-1-pt"><i class="fa fa-check"></i><b>13.3.3</b> LSDV (1 pt)</a></li>
<li class="chapter" data-level="13.3.4" data-path="fixed-effects.html"><a href="fixed-effects.html#comparison-1-pt"><i class="fa fa-check"></i><b>13.3.4</b> Comparison (1 pt)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html"><i class="fa fa-check"></i><b>14</b> Software is everywhere</a>
<ul>
<li class="chapter" data-level="14.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#software"><i class="fa fa-check"></i><b>14.1</b> Software</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#command-line-interface-cli"><i class="fa fa-check"></i><b>14.1.1</b> Command line interface (CLI)</a></li>
<li class="chapter" data-level="14.1.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#graphical-user-interface-gui"><i class="fa fa-check"></i><b>14.1.2</b> Graphical user interface (GUI)</a></li>
<li class="chapter" data-level="14.1.3" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#integrated-development-environment-ide"><i class="fa fa-check"></i><b>14.1.3</b> Integrated development environment (IDE)</a></li>
<li class="chapter" data-level="14.1.4" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#online-compiler"><i class="fa fa-check"></i><b>14.1.4</b> Online Compiler</a></li>
<li class="chapter" data-level="14.1.5" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#cloud-solutions"><i class="fa fa-check"></i><b>14.1.5</b> Cloud solutions</a></li>
<li class="chapter" data-level="14.1.6" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#dashboards"><i class="fa fa-check"></i><b>14.1.6</b> Dashboards</a></li>
<li class="chapter" data-level="14.1.7" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#shiny-apps"><i class="fa fa-check"></i><b>14.1.7</b> Shiny Apps</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#file-formats"><i class="fa fa-check"></i><b>14.2</b> File formats</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#text-files"><i class="fa fa-check"></i><b>14.2.1</b> Text files</a></li>
<li class="chapter" data-level="14.2.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#text-with-structure"><i class="fa fa-check"></i><b>14.2.2</b> Text with structure</a></li>
<li class="chapter" data-level="14.2.3" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#file-formats-1"><i class="fa fa-check"></i><b>14.2.3</b> File formats</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="14.3" data-path="references.html"><a href="references.html#resources"><i class="fa fa-check"></i><b>14.3</b> Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://marco-kuehne.com/" target="blank">Visit my personal page</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Becoming Fluent in Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<br>
<div class = infobox>
This book is <b>Work in Progress</b>. I appreciate your feedback to make the book better.
</div>
<div id="interaction-models" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Chapter 11</span> Interaction Models<a href="interaction-models.html#interaction-models" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="motivation" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Motivation<a href="interaction-models.html#motivation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- https://www.researchgate.net/post/Is_there_any_different_between_control_variable_and_moderating_variable2 -->
<!-- In many contexts, the effect of one variable on another might be allowed to vary. For example, the relationship between income and mortality is nonlinear, so the effect of an additional dollar of income on mortality is different for someone earning \$20,000/year than for someone earning $100,000/year. Or maybe the relationship between income and mortality differs depending on how many years of education you have. A marginal effects plot displays the effect of X on Y for different values of Z (or X).  -->
<!-- The plot will often include confidence intervals as well. The same code will often work if there's not an explicit interaction, but you are, for example, estimating a logit model where the effect of one variable changes with the values of the others. -->
<!-- - Interactions often have poor statistical power, and you will generally need a lot of observations to tell if the effect of X on Y is different for two given different values of Z. -->
<!-- - Make sure your graph has clearly labeled axes, so readers can tell whether your y-axis is the predicted value of Y or the marginal effect of X on Y. -->
<!-- https://www.spss-tutorials.com/spss-regression-with-moderation-interaction-effect/ -->
<p>A sports doctor routinely measures the muscle percentages of his clients. He also asks them how many hours per week they typically spend on training. Our doctor suspects that clients who train more are also more muscled. Furthermore, he thinks that the effect of training on muscularity declines with age. In multiple regression analysis, this is known as a <strong>moderation or interaction effect</strong>. The figure below illustrates it.</p>
<center>
<p><img src="moderation-interaction-in-regression-diagram.png" /></p>
</center>
<div class="infobox2 information">
<p>Imagine a 35 year old student and a 49 year old professor who work out at McFit (Lenne Passage). They exercise exactly the same amount of time per week (3 day split), the same exercises (McFit usually provides multiple identical machines next to each other), the same time of the day, they take the nutritional supplements, etc. etc. everything else is constant. Do you think they will experience different results in terms of muscle gains?</p>
</div>
<p>In mathematical terms the interaction is a multiplication:</p>
<p><span class="math display">\[ muscle = training + age + training*age  \]</span></p>
</div>
<div id="load-and-merge" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Load and Merge<a href="interaction-models.html#load-and-merge" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We analyze the details of the weight-height relationship.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="interaction-models.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb115-2"><a href="interaction-models.html#cb115-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a href="interaction-models.html#cb115-3" aria-hidden="true" tabindex="-1"></a>pequiv <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;./SOEPteaching/pequiv.dta&quot;</span>, <span class="at">col_select =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>, <span class="st">&quot;syear&quot;</span>, <span class="st">&quot;d11101&quot;</span>, <span class="st">&quot;d11102ll&quot;</span>, <span class="st">&quot;l11102&quot;</span>, <span class="st">&quot;d11104&quot;</span>)) </span>
<span id="cb115-4"><a href="interaction-models.html#cb115-4" aria-hidden="true" tabindex="-1"></a>health <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;./SOEPteaching/health.dta&quot;</span>, <span class="at">col_select =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>, <span class="st">&quot;syear&quot;</span>, <span class="st">&quot;height&quot;</span>, <span class="st">&quot;weight&quot;</span>))</span>
<span id="cb115-5"><a href="interaction-models.html#cb115-5" aria-hidden="true" tabindex="-1"></a>pgen <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">&quot;./SOEPteaching/pgen.dta&quot;</span>, <span class="at">col_select =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>, <span class="st">&quot;syear&quot;</span>, <span class="st">&quot;pgnace&quot;</span>,  <span class="st">&quot;pgnace2&quot;</span>))</span>
<span id="cb115-6"><a href="interaction-models.html#cb115-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-7"><a href="interaction-models.html#cb115-7" aria-hidden="true" tabindex="-1"></a>master <span class="ot">&lt;-</span> <span class="fu">merge</span>(pequiv, health, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>, <span class="st">&quot;syear&quot;</span>))</span>
<span id="cb115-8"><a href="interaction-models.html#cb115-8" aria-hidden="true" tabindex="-1"></a>master <span class="ot">&lt;-</span> <span class="fu">merge</span>(master, pgen, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;pid&quot;</span>, <span class="st">&quot;syear&quot;</span>))</span></code></pre></div>
</div>
<div id="data-manipulation" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> Data Manipulation<a href="interaction-models.html#data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Drop Stata labels, rename the variables, and create factor variables.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="interaction-models.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjlabelled)</span>
<span id="cb116-2"><a href="interaction-models.html#cb116-2" aria-hidden="true" tabindex="-1"></a>soep <span class="ot">&lt;-</span> <span class="fu">remove_all_labels</span>(master)</span>
<span id="cb116-3"><a href="interaction-models.html#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="interaction-models.html#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb116-5"><a href="interaction-models.html#cb116-5" aria-hidden="true" tabindex="-1"></a>soep <span class="ot">&lt;-</span> soep <span class="sc">%&gt;%</span></span>
<span id="cb116-6"><a href="interaction-models.html#cb116-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">region =</span> l11102,</span>
<span id="cb116-7"><a href="interaction-models.html#cb116-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">marital =</span> d11104,</span>
<span id="cb116-8"><a href="interaction-models.html#cb116-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> d11101,</span>
<span id="cb116-9"><a href="interaction-models.html#cb116-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">gender =</span> d11102ll) <span class="sc">%&gt;%</span></span>
<span id="cb116-10"><a href="interaction-models.html#cb116-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(height <span class="sc">&gt;</span> <span class="dv">0</span>, weight <span class="sc">&gt;</span> <span class="dv">0</span>, marital <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb116-11"><a href="interaction-models.html#cb116-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marital =</span> <span class="fu">factor</span>(marital, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)), </span>
<span id="cb116-12"><a href="interaction-models.html#cb116-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">region =</span> <span class="fu">factor</span>(region, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb116-13"><a href="interaction-models.html#cb116-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">gender =</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)))</span>
<span id="cb116-14"><a href="interaction-models.html#cb116-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-15"><a href="interaction-models.html#cb116-15" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(soep<span class="sc">$</span>marital) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;married&quot;</span>, <span class="st">&quot;single&quot;</span>, <span class="st">&quot;widowed&quot;</span>, <span class="st">&quot;divorced&quot;</span>, <span class="st">&quot;separated&quot;</span>) </span>
<span id="cb116-16"><a href="interaction-models.html#cb116-16" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(soep<span class="sc">$</span>region) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;west&quot;</span>, <span class="st">&quot;east&quot;</span>)</span>
<span id="cb116-17"><a href="interaction-models.html#cb116-17" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(soep<span class="sc">$</span>gender) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<!-- Real data -->
<p>Inspect the data (check for missings and outliers):</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="interaction-models.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb117-2"><a href="interaction-models.html#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl_summary</span>(soep[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)])</span></code></pre></div>
<div id="wmbjdrtjbq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wmbjdrtjbq .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wmbjdrtjbq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wmbjdrtjbq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wmbjdrtjbq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wmbjdrtjbq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wmbjdrtjbq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wmbjdrtjbq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wmbjdrtjbq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wmbjdrtjbq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wmbjdrtjbq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wmbjdrtjbq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wmbjdrtjbq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wmbjdrtjbq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wmbjdrtjbq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wmbjdrtjbq .gt_from_md > :first-child {
  margin-top: 0;
}

#wmbjdrtjbq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wmbjdrtjbq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wmbjdrtjbq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wmbjdrtjbq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wmbjdrtjbq .gt_row_group_first td {
  border-top-width: 2px;
}

#wmbjdrtjbq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wmbjdrtjbq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wmbjdrtjbq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wmbjdrtjbq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wmbjdrtjbq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wmbjdrtjbq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wmbjdrtjbq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wmbjdrtjbq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wmbjdrtjbq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wmbjdrtjbq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wmbjdrtjbq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wmbjdrtjbq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wmbjdrtjbq .gt_left {
  text-align: left;
}

#wmbjdrtjbq .gt_center {
  text-align: center;
}

#wmbjdrtjbq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wmbjdrtjbq .gt_font_normal {
  font-weight: normal;
}

#wmbjdrtjbq .gt_font_bold {
  font-weight: bold;
}

#wmbjdrtjbq .gt_font_italic {
  font-style: italic;
}

#wmbjdrtjbq .gt_super {
  font-size: 65%;
}

#wmbjdrtjbq .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#wmbjdrtjbq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wmbjdrtjbq .gt_indent_1 {
  text-indent: 5px;
}

#wmbjdrtjbq .gt_indent_2 {
  text-indent: 10px;
}

#wmbjdrtjbq .gt_indent_3 {
  text-indent: 15px;
}

#wmbjdrtjbq .gt_indent_4 {
  text-indent: 20px;
}

#wmbjdrtjbq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;N = 103,950&lt;/strong&gt;&lt;sup class=&quot;gt_footnote_marks&quot;&gt;1&lt;/sup&gt;"><strong>N = 103,950</strong><sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">gender</td>
<td headers="stat_0" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    male</td>
<td headers="stat_0" class="gt_row gt_center">49,646 (48%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    female</td>
<td headers="stat_0" class="gt_row gt_center">54,304 (52%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">age</td>
<td headers="stat_0" class="gt_row gt_center">47 (35, 62)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">marital</td>
<td headers="stat_0" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    married</td>
<td headers="stat_0" class="gt_row gt_center">61,332 (59%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    single</td>
<td headers="stat_0" class="gt_row gt_center">25,921 (25%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    widowed</td>
<td headers="stat_0" class="gt_row gt_center">6,205 (6.0%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    divorced</td>
<td headers="stat_0" class="gt_row gt_center">8,010 (7.7%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    separated</td>
<td headers="stat_0" class="gt_row gt_center">2,482 (2.4%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">region</td>
<td headers="stat_0" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    west</td>
<td headers="stat_0" class="gt_row gt_center">80,387 (77%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    east</td>
<td headers="stat_0" class="gt_row gt_center">23,563 (23%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">height</td>
<td headers="stat_0" class="gt_row gt_center">171 (165, 178)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">weight</td>
<td headers="stat_0" class="gt_row gt_center">75 (65, 86)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">pgnace</td>
<td headers="stat_0" class="gt_row gt_center">15 (-2, 64)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">pgnace2</td>
<td headers="stat_0" class="gt_row gt_center">-2 (-2, -2)</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="2"><sup class="gt_footnote_marks">1</sup> n (%); Median (IQR)</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="simple-linear-model" class="section level2 hasAnchor" number="11.4">
<h2><span class="header-section-number">11.4</span> Simple linear model<a href="interaction-models.html#simple-linear-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You learned that simple regression is almost identical to correlation between two variables.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="interaction-models.html#cb118-1" aria-hidden="true" tabindex="-1"></a>simple <span class="ot">&lt;-</span> <span class="fu">lm</span>(weight <span class="sc">~</span> height, <span class="at">data=</span>soep)</span>
<span id="cb118-2"><a href="interaction-models.html#cb118-2" aria-hidden="true" tabindex="-1"></a>simple</span>
<span id="cb118-3"><a href="interaction-models.html#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb118-4"><a href="interaction-models.html#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb118-5"><a href="interaction-models.html#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; lm(formula = weight ~ height, data = soep)</span></span>
<span id="cb118-6"><a href="interaction-models.html#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb118-7"><a href="interaction-models.html#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb118-8"><a href="interaction-models.html#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (Intercept)       height  </span></span>
<span id="cb118-9"><a href="interaction-models.html#cb118-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    -78.4362       0.9034</span></span></code></pre></div>
</div>
<div id="multiple-regression-with-control" class="section level2 hasAnchor" number="11.5">
<h2><span class="header-section-number">11.5</span> Multiple regression with control<a href="interaction-models.html#multiple-regression-with-control" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="regression-model" class="section level3 hasAnchor" number="11.5.1">
<h3><span class="header-section-number">11.5.1</span> Regression model<a href="interaction-models.html#regression-model" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here comes multiple regression. We have seen this before:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="interaction-models.html#cb119-1" aria-hidden="true" tabindex="-1"></a>multiple <span class="ot">&lt;-</span> <span class="fu">lm</span>(weight <span class="sc">~</span> height <span class="sc">+</span> gender, <span class="at">data=</span>soep)</span>
<span id="cb119-2"><a href="interaction-models.html#cb119-2" aria-hidden="true" tabindex="-1"></a>multiple</span>
<span id="cb119-3"><a href="interaction-models.html#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb119-4"><a href="interaction-models.html#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb119-5"><a href="interaction-models.html#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; lm(formula = weight ~ height + gender, data = soep)</span></span>
<span id="cb119-6"><a href="interaction-models.html#cb119-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb119-7"><a href="interaction-models.html#cb119-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb119-8"><a href="interaction-models.html#cb119-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  (Intercept)        height  genderfemale  </span></span>
<span id="cb119-9"><a href="interaction-models.html#cb119-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      -37.567         0.684        -6.188</span></span></code></pre></div>
</div>
<div id="visualization-parallel-slopes" class="section level3 hasAnchor" number="11.5.2">
<h3><span class="header-section-number">11.5.2</span> Visualization (parallel slopes)<a href="interaction-models.html#visualization-parallel-slopes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have seen parallel slopes before:</p>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-185-1.png" width="576" /></p>
<div class="infobox2 information">
<p>Conclusion: The <strong>fundamental truth</strong> is that the effect of body height on body weight is identical across gender (i.e. for males and females). Males and female are equipped (by nature) with a different starting body weight on average.</p>
</div>
</div>
</div>
<div id="multiple-regression-with-moderator" class="section level2 hasAnchor" number="11.6">
<h2><span class="header-section-number">11.6</span> Multiple regression with moderator<a href="interaction-models.html#multiple-regression-with-moderator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="interaction-dummy-dummy" class="section level3 hasAnchor" number="11.6.1">
<h3><span class="header-section-number">11.6.1</span> Interaction (dummy * dummy)<a href="interaction-models.html#interaction-dummy-dummy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- https://www.theanalysisfactor.com/interaction-dummy-variables-in-linear-regression/ -->
<!-- https://cran.r-project.org/web/packages/interactions/vignettes/interactions.html -->
<!-- Categorical by categorical interactions: All the tools described here require at least one variable to be continuous. A separate vignette describes cat_plot, which handles the plotting of interactions in which all the focal predictors are categorical variables. -->
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="interaction-models.html#cb120-1" aria-hidden="true" tabindex="-1"></a>interact0a <span class="ot">&lt;-</span> <span class="fu">lm</span>(weight <span class="sc">~</span> region<span class="sc">*</span>gender, <span class="at">data=</span>soep)</span>
<span id="cb120-2"><a href="interaction-models.html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(interact0a)</span>
<span id="cb120-3"><a href="interaction-models.html#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb120-4"><a href="interaction-models.html#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb120-5"><a href="interaction-models.html#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; lm(formula = weight ~ region * gender, data = soep)</span></span>
<span id="cb120-6"><a href="interaction-models.html#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb120-7"><a href="interaction-models.html#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Residuals:</span></span>
<span id="cb120-8"><a href="interaction-models.html#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span id="cb120-9"><a href="interaction-models.html#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -54.401  -9.987  -2.183   7.599 165.599 </span></span>
<span id="cb120-10"><a href="interaction-models.html#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb120-11"><a href="interaction-models.html#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb120-12"><a href="interaction-models.html#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          Estimate Std. Error  t value             Pr(&gt;|t|)    </span></span>
<span id="cb120-13"><a href="interaction-models.html#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (Intercept)              84.40098    0.07542 1119.145 &lt; 0.0000000000000002 ***</span></span>
<span id="cb120-14"><a href="interaction-models.html#cb120-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; regioneast               -0.41388    0.15848   -2.612              0.00901 ** </span></span>
<span id="cb120-15"><a href="interaction-models.html#cb120-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; genderfemale            -15.21763    0.10435 -145.826 &lt; 0.0000000000000002 ***</span></span>
<span id="cb120-16"><a href="interaction-models.html#cb120-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; regioneast:genderfemale   1.50228    0.21919    6.854     0.00000000000724 ***</span></span>
<span id="cb120-17"><a href="interaction-models.html#cb120-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---</span></span>
<span id="cb120-18"><a href="interaction-models.html#cb120-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span></span>
<span id="cb120-19"><a href="interaction-models.html#cb120-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb120-20"><a href="interaction-models.html#cb120-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Residual standard error: 14.78 on 103946 degrees of freedom</span></span>
<span id="cb120-21"><a href="interaction-models.html#cb120-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Multiple R-squared:  0.2022, Adjusted R-squared:  0.2021 </span></span>
<span id="cb120-22"><a href="interaction-models.html#cb120-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F-statistic:  8780 on 3 and 103946 DF,  p-value: &lt; 0.00000000000000022</span></span></code></pre></div>
<p>First glimpse at the <code>margins</code> package.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="interaction-models.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(margins)</span>
<span id="cb121-2"><a href="interaction-models.html#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="co">#margins(interact0a)</span></span>
<span id="cb121-3"><a href="interaction-models.html#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">margins</span>(interact0a, <span class="at">at =</span> <span class="fu">list</span>(<span class="at">region =</span> <span class="fu">c</span>(<span class="st">&quot;west&quot;</span>, <span class="st">&quot;east&quot;</span>))))</span>
<span id="cb121-4"><a href="interaction-models.html#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        factor region      AME     SE         z      p    lower    upper</span></span>
<span id="cb121-5"><a href="interaction-models.html#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  genderfemale 1.0000 -15.2176 0.1044 -145.8260 0.0000 -15.4222 -15.0131</span></span>
<span id="cb121-6"><a href="interaction-models.html#cb121-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  genderfemale 2.0000 -13.7153 0.1928  -71.1532 0.0000 -14.0931 -13.3376</span></span>
<span id="cb121-7"><a href="interaction-models.html#cb121-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    regioneast 1.0000   0.3709 0.1095    3.3879 0.0007   0.1563   0.5855</span></span>
<span id="cb121-8"><a href="interaction-models.html#cb121-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    regioneast 2.0000   0.3709 0.1095    3.3879 0.0007   0.1563   0.5855</span></span></code></pre></div>
<p>Interaction plot from the <code>interactions</code> package.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="interaction-models.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dedicated package makes everything easier.</span></span>
<span id="cb122-2"><a href="interaction-models.html#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(interactions)</span>
<span id="cb122-3"><a href="interaction-models.html#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat_plot</span>(interact0a, <span class="at">pred =</span> gender, <span class="at">modx =</span> region)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-188-1.png" width="576" /></p>
</div>
<div id="interaction-categorical-dummy" class="section level3 hasAnchor" number="11.6.2">
<h3><span class="header-section-number">11.6.2</span> Interaction (categorical * dummy)<a href="interaction-models.html#interaction-categorical-dummy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="interaction-models.html#cb123-1" aria-hidden="true" tabindex="-1"></a>interact0b <span class="ot">&lt;-</span> <span class="fu">lm</span>(weight <span class="sc">~</span> marital<span class="sc">*</span>gender, <span class="at">data=</span>soep)</span>
<span id="cb123-2"><a href="interaction-models.html#cb123-2" aria-hidden="true" tabindex="-1"></a>interact0b</span>
<span id="cb123-3"><a href="interaction-models.html#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb123-4"><a href="interaction-models.html#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb123-5"><a href="interaction-models.html#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; lm(formula = weight ~ marital * gender, data = soep)</span></span>
<span id="cb123-6"><a href="interaction-models.html#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb123-7"><a href="interaction-models.html#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb123-8"><a href="interaction-models.html#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   (Intercept)                  maritalsingle  </span></span>
<span id="cb123-9"><a href="interaction-models.html#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                      85.92239                       -5.38961  </span></span>
<span id="cb123-10"><a href="interaction-models.html#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                maritalwidowed                maritaldivorced  </span></span>
<span id="cb123-11"><a href="interaction-models.html#cb123-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                      -4.34815                       -0.08313  </span></span>
<span id="cb123-12"><a href="interaction-models.html#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              maritalseparated                   genderfemale  </span></span>
<span id="cb123-13"><a href="interaction-models.html#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                      -1.25931                      -15.50285  </span></span>
<span id="cb123-14"><a href="interaction-models.html#cb123-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    maritalsingle:genderfemale    maritalwidowed:genderfemale  </span></span>
<span id="cb123-15"><a href="interaction-models.html#cb123-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                       0.77077                        4.85503  </span></span>
<span id="cb123-16"><a href="interaction-models.html#cb123-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  maritaldivorced:genderfemale  maritalseparated:genderfemale  </span></span>
<span id="cb123-17"><a href="interaction-models.html#cb123-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                       0.44475                        1.13259</span></span></code></pre></div>
</div>
<div id="interaction-continuous-dummy" class="section level3 hasAnchor" number="11.6.3">
<h3><span class="header-section-number">11.6.3</span> Interaction (continuous * dummy)<a href="interaction-models.html#interaction-continuous-dummy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- https://r4ds.had.co.nz/model-basics.html#interactions-continuous-and-categorical -->
<!-- https://moderndive.com/6-multiple-regression.html#model4interactiontable -->
<p>Note that R automatically adds main effects if you use multiplication operator:</p>
<p>Thus <span class="math display">\[ height * female \]</span></p>
<p>translates to</p>
<p><span class="math display">\[ height + female + height*female \]</span></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="interaction-models.html#cb124-1" aria-hidden="true" tabindex="-1"></a>interact1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(weight <span class="sc">~</span> height<span class="sc">*</span>gender, <span class="at">data=</span>soep)</span>
<span id="cb124-2"><a href="interaction-models.html#cb124-2" aria-hidden="true" tabindex="-1"></a>interact1</span>
<span id="cb124-3"><a href="interaction-models.html#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb124-4"><a href="interaction-models.html#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb124-5"><a href="interaction-models.html#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; lm(formula = weight ~ height * gender, data = soep)</span></span>
<span id="cb124-6"><a href="interaction-models.html#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb124-7"><a href="interaction-models.html#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb124-8"><a href="interaction-models.html#cb124-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         (Intercept)               height         genderfemale  </span></span>
<span id="cb124-9"><a href="interaction-models.html#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            -58.7988               0.8031              37.5708  </span></span>
<span id="cb124-10"><a href="interaction-models.html#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; height:genderfemale  </span></span>
<span id="cb124-11"><a href="interaction-models.html#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             -0.2553</span></span></code></pre></div>
</div>
<div id="visualization-non-parallel-slopes" class="section level3 hasAnchor" number="11.6.4">
<h3><span class="header-section-number">11.6.4</span> Visualization (non-parallel slopes)<a href="interaction-models.html#visualization-non-parallel-slopes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- https://cran.r-project.org/web/packages/interactions/vignettes/interactions.html -->
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="interaction-models.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(interactions)</span>
<span id="cb125-2"><a href="interaction-models.html#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(interact1, <span class="at">pred =</span> height, <span class="at">modx =</span> gender,</span>
<span id="cb125-3"><a href="interaction-models.html#cb125-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">main.title =</span> <span class="st">&quot;Each group has a different slope.&quot;</span>)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-191-1.png" width="576" /></p>
<div class="infobox2 information">
<p>Conclusion: The <strong>fundamental truth</strong> is that the effect of body height on body weight is similar but not identical between males and females. A boy and and girl of exact same body height who experience growth by 1cm are expected to end up with different weight gains. There is <strong>effect heterogeneity</strong>.</p>
</div>
<!-- Now it is no longer a parallel slopes model. A different slope is equivalent to a different effect of height on weight for the two genders.  -->
</div>
<div id="interaction-continuous-continuous" class="section level3 hasAnchor" number="11.6.5">
<h3><span class="header-section-number">11.6.5</span> Interaction (continuous * continuous)<a href="interaction-models.html#interaction-continuous-continuous" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- https://r4ds.had.co.nz/model-basics.html#interactions-two-continuous -->
<!-- https://www.theanalysisfactor.com/3-tips-interpreting-moderation/ -->
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="interaction-models.html#cb126-1" aria-hidden="true" tabindex="-1"></a>interact2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(weight <span class="sc">~</span> height<span class="sc">*</span>age, <span class="at">data=</span>soep)</span>
<span id="cb126-2"><a href="interaction-models.html#cb126-2" aria-hidden="true" tabindex="-1"></a>interact2</span>
<span id="cb126-3"><a href="interaction-models.html#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb126-4"><a href="interaction-models.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb126-5"><a href="interaction-models.html#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; lm(formula = weight ~ height * age, data = soep)</span></span>
<span id="cb126-6"><a href="interaction-models.html#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb126-7"><a href="interaction-models.html#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb126-8"><a href="interaction-models.html#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (Intercept)       height          age   height:age  </span></span>
<span id="cb126-9"><a href="interaction-models.html#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  -80.661777     0.861444    -0.213555     0.002397</span></span></code></pre></div>
<p>The interaction of two continuous variables is harder to interpret. We cannot set the moderator (age) equal to zero, since there is no person with an age of zero (in SOEP).</p>
</div>
<div id="visualization-non-parallel-slopes-1" class="section level3 hasAnchor" number="11.6.6">
<h3><span class="header-section-number">11.6.6</span> Visualization (non-parallel slopes)<a href="interaction-models.html#visualization-non-parallel-slopes-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are conventions to help you choose the best values of the continuous moderator for plotting predicted values. But these conventions don't always work in every situation. For example, one convention suggested by Cohen and Cohen and popularized by Aiken and West is to use three values of the moderator: the mean, the value one standard deviation above, and the value one standard deviation below the mean. This is what interact_plot() does by default.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="interaction-models.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interact_plot</span>(interact2, <span class="at">pred =</span> height, <span class="at">modx =</span> age)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-193-1.png" width="576" /></p>
<p>This shows you that interaction between two continuous variables works basically the same way as for a categorical and continuous variable. An interaction says that there's not a fixed offset: you need to consider both values of x1 and x2 simultaneously in order to predict y.</p>
<p>You can see that even with just two continuous variables, coming up with good visualizations are hard. But that's reasonable: you shouldn't expect it will be easy to understand how three or more variables simultaneously interact! But again, we're saved a little because we're using models for exploration, and you can gradually build up your model over time. The model doesn't have to be perfect, it just has to help you reveal a little more about your data.</p>
<div class="infobox2 information">
<p>Conclusion: The <strong>fundamental truth</strong> is that the effect of body height on body weight is identical across age. In the regression output age has non-significant coefficients. The interaction plot is suggesting that there is no effect heterogeneity with respect to age (multiple parallel slopes).</p>
</div>
</div>
</div>
<div id="marginal-effects" class="section level2 hasAnchor" number="11.7">
<h2><span class="header-section-number">11.7</span> Marginal Effects<a href="interaction-models.html#marginal-effects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now we better understand that the effect of our main explanatory variable might be increased or decreased by another variable. Still, a question is open to answer: What exactly is the effect of our main explanatory variable in the interaction model?</p>
<div class="infobox2 information">
<p>In OLS framework <strong>regression coefficients</strong> have direct interpretation as <strong>unconditional marginal effects</strong>: predicted change in y due to a unit change in x. Interactions or higher-order terms (e.g. age square) make interpretation difficult or impossible. For interpretation of the effect and the statistical significance, we have to investigate all interacted variables at the same time. Marginal effects are <strong>partial derivatives</strong> of the regression equation with respect to a variable from the model.</p>
</div>
<p><span class="math display">\[
\begin{align}
weight &amp;= \beta_0 + \beta_1 \cdot height \tag{simple regression} \\
\frac{\partial weight}{\partial height} &amp;= \beta_1 \tag{unconditional effect}  \\
weight &amp;= \beta_0 + \beta_1 \cdot height + \beta_2 \cdot female + \beta_3 \cdot height \cdot female \tag{moderated regression} \\
\frac{\partial weight}{\partial height} &amp;= \beta_1 + \beta_3 \cdot female \tag{conditional effect}  \\
\end{align}
\]</span></p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="interaction-models.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb128-2"><a href="interaction-models.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(simple, interact1, <span class="at">type=</span><span class="st">&quot;text&quot;</span>)</span>
<span id="cb128-3"><a href="interaction-models.html#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb128-4"><a href="interaction-models.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; =================================================================================</span></span>
<span id="cb128-5"><a href="interaction-models.html#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                          Dependent variable:                     </span></span>
<span id="cb128-6"><a href="interaction-models.html#cb128-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                     -------------------------------------------------------------</span></span>
<span id="cb128-7"><a href="interaction-models.html#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                weight                            </span></span>
<span id="cb128-8"><a href="interaction-models.html#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                  (1)                            (2)              </span></span>
<span id="cb128-9"><a href="interaction-models.html#cb128-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---------------------------------------------------------------------------------</span></span>
<span id="cb128-10"><a href="interaction-models.html#cb128-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; height                         0.903***                       0.803***           </span></span>
<span id="cb128-11"><a href="interaction-models.html#cb128-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                (0.005)                        (0.008)            </span></span>
<span id="cb128-12"><a href="interaction-models.html#cb128-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                  </span></span>
<span id="cb128-13"><a href="interaction-models.html#cb128-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; genderfemale                                                 37.571***           </span></span>
<span id="cb128-14"><a href="interaction-models.html#cb128-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                               (2.125)            </span></span>
<span id="cb128-15"><a href="interaction-models.html#cb128-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                  </span></span>
<span id="cb128-16"><a href="interaction-models.html#cb128-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; height:genderfemale                                          -0.255***           </span></span>
<span id="cb128-17"><a href="interaction-models.html#cb128-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                               (0.012)            </span></span>
<span id="cb128-18"><a href="interaction-models.html#cb128-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                  </span></span>
<span id="cb128-19"><a href="interaction-models.html#cb128-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Constant                      -78.436***                     -58.799***          </span></span>
<span id="cb128-20"><a href="interaction-models.html#cb128-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                (0.799)                        (1.508)            </span></span>
<span id="cb128-21"><a href="interaction-models.html#cb128-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                  </span></span>
<span id="cb128-22"><a href="interaction-models.html#cb128-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---------------------------------------------------------------------------------</span></span>
<span id="cb128-23"><a href="interaction-models.html#cb128-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Observations                   103,950                        103,950            </span></span>
<span id="cb128-24"><a href="interaction-models.html#cb128-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; R2                              0.267                          0.289             </span></span>
<span id="cb128-25"><a href="interaction-models.html#cb128-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Adjusted R2                     0.266                          0.289             </span></span>
<span id="cb128-26"><a href="interaction-models.html#cb128-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Residual Std. Error      14.170 (df = 103948)           13.955 (df = 103946)     </span></span>
<span id="cb128-27"><a href="interaction-models.html#cb128-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F Statistic         37,767.980*** (df = 1; 103948) 14,056.330*** (df = 3; 103946)</span></span>
<span id="cb128-28"><a href="interaction-models.html#cb128-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; =================================================================================</span></span>
<span id="cb128-29"><a href="interaction-models.html#cb128-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Note:                                                 *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</span></span></code></pre></div>
<p>For the simple regression, the coefficient is identical (unconditional).</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="interaction-models.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(margins)</span>
<span id="cb129-2"><a href="interaction-models.html#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">margins</span>(simple)</span>
<span id="cb129-3"><a href="interaction-models.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  height</span></span>
<span id="cb129-4"><a href="interaction-models.html#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0.9034</span></span></code></pre></div>
<div id="marginal-effects-at-representatives-task" class="section level3 hasAnchor" number="11.7.1">
<h3><span class="header-section-number">11.7.1</span> Marginal effects at representatives (TASK)<a href="interaction-models.html#marginal-effects-at-representatives-task" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can use representative values which we literally plug in the equation. These are the effects for each group (what we have seen before in the interaction plot):</p>
<p><span class="math display">\[
\begin{align}
weight &amp;= \beta_0 + \beta_1 \cdot height + \beta_2 \cdot female + \beta_3 \cdot height \cdot female \tag{interact1} \\
\frac{\partial weight}{\partial height} &amp;= \beta_1 + \beta_3 \cdot female \tag{conditional effect}  \\
\end{align}
\]</span></p>
<!-- \frac{\partial weight}{\partial height} &= 1.069 -0.224 \cdot 1 = 0.845 \tag{effect for males}  \\ -->
<!-- \frac{\partial weight}{\partial height} &= 1.069 -0.224 \cdot 2 = 0.621 \tag{effect for females}  \\ -->
<p>Here is the R code:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="interaction-models.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">margins</span>(interact1, <span class="at">at =</span> <span class="fu">list</span>(<span class="at">gender =</span> <span class="fu">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>)))</span>
<span id="cb130-2"><a href="interaction-models.html#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  at(gender) height genderfemale</span></span>
<span id="cb130-3"><a href="interaction-models.html#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        male 0.8031       -6.224</span></span>
<span id="cb130-4"><a href="interaction-models.html#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      female 0.5479       -6.224</span></span></code></pre></div>
<p>Please calculate the MER of height in <code>interact1</code> for the two gender programmtic in R.</p>
</div>
<div id="marginal-effects-at-the-mean-task" class="section level3 hasAnchor" number="11.7.2">
<h3><span class="header-section-number">11.7.2</span> Marginal effects at the mean (TASK)<a href="interaction-models.html#marginal-effects-at-the-mean-task" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Plugging in values is not always as easy as it seems to be. What should we use for age? Values as 0, 1 or 2 does not makes sense for age. Okay, we could use some representative age, e.g. 30 and 40. But what is our theoretical justification to report the effect for age 30 and not age 31? Another strategy is to use mean values of the variables.</p>
<!-- \frac{\partial weight}{\partial height} &= 0.9318 + 0.0009254 \cdot 48.57654 = 0.97675 \tag{ME at means}  \\ -->
<p><span class="math display">\[
\begin{align}
weight &amp;= \beta_0 + \beta_1 \cdot height + \beta_2 \cdot age + \beta_3 \cdot height \cdot age \tag{interact2} \\
\frac{\partial weight}{\partial height} &amp;= \beta_1 + \beta_3 \cdot age \tag{conditional effect}  \\
\end{align}
\]</span></p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="interaction-models.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;stargazer&quot;</span>)</span>
<span id="cb131-2"><a href="interaction-models.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(simple, interact2, <span class="at">type=</span><span class="st">&quot;text&quot;</span>)</span>
<span id="cb131-3"><a href="interaction-models.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb131-4"><a href="interaction-models.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; =================================================================================</span></span>
<span id="cb131-5"><a href="interaction-models.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                          Dependent variable:                     </span></span>
<span id="cb131-6"><a href="interaction-models.html#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                     -------------------------------------------------------------</span></span>
<span id="cb131-7"><a href="interaction-models.html#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                weight                            </span></span>
<span id="cb131-8"><a href="interaction-models.html#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                  (1)                            (2)              </span></span>
<span id="cb131-9"><a href="interaction-models.html#cb131-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---------------------------------------------------------------------------------</span></span>
<span id="cb131-10"><a href="interaction-models.html#cb131-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; height                         0.903***                       0.861***           </span></span>
<span id="cb131-11"><a href="interaction-models.html#cb131-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                (0.005)                        (0.013)            </span></span>
<span id="cb131-12"><a href="interaction-models.html#cb131-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                  </span></span>
<span id="cb131-13"><a href="interaction-models.html#cb131-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; age                                                          -0.214***           </span></span>
<span id="cb131-14"><a href="interaction-models.html#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                               (0.044)            </span></span>
<span id="cb131-15"><a href="interaction-models.html#cb131-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                  </span></span>
<span id="cb131-16"><a href="interaction-models.html#cb131-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; height:age                                                    0.002***           </span></span>
<span id="cb131-17"><a href="interaction-models.html#cb131-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                               (0.0003)           </span></span>
<span id="cb131-18"><a href="interaction-models.html#cb131-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                  </span></span>
<span id="cb131-19"><a href="interaction-models.html#cb131-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Constant                      -78.436***                     -80.662***          </span></span>
<span id="cb131-20"><a href="interaction-models.html#cb131-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                (0.799)                        (2.214)            </span></span>
<span id="cb131-21"><a href="interaction-models.html#cb131-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                                  </span></span>
<span id="cb131-22"><a href="interaction-models.html#cb131-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ---------------------------------------------------------------------------------</span></span>
<span id="cb131-23"><a href="interaction-models.html#cb131-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Observations                   103,950                        103,950            </span></span>
<span id="cb131-24"><a href="interaction-models.html#cb131-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; R2                              0.267                          0.309             </span></span>
<span id="cb131-25"><a href="interaction-models.html#cb131-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Adjusted R2                     0.266                          0.309             </span></span>
<span id="cb131-26"><a href="interaction-models.html#cb131-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Residual Std. Error      14.170 (df = 103948)           13.751 (df = 103946)     </span></span>
<span id="cb131-27"><a href="interaction-models.html#cb131-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; F Statistic         37,767.980*** (df = 1; 103948) 15,516.970*** (df = 3; 103946)</span></span>
<span id="cb131-28"><a href="interaction-models.html#cb131-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; =================================================================================</span></span>
<span id="cb131-29"><a href="interaction-models.html#cb131-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Note:                                                 *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</span></span></code></pre></div>
<p>Here is the R code with margins:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="interaction-models.html#cb132-1" aria-hidden="true" tabindex="-1"></a>interact2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(weight <span class="sc">~</span> height<span class="sc">*</span>age, <span class="at">data=</span>soep)</span>
<span id="cb132-2"><a href="interaction-models.html#cb132-2" aria-hidden="true" tabindex="-1"></a>interact2</span>
<span id="cb132-3"><a href="interaction-models.html#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb132-4"><a href="interaction-models.html#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb132-5"><a href="interaction-models.html#cb132-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; lm(formula = weight ~ height * age, data = soep)</span></span>
<span id="cb132-6"><a href="interaction-models.html#cb132-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb132-7"><a href="interaction-models.html#cb132-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb132-8"><a href="interaction-models.html#cb132-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (Intercept)       height          age   height:age  </span></span>
<span id="cb132-9"><a href="interaction-models.html#cb132-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  -80.661777     0.861444    -0.213555     0.002397</span></span>
<span id="cb132-10"><a href="interaction-models.html#cb132-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-11"><a href="interaction-models.html#cb132-11" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(margins(interact2))</span></span>
<span id="cb132-12"><a href="interaction-models.html#cb132-12" aria-hidden="true" tabindex="-1"></a><span class="fu">margins</span>(interact2, <span class="at">at =</span> <span class="fu">list</span>(<span class="at">age =</span> mean_age))</span>
<span id="cb132-13"><a href="interaction-models.html#cb132-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  at(age) height    age</span></span>
<span id="cb132-14"><a href="interaction-models.html#cb132-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    48.05 0.9766 0.1977</span></span></code></pre></div>
<p>Please calculate the MEM of height in <code>interact2</code> programmtic in R.</p>
</div>
<div id="average-marginal-effects" class="section level3 hasAnchor" number="11.7.3">
<h3><span class="header-section-number">11.7.3</span> Average marginal effects<a href="interaction-models.html#average-marginal-effects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The default <em>margins</em> commands shows you something else than MER and MEM, namely <strong>average marginal effects</strong>. AMEs calculate marginal effects at every observed value of X and average across the resulting effect estimates. AMEs are particularly useful because -- unlike MEMs -- produce a single quantity summary that reflects the full distribution of X rather than an arbitrary prediction.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="interaction-models.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">margins</span>(interact1)</span>
<span id="cb133-2"><a href="interaction-models.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  height genderfemale</span></span>
<span id="cb133-3"><a href="interaction-models.html#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  0.6698       -6.224</span></span></code></pre></div>
<p>A summary provides you with information that cannot easily be calculated by hand, e.g. standard error, p-value, confidence interval:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="interaction-models.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">margins</span>(interact1))</span>
<span id="cb134-2"><a href="interaction-models.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        factor     AME     SE        z      p   lower   upper</span></span>
<span id="cb134-3"><a href="interaction-models.html#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  genderfemale -6.2236 0.1169 -53.2405 0.0000 -6.4527 -5.9945</span></span>
<span id="cb134-4"><a href="interaction-models.html#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        height  0.6698 0.0062 107.8003 0.0000  0.6576  0.6820</span></span></code></pre></div>
<!-- ## Personal Project (6 pt) -->
<!-- Please think about a reasonable 2x2 interaction for your topic (continuous and dummy or continuous). Please build the model and store it as `my_interaction`. Please visualize the interaction in a plot. Are there heterogeneous effects? Do they behave as expected?  -->

</div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="linear-regression.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="logistic-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Becoming Fluent In Data.pdf", "Becoming Fluent In Data.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": false
},
"toc_depth": 1,
"toc-title": "Table of Contents",
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
