<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Web Data | Becoming Fluent in Data</title>
  <meta name="description" content="A guide to become fluent in data." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Web Data | Becoming Fluent in Data" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/Cover.png" />
  <meta property="og:description" content="A guide to become fluent in data." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Web Data | Becoming Fluent in Data" />
  
  <meta name="twitter:description" content="A guide to become fluent in data." />
  <meta name="twitter:image" content="/images/Cover.png" />

<meta name="author" content="Marco Kühne" />


<meta name="date" content="2024-02-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/Logo.ico" type="image/x-icon" />
<link rel="prev" href="time-data.html"/>
<link rel="next" href="geo-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/tippyjs-3.2.0/themes/google.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/light-border.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/light.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/translucent.css" rel="stylesheet" />
<script src="libs/tippyjs-3.2.0/tippy.all.min.js"></script>
<script src="libs/tippy-binding-0.1.0/tippy.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.31/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.1/leaflet.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script type="application/json" class="js-hypothesis-config">
{
"showHighlights": false
}
</script>
<script async defer src="https://hypothes.is/embed.js"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P9BQG7T00K"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-P9BQG7T00K');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="www/webex.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/box_def.css" type="text/css" />
<link rel="stylesheet" href="css/box_amazing.css" type="text/css" />
<link rel="stylesheet" href="css/box_challenge.css" type="text/css" />
<link rel="stylesheet" href="css/box_dedicated.css" type="text/css" />
<link rel="stylesheet" href="css/box_reading.css" type="text/css" />
<link rel="stylesheet" href="css/ani.css" type="text/css" />
<link rel="stylesheet" href="css/background.css" type="text/css" />
<link rel="stylesheet" href="css/toggle.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://marcokuehne.github.io/">Becoming Fluent in Data</a></li> <li><p class="aligncenter"> <img src="images/Logo.png" width="60%" height="60%"> </p></li>
<li class="divider"></li>
<li class="part"><span><b>I Intro</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html"><i class="fa fa-check"></i>About the book</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#aims-of-this-book"><i class="fa fa-check"></i>Aims of this book</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#for-students"><i class="fa fa-check"></i>For students</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#for-instructors"><i class="fa fa-check"></i>For instructors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#structure"><i class="fa fa-check"></i>Structure</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#color"><i class="fa fa-check"></i>Color</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#components"><i class="fa fa-check"></i>Components</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#why-tidyverse"><i class="fa fa-check"></i>Why Tidyverse?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html#dust-and-dark"><i class="fa fa-check"></i>Dust and Dark</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html#teach-learn-repeat"><i class="fa fa-check"></i>Teach – Learn – Repeat</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i>Intro to R</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#r-is-a-calculator"><i class="fa fa-check"></i>R is a calculator</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#r-is-more-than-a-calculator"><i class="fa fa-check"></i>R is more than a calculator</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#define-objects"><i class="fa fa-check"></i>Define objects</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#numeric-variables"><i class="fa fa-check"></i>Numeric Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#logical-variables"><i class="fa fa-check"></i>Logical Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#string-variables"><i class="fa fa-check"></i>String Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#factor-variables"><i class="fa fa-check"></i>Factor Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#combine-objects"><i class="fa fa-check"></i>Combine objects</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#data-frame"><i class="fa fa-check"></i>Data frame</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#plots"><i class="fa fa-check"></i>Plots</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html"><i class="fa fa-check"></i>Intro to Tidyverse</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#data-with-readr"><i class="fa fa-check"></i>Data with readr</a></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#verbs-of-dplyr"><i class="fa fa-check"></i>Verbs of dplyr</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#glimpse"><i class="fa fa-check"></i>Glimpse</a></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#select"><i class="fa fa-check"></i>Select</a></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#arrange"><i class="fa fa-check"></i>Arrange</a></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#rename"><i class="fa fa-check"></i>Rename</a></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#the-pipe-operator"><i class="fa fa-check"></i>The pipe operator</a></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#filter"><i class="fa fa-check"></i>Filter</a></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#mutate"><i class="fa fa-check"></i>Mutate</a></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#summarize"><i class="fa fa-check"></i>Summarize</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-tidyverse.html"><a href="intro-to-tidyverse.html#graphs-with-ggplot2"><i class="fa fa-check"></i>Graphs with ggplot2</a></li>
</ul></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html"><i class="fa fa-check"></i><b>1</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#why-we-measure"><i class="fa fa-check"></i><b>1.1</b> Why we measure</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#women-are-having-far-fewer-children."><i class="fa fa-check"></i><b>1.1.1</b> Women are having far fewer children.</a></li>
<li class="chapter" data-level="1.1.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#global-surface-temperature-is-rising."><i class="fa fa-check"></i><b>1.1.2</b> Global surface temperature is rising.</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#means-of-measuring"><i class="fa fa-check"></i><b>1.2</b> Means of measuring</a></li>
<li class="chapter" data-level="1.3" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#types-of-data"><i class="fa fa-check"></i><b>1.3</b> Types of data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#origin-of-data"><i class="fa fa-check"></i><b>1.3.1</b> Origin of data</a></li>
<li class="chapter" data-level="1.3.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#analysis-of-data"><i class="fa fa-check"></i><b>1.3.2</b> Analysis of data</a></li>
<li class="chapter" data-level="1.3.3" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#structure-of-data"><i class="fa fa-check"></i><b>1.3.3</b> Structure of data</a></li>
<li class="chapter" data-level="1.3.4" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#the-level-of-access"><i class="fa fa-check"></i><b>1.3.4</b> The level of access</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#can-we-measure-everything"><i class="fa fa-check"></i><b>1.4</b> Can we measure everything?</a></li>
<li class="chapter" data-level="1.5" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#the-reality-behind-the-data"><i class="fa fa-check"></i><b>1.5</b> The reality behind the data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html"><i class="fa fa-check"></i><b>2</b> Stories and Visuals</a>
<ul>
<li class="chapter" data-level="2.1" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#facts"><i class="fa fa-check"></i><b>2.1</b> Facts</a></li>
<li class="chapter" data-level="2.2" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#visualization"><i class="fa fa-check"></i><b>2.2</b> Visualization</a></li>
<li class="chapter" data-level="2.3" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#telling-a-story"><i class="fa fa-check"></i><b>2.3</b> Telling a story</a></li>
<li class="chapter" data-level="2.4" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#mans-best-friend"><i class="fa fa-check"></i><b>2.4</b> Man's best friend</a></li>
<li class="chapter" data-level="2.5" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#less-is-more"><i class="fa fa-check"></i><b>2.5</b> Less is more</a></li>
<li class="chapter" data-level="2.6" data-path="stories-and-visuals.html"><a href="stories-and-visuals.html#grammar-of-graphics"><i class="fa fa-check"></i><b>2.6</b> Grammar of Graphics</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tabular-data.html"><a href="tabular-data.html"><i class="fa fa-check"></i><b>3</b> Tabular Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tabular-data.html"><a href="tabular-data.html#types-of-tabular-data"><i class="fa fa-check"></i><b>3.1</b> Types of Tabular Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="tabular-data.html"><a href="tabular-data.html#cross-section"><i class="fa fa-check"></i><b>3.1.1</b> Cross-section</a></li>
<li class="chapter" data-level="3.1.2" data-path="tabular-data.html"><a href="tabular-data.html#repeated-cross-section"><i class="fa fa-check"></i><b>3.1.2</b> Repeated cross-section</a></li>
<li class="chapter" data-level="3.1.3" data-path="tabular-data.html"><a href="tabular-data.html#time-series"><i class="fa fa-check"></i><b>3.1.3</b> Time series</a></li>
<li class="chapter" data-level="3.1.4" data-path="tabular-data.html"><a href="tabular-data.html#panel-data"><i class="fa fa-check"></i><b>3.1.4</b> Panel data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="panel-data-1.html"><a href="panel-data-1.html"><i class="fa fa-check"></i><b>4</b> Panel Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="panel-data-1.html"><a href="panel-data-1.html#unemployment"><i class="fa fa-check"></i><b>4.1</b> Unemployment</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="panel-data-1.html"><a href="panel-data-1.html#on-decline-in-germany"><i class="fa fa-check"></i><b>4.1.1</b> On decline in Germany</a></li>
<li class="chapter" data-level="4.1.2" data-path="panel-data-1.html"><a href="panel-data-1.html#measurement"><i class="fa fa-check"></i><b>4.1.2</b> Measurement</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="panel-data-1.html"><a href="panel-data-1.html#application"><i class="fa fa-check"></i><b>4.2</b> Application</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="panel-data-1.html"><a href="panel-data-1.html#data-inspection"><i class="fa fa-check"></i><b>4.2.1</b> Data Inspection</a></li>
<li class="chapter" data-level="4.2.2" data-path="panel-data-1.html"><a href="panel-data-1.html#data-preparation"><i class="fa fa-check"></i><b>4.2.2</b> Data Preparation</a></li>
<li class="chapter" data-level="4.2.3" data-path="panel-data-1.html"><a href="panel-data-1.html#data-visualization"><i class="fa fa-check"></i><b>4.2.3</b> Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="panel-data-1.html"><a href="panel-data-1.html#panel-studies"><i class="fa fa-check"></i><b>4.3</b> Panel Studies</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="time-data.html"><a href="time-data.html"><i class="fa fa-check"></i><b>5</b> Time data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="time-data.html"><a href="time-data.html#measuring-time"><i class="fa fa-check"></i><b>5.1</b> Measuring Time</a></li>
<li class="chapter" data-level="5.2" data-path="time-data.html"><a href="time-data.html#measuring-dates"><i class="fa fa-check"></i><b>5.2</b> Measuring Dates</a></li>
<li class="chapter" data-level="5.3" data-path="time-data.html"><a href="time-data.html#your-first-time-in-r"><i class="fa fa-check"></i><b>5.3</b> Your First Time (in R)</a></li>
<li class="chapter" data-level="5.4" data-path="time-data.html"><a href="time-data.html#time-zones"><i class="fa fa-check"></i><b>5.4</b> Time Zones</a></li>
<li class="chapter" data-level="5.5" data-path="time-data.html"><a href="time-data.html#time-management-in-r"><i class="fa fa-check"></i><b>5.5</b> Time Management in R</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="time-data.html"><a href="time-data.html#decimal-time"><i class="fa fa-check"></i><b>5.5.1</b> Decimal Time</a></li>
<li class="chapter" data-level="5.5.2" data-path="time-data.html"><a href="time-data.html#time-formats"><i class="fa fa-check"></i><b>5.5.2</b> Time Formats</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="time-data.html"><a href="time-data.html#coffee-spending"><i class="fa fa-check"></i><b>5.6</b> Coffee Spending</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="time-data.html"><a href="time-data.html#spending-time-of-day"><i class="fa fa-check"></i><b>5.6.1</b> Spending Time of Day</a></li>
<li class="chapter" data-level="5.6.2" data-path="time-data.html"><a href="time-data.html#run-chart"><i class="fa fa-check"></i><b>5.6.2</b> Run Chart</a></li>
<li class="chapter" data-level="5.6.3" data-path="time-data.html"><a href="time-data.html#run-chart-grouped"><i class="fa fa-check"></i><b>5.6.3</b> Run Chart Grouped</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="time-data.html"><a href="time-data.html#run-chart-grouped-cleaned"><i class="fa fa-check"></i><b>5.7</b> Run Chart Grouped Cleaned</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="web-data.html"><a href="web-data.html"><i class="fa fa-check"></i><b>6</b> Web Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="web-data.html"><a href="web-data.html#most-expensive-paintings"><i class="fa fa-check"></i><b>6.1</b> Most expensive paintings</a></li>
<li class="chapter" data-level="6.2" data-path="web-data.html"><a href="web-data.html#student-numbers-at-viadrina"><i class="fa fa-check"></i><b>6.2</b> Student numbers at Viadrina</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="web-data.html"><a href="web-data.html#pdf-scraping"><i class="fa fa-check"></i><b>6.2.1</b> PDF scraping</a></li>
<li class="chapter" data-level="6.2.2" data-path="web-data.html"><a href="web-data.html#share-of-female-students"><i class="fa fa-check"></i><b>6.2.2</b> Share of female students</a></li>
<li class="chapter" data-level="6.2.3" data-path="web-data.html"><a href="web-data.html#share-of-foreign-students"><i class="fa fa-check"></i><b>6.2.3</b> Share of foreign students</a></li>
<li class="chapter" data-level="6.2.4" data-path="web-data.html"><a href="web-data.html#web-scraping"><i class="fa fa-check"></i><b>6.2.4</b> Web scraping</a></li>
<li class="chapter" data-level="6.2.5" data-path="web-data.html"><a href="web-data.html#most-recent-student-numbers"><i class="fa fa-check"></i><b>6.2.5</b> Most recent student numbers</a></li>
<li class="chapter" data-level="6.2.6" data-path="web-data.html"><a href="web-data.html#the-long-run-trend"><i class="fa fa-check"></i><b>6.2.6</b> The long run trend</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="geo-data.html"><a href="geo-data.html"><i class="fa fa-check"></i><b>7</b> Geo Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="geo-data.html"><a href="geo-data.html#geo-coordinates"><i class="fa fa-check"></i><b>7.1</b> Geo coordinates</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="geo-data.html"><a href="geo-data.html#where-are-you"><i class="fa fa-check"></i><b>7.1.1</b> Where Are You?</a></li>
<li class="chapter" data-level="7.1.2" data-path="geo-data.html"><a href="geo-data.html#latitude-and-longitude"><i class="fa fa-check"></i><b>7.1.2</b> Latitude and longitude</a></li>
<li class="chapter" data-level="7.1.3" data-path="geo-data.html"><a href="geo-data.html#angles-and-degrees"><i class="fa fa-check"></i><b>7.1.3</b> Angles and Degrees</a></li>
<li class="chapter" data-level="7.1.4" data-path="geo-data.html"><a href="geo-data.html#coordinate-reference-system"><i class="fa fa-check"></i><b>7.1.4</b> Coordinate Reference System</a></li>
<li class="chapter" data-level="7.1.5" data-path="geo-data.html"><a href="geo-data.html#distance-measurement"><i class="fa fa-check"></i><b>7.1.5</b> Distance measurement</a></li>
<li class="chapter" data-level="7.1.6" data-path="geo-data.html"><a href="geo-data.html#points-and-polygons"><i class="fa fa-check"></i><b>7.1.6</b> Points And Polygons</a></li>
<li class="chapter" data-level="7.1.7" data-path="geo-data.html"><a href="geo-data.html#shapefiles"><i class="fa fa-check"></i><b>7.1.7</b> Shapefiles</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="geo-data.html"><a href="geo-data.html#google-takeout"><i class="fa fa-check"></i><b>7.2</b> Google Takeout</a></li>
<li class="chapter" data-level="7.3" data-path="geo-data.html"><a href="geo-data.html#blood-donation"><i class="fa fa-check"></i><b>7.3</b> Blood Donation</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="missing-data.html"><a href="missing-data.html"><i class="fa fa-check"></i><b>8</b> Missing Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="missing-data.html"><a href="missing-data.html#types-of-missing-data"><i class="fa fa-check"></i><b>8.1</b> Types of Missing Data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="missing-data.html"><a href="missing-data.html#missing-completely-at-random-mcar"><i class="fa fa-check"></i><b>8.1.1</b> Missing Completely at Random (MCAR)</a></li>
<li class="chapter" data-level="8.1.2" data-path="missing-data.html"><a href="missing-data.html#missing-at-random-mar"><i class="fa fa-check"></i><b>8.1.2</b> Missing at Random (MAR)</a></li>
<li class="chapter" data-level="8.1.3" data-path="missing-data.html"><a href="missing-data.html#missing-not-at-random-mnar"><i class="fa fa-check"></i><b>8.1.3</b> Missing Not at Random (MNAR)</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="missing-data.html"><a href="missing-data.html#causes-of-missing-data"><i class="fa fa-check"></i><b>8.2</b> Causes of Missing Data</a></li>
<li class="chapter" data-level="8.3" data-path="missing-data.html"><a href="missing-data.html#causes-of-missing-data-1"><i class="fa fa-check"></i><b>8.3</b> Causes of Missing Data</a></li>
<li class="chapter" data-level="8.4" data-path="missing-data.html"><a href="missing-data.html#causes-of-missing-data-2"><i class="fa fa-check"></i><b>8.4</b> Causes of Missing Data</a></li>
<li class="chapter" data-level="8.5" data-path="missing-data.html"><a href="missing-data.html#causes-of-missing-data-3"><i class="fa fa-check"></i><b>8.5</b> Causes of Missing Data</a></li>
<li class="chapter" data-level="8.6" data-path="missing-data.html"><a href="missing-data.html#missing-data-in-r"><i class="fa fa-check"></i><b>8.6</b> Missing Data in R</a></li>
</ul></li>
<li class="part"><span><b>III Models</b></span></li>
<li class="chapter" data-level="9" data-path="relationships.html"><a href="relationships.html"><i class="fa fa-check"></i><b>9</b> Relationships</a>
<ul>
<li class="chapter" data-level="9.1" data-path="relationships.html"><a href="relationships.html#storks-deliver-babies"><i class="fa fa-check"></i><b>9.1</b> Storks Deliver Babies</a></li>
<li class="chapter" data-level="9.2" data-path="relationships.html"><a href="relationships.html#statistics"><i class="fa fa-check"></i><b>9.2</b> Statistics</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="relationships.html"><a href="relationships.html#variance"><i class="fa fa-check"></i><b>9.2.1</b> Variance</a></li>
<li class="chapter" data-level="9.2.2" data-path="relationships.html"><a href="relationships.html#standard-deviation"><i class="fa fa-check"></i><b>9.2.2</b> Standard Deviation</a></li>
<li class="chapter" data-level="9.2.3" data-path="relationships.html"><a href="relationships.html#covariance"><i class="fa fa-check"></i><b>9.2.3</b> Covariance</a></li>
<li class="chapter" data-level="9.2.4" data-path="relationships.html"><a href="relationships.html#correlation"><i class="fa fa-check"></i><b>9.2.4</b> Correlation</a></li>
<li class="chapter" data-level="9.2.5" data-path="relationships.html"><a href="relationships.html#an-early-glimpse-into-regression"><i class="fa fa-check"></i><b>9.2.5</b> An Early Glimpse into Regression</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="relationships.html"><a href="relationships.html#visualizations"><i class="fa fa-check"></i><b>9.3</b> Visualizations</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="relationships.html"><a href="relationships.html#storks-and-population-in-a-scatterplot"><i class="fa fa-check"></i><b>9.3.1</b> Storks and Population in a Scatterplot</a></li>
<li class="chapter" data-level="9.3.2" data-path="relationships.html"><a href="relationships.html#storks-and-population-in-a-barplot"><i class="fa fa-check"></i><b>9.3.2</b> Storks and Population in a Barplot</a></li>
<li class="chapter" data-level="9.3.3" data-path="relationships.html"><a href="relationships.html#storks-and-area"><i class="fa fa-check"></i><b>9.3.3</b> Storks and Area</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="relationships.html"><a href="relationships.html#spurious-relationships"><i class="fa fa-check"></i><b>9.4</b> Spurious Relationships</a></li>
<li class="chapter" data-level="" data-path="relationships.html"><a href="relationships.html#readings"><i class="fa fa-check"></i>Readings</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>10</b> Regression</a>
<ul>
<li class="chapter" data-level="10.1" data-path="regression.html"><a href="regression.html#old-but-gold"><i class="fa fa-check"></i><b>10.1</b> Old but Gold</a></li>
<li class="chapter" data-level="10.2" data-path="regression.html"><a href="regression.html#data-is-everywhere-1"><i class="fa fa-check"></i><b>10.2</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="regression.html"><a href="regression.html#data-in-a-table"><i class="fa fa-check"></i><b>10.2.1</b> Data in a table</a></li>
<li class="chapter" data-level="10.2.2" data-path="regression.html"><a href="regression.html#data-in-a-graph"><i class="fa fa-check"></i><b>10.2.2</b> Data in a graph</a></li>
<li class="chapter" data-level="10.2.3" data-path="regression.html"><a href="regression.html#the-trend"><i class="fa fa-check"></i><b>10.2.3</b> The trend</a></li>
<li class="chapter" data-level="10.2.4" data-path="regression.html"><a href="regression.html#the-blackbox"><i class="fa fa-check"></i><b>10.2.4</b> The blackbox</a></li>
<li class="chapter" data-level="10.2.5" data-path="regression.html"><a href="regression.html#nobodys-perfect"><i class="fa fa-check"></i><b>10.2.5</b> Nobody's perfect</a></li>
<li class="chapter" data-level="10.2.6" data-path="regression.html"><a href="regression.html#vocab-wrap-up"><i class="fa fa-check"></i><b>10.2.6</b> Vocab Wrap-Up</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="regression.html"><a href="regression.html#for-the-truly-dedicated"><i class="fa fa-check"></i><b>10.3</b> For the truly dedicated</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="regression.html"><a href="regression.html#algebra"><i class="fa fa-check"></i><b>10.3.1</b> Algebra</a></li>
<li class="chapter" data-level="10.3.2" data-path="regression.html"><a href="regression.html#analysis"><i class="fa fa-check"></i><b>10.3.2</b> Analysis</a></li>
<li class="chapter" data-level="10.3.3" data-path="regression.html"><a href="regression.html#take-the-long-way-home"><i class="fa fa-check"></i><b>10.3.3</b> Take the Long Way Home</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="regression.html"><a href="regression.html#survival-of-the-fittest-line"><i class="fa fa-check"></i><b>10.4</b> Survival of the Fittest Line</a></li>
<li class="chapter" data-level="10.5" data-path="regression.html"><a href="regression.html#on-the-shoulders-of-giants"><i class="fa fa-check"></i><b>10.5</b> On the Shoulders of Giants</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="10.6" data-path="references.html"><a href="references.html#resources"><i class="fa fa-check"></i><b>10.6</b> Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://marco-kuehne.com/" target="blank">Visit my personal page</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Becoming Fluent in Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<br>
<div class = infobox>
This book is <b>Work in Progress</b>. I appreciate your feedback to make the book better.
</div>
<div id="web-data" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Web Data<a href="web-data.html#web-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>“Over the last two years alone, 90 percent of the data in the world was generated.”</b></p>
<footer>
Bernard Marr (2018) <em>How Much Data Do We Create Every Day? The Mind-Blowing Stats Everyone Should Read</em> <a href="https://www.forbes.com/sites/bernardmarr/2018/05/21/how-much-data-do-we-create-every-day-the-mind-blowing-stats-everyone-should-read/#4472289660ba" target="_blank">Forbes.</a>
</footer>
</blockquote>
<p><strong>Data scraping</strong> is a technique where a computer program extracts data from human-readable output coming from another program. Data scraping often takes place in <strong>web scraping</strong> (also known as crawling or spidering). In this process, an application is used to extract valuable information from a website. <strong>PDF scraping</strong> or more general <strong>report mining</strong> is the extraction of data from human-readable computer reports. It is worth considering alternatives before start scraping data.<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a></p>
<div id="most-expensive-paintings" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Most expensive paintings<a href="web-data.html#most-expensive-paintings" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What do The Card Players and Marshall Islands have in common?</p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-89"></span><span style="display:block;" id="fig:unnamed-chunk-90"></span>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Les_Joueurs_de_cartes%2C_par_Paul_C%C3%A9zanne%2C_collection_Al-Thani%2C_Yorck.jpg/800px-Les_Joueurs_de_cartes%2C_par_Paul_C%C3%A9zanne%2C_collection_Al-Thani%2C_Yorck.jpg" alt="\label{fig:Player} The Card Players." width="100%" />
<p class="caption">
Figure 6.1:  The Card Players.
</p>
</div>
<!-- <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Les_Joueurs_de_cartes%2C_par_Paul_C%C3%A9zanne%2C_collection_Al-Thani%2C_Yorck.jpg/800px-Les_Joueurs_de_cartes%2C_par_Paul_C%C3%A9zanne%2C_collection_Al-Thani%2C_Yorck.jpg" height="250"> -->
</div><div class="column" style="width:10%;">
<p> 
<!-- an empty Div (with a white space), serving as
a column separator --></p>
</div><div class="figure" style="text-align: center">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Flag_of_the_Marshall_Islands.svg/180px-Flag_of_the_Marshall_Islands.svg.png" alt="\label{fig:Masrshall} Flag of Marshall Islands." width="100%" />
<p class="caption">
Figure 6.2:  Flag of Marshall Islands.
</p>
</div><!-- <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Flag_of_the_Marshall_Islands.svg/180px-Flag_of_the_Marshall_Islands.svg.png" height="250"> -->
</div>
<p>Well, the first was sold for about 250.000.000 million USD in an auction in 2011 and the laters nominal gross domestic product is of similar size 220.000.000 million USD in 2019. About 60.000 people live in Marshall Islands. The most expensive paintings score similar to the gross domestic product of insular states.</p>
<p>This is the English Wikipedia article <a href="https://en.wikipedia.org/wiki/List_of_most_expensive_paintings#List_of_highest_prices_paid">list of highest prices ever paid for paintings</a>.</p>
<p>In a web browser use the keyboard shortcut <code>CTRL + U</code> (in Google Chrome, Firefox, Microsoft Edge, Opera) to view the source code of a webpage. Alternatively, right click and choose "show source code".</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="web-data.html#cb53-1" tabindex="-1"></a>  border<span class="sc">:</span>1px solid black;</span></code></pre></div>
<p>One approach is this. Use <code>read_html()</code> from <code>rvest</code> package to download the webpage. Extract the node <code>table.wikitable</code> with the <code>html_nodes()</code> command. Convert this node into a table with <code>html_table()</code> setting <code>header=TRUE</code>. Use this data in a pipe <code>%&gt;%</code> with <code>bind_rows()</code> and <code>as_tibble()</code>.</p>
<p>You can use any other scraping approach.</p>
<p>Store the final table of expensive paintings in <code>paintings</code>. The following <code>DT</code> table should yield identical results.</p>
</div>
<div id="student-numbers-at-viadrina" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Student numbers at Viadrina<a href="web-data.html#student-numbers-at-viadrina" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Did you notice less and less fellow students sitting next to you? We analyse enrollment numbers of Viadrina European University. <em>Dezernat 1</em> administers and publishes student statistics. There is an overview page where they provide some time series data (overall student numbers from 1992 to 2020) and the number of study programs (between 1992 to 2014).</p>
<p>Information is presented in two ways, as <strong>tables in PDF</strong>, e.g. the time series on total student numbers:<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a></p>
<!-- <https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf> -->
<!-- <https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Anzahl-der-Studiengaenge.pdf> -->
<object data="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf" width="800" height="500">
</object>
<p>And as <strong>tables in HTML</strong>. For each semester there is summary information on the webpage (and more comprehensive data in PDF), like for winter term 2022/2023:</p>
<p>Most web browser allow to inspect the html source:</p>
<p><a href="view-source:https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2022-wintersemester/index.html" class="uri">view-source:https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2022-wintersemester/index.html</a></p>
<p>When you search for a characteristic value like <code>4.797</code> it shows:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb54-1"><a href="web-data.html#cb54-1" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;zeile&quot;</span><span class="kw">&gt;&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;dreispaltig&quot;</span><span class="kw">&gt;</span></span>
<span id="cb54-2"><a href="web-data.html#cb54-2" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;text&quot;</span><span class="kw">&gt;</span></span>
<span id="cb54-3"><a href="web-data.html#cb54-3" tabindex="-1"></a><span class="kw">&lt;table&gt;</span></span>
<span id="cb54-4"><a href="web-data.html#cb54-4" tabindex="-1"></a><span class="kw">&lt;tbody&gt;</span></span>
<span id="cb54-5"><a href="web-data.html#cb54-5" tabindex="-1"></a><span class="kw">&lt;tr&gt;</span></span>
<span id="cb54-6"><a href="web-data.html#cb54-6" tabindex="-1"></a><span class="kw">&lt;td</span> <span class="er">style</span><span class="ot">=</span><span class="st">&quot;width: 400px;&quot;</span><span class="kw">&gt;</span>Studierende gesamt<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-7"><a href="web-data.html#cb54-7" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>4.797<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-8"><a href="web-data.html#cb54-8" tabindex="-1"></a><span class="kw">&lt;/tr&gt;</span></span>
<span id="cb54-9"><a href="web-data.html#cb54-9" tabindex="-1"></a><span class="kw">&lt;tr&gt;</span></span>
<span id="cb54-10"><a href="web-data.html#cb54-10" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>weiblich<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-11"><a href="web-data.html#cb54-11" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>2.785<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-12"><a href="web-data.html#cb54-12" tabindex="-1"></a><span class="kw">&lt;/tr&gt;</span></span>
<span id="cb54-13"><a href="web-data.html#cb54-13" tabindex="-1"></a><span class="kw">&lt;tr&gt;</span></span>
<span id="cb54-14"><a href="web-data.html#cb54-14" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>m<span class="dv">&amp;auml;</span>nnlich<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-15"><a href="web-data.html#cb54-15" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>2.012<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-16"><a href="web-data.html#cb54-16" tabindex="-1"></a><span class="kw">&lt;/tr&gt;</span></span>
<span id="cb54-17"><a href="web-data.html#cb54-17" tabindex="-1"></a><span class="kw">&lt;tr&gt;</span></span>
<span id="cb54-18"><a href="web-data.html#cb54-18" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>Deutsche<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-19"><a href="web-data.html#cb54-19" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>3.201<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-20"><a href="web-data.html#cb54-20" tabindex="-1"></a><span class="kw">&lt;/tr&gt;</span></span>
<span id="cb54-21"><a href="web-data.html#cb54-21" tabindex="-1"></a><span class="kw">&lt;tr&gt;</span></span>
<span id="cb54-22"><a href="web-data.html#cb54-22" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>Ausl<span class="dv">&amp;auml;</span>nder/innen<span class="kw">&lt;/td&gt;</span></span>
<span id="cb54-23"><a href="web-data.html#cb54-23" tabindex="-1"></a><span class="kw">&lt;td&gt;</span>1.596<span class="kw">&lt;/td&gt;</span></span></code></pre></div>
<p>Let's investigate the student numbers.</p>
<div id="pdf-scraping" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> PDF scraping<a href="web-data.html#pdf-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- https://www.dataquest.io/blog/web-scraping-in-r-rvest/ -->
<!-- https://www.r-bloggers.com/2019/09/pdf-scraping-in-r-with-tabulizer/ -->
<!-- https://www.brodrigues.co/blog/2018-06-10-scraping_pdfs/-->
<!-- https://blog.az.sg/posts/reading-pdfs-in-r/ -->
<!-- https://tabula.technology/ -->
<!-- https://cran.r-hub.io/web/packages/tabulizer/vignettes/tabulizer.html -->
<!-- https://crimebythenumbers.com/scrape-table.html -->
<!-- https://academy.datawrapper.de/article/135-how-to-extract-data-out-of-pdfs -->
<!-- pdftools difficult -->
<!-- tabulizer offline -->
<!-- https://www.europa-uni.de/de/ueber_uns/zahlen_fakten/index.html -->
<!-- https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2022-Sommersemester/Uebersicht.pdf -->
<!-- https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf -->
<p>Apply a programmatic way to download a PDF Use the built in <code>download.file()</code> function and specify an url and a destination and file name.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="web-data.html#cb55-1" tabindex="-1"></a><span class="co"># Set URL for PDF </span></span>
<span id="cb55-2"><a href="web-data.html#cb55-2" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf&quot;</span></span>
<span id="cb55-3"><a href="web-data.html#cb55-3" tabindex="-1"></a><span class="co"># Specify destination where file should be saved (and name)</span></span>
<span id="cb55-4"><a href="web-data.html#cb55-4" tabindex="-1"></a>destfile <span class="ot">&lt;-</span> <span class="st">&quot;data/Viadrina/Gesamtstudierendenzahl.pdf&quot;</span></span>
<span id="cb55-5"><a href="web-data.html#cb55-5" tabindex="-1"></a><span class="co"># Apply download.file function in R</span></span>
<span id="cb55-6"><a href="web-data.html#cb55-6" tabindex="-1"></a><span class="fu">download.file</span>(url, destfile, <span class="at">mode =</span> <span class="st">&quot;wb&quot;</span>)</span></code></pre></div>
<!-- https://www.youtube.com/watch?v=jfBZzuDMN0o -->
<p>To extract a table from a PDF we use the <code>pdftables</code> package.<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a> The package is a wrapper for the <strong>PDFTables API</strong>. It requires an API key from <a href="https://pdftables.com/" class="uri">https://pdftables.com/</a>. You can register and get one for free. The result is stored as <code>.csv</code> file.</p>
<div class="defbox">
<div class="titeldefbox">
<h2>
Definition
</h2>
</div>
<p>An <strong>application programming interface (API)</strong> is a way for two or more computer programs to communicate with each other. It is a type of software interface, offering a service to other pieces of software.</p>
</div>
<p>Be careful with your API keys. If you only use a file locally on your computer, you might be fine. Don't share this file. Don't upload it. If you upload an API key on GIT, you get a notification mail from <a href="https://www.gitguardian.com/" class="uri">https://www.gitguardian.com/</a>. Instead, put your API in your environment. This can be done by a .Renviron file. Use <code>usethis::edit_r_environ(scope = "project")</code> in order to access and edit your information. 50 pages are for free.</p>
<p>Read more
* <a href="https://daattali.gitbooks.io/stat545-ubc-github-io/content/bit003_api-key-env-var.html" class="uri">https://daattali.gitbooks.io/stat545-ubc-github-io/content/bit003_api-key-env-var.html</a>
* <a href="https://resources.numbat.space/using-rprofile-and-renviron.html" class="uri">https://resources.numbat.space/using-rprofile-and-renviron.html</a>
* <a href="https://github.com/expersso/pdftables" class="uri">https://github.com/expersso/pdftables</a></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="web-data.html#cb56-1" tabindex="-1"></a><span class="cn">NA</span></span></code></pre></div>
<p>Scraped data often requires a lot of cleaning.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="web-data.html#cb57-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb57-2"><a href="web-data.html#cb57-2" tabindex="-1"></a><span class="co"># read csv file</span></span>
<span id="cb57-3"><a href="web-data.html#cb57-3" tabindex="-1"></a>viadrina_1992_2020_before <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/Viadrina/viadrina_students.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-4"><a href="web-data.html#cb57-4" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020_before</span>
<span id="cb57-5"><a href="web-data.html#cb57-5" tabindex="-1"></a><span class="co"># replace header names by first row</span></span>
<span id="cb57-6"><a href="web-data.html#cb57-6" tabindex="-1"></a><span class="fu">names</span>(viadrina_1992_2020) <span class="ot">&lt;-</span> viadrina_1992_2020[<span class="dv">1</span>,]</span>
<span id="cb57-7"><a href="web-data.html#cb57-7" tabindex="-1"></a><span class="co"># drop first row</span></span>
<span id="cb57-8"><a href="web-data.html#cb57-8" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020[<span class="sc">-</span><span class="dv">1</span>,] </span>
<span id="cb57-9"><a href="web-data.html#cb57-9" tabindex="-1"></a><span class="co"># drop last row</span></span>
<span id="cb57-10"><a href="web-data.html#cb57-10" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020[<span class="sc">-</span><span class="dv">30</span>,] </span>
<span id="cb57-11"><a href="web-data.html#cb57-11" tabindex="-1"></a><span class="co"># remove all \n</span></span>
<span id="cb57-12"><a href="web-data.html#cb57-12" tabindex="-1"></a><span class="fu">colnames</span>(viadrina_1992_2020) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[</span><span class="sc">\r\n</span><span class="st">]&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="fu">colnames</span>(viadrina_1992_2020)) </span>
<span id="cb57-13"><a href="web-data.html#cb57-13" tabindex="-1"></a><span class="co"># readable column names</span></span>
<span id="cb57-14"><a href="web-data.html#cb57-14" tabindex="-1"></a><span class="fu">colnames</span>(viadrina_1992_2020) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Total&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Female_Pct&quot;</span>, </span>
<span id="cb57-15"><a href="web-data.html#cb57-15" tabindex="-1"></a>                        <span class="st">&quot;German&quot;</span>, <span class="st">&quot;German_Pct&quot;</span>, <span class="st">&quot;Foreign&quot;</span>, <span class="st">&quot;Foreign_Pct&quot;</span>,</span>
<span id="cb57-16"><a href="web-data.html#cb57-16" tabindex="-1"></a>                        <span class="st">&quot;Pole&quot;</span>, <span class="st">&quot;Pole_Pct&quot;</span>)</span>
<span id="cb57-17"><a href="web-data.html#cb57-17" tabindex="-1"></a></span>
<span id="cb57-18"><a href="web-data.html#cb57-18" tabindex="-1"></a><span class="co"># remove percentage sign </span></span>
<span id="cb57-19"><a href="web-data.html#cb57-19" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020 <span class="sc">%&gt;%</span>  </span>
<span id="cb57-20"><a href="web-data.html#cb57-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(.x, <span class="st">&quot;%&quot;</span>),</span>
<span id="cb57-21"><a href="web-data.html#cb57-21" tabindex="-1"></a>                                       <span class="fu">parse_number</span>(.x) <span class="sc">/</span> <span class="dv">10</span>, </span>
<span id="cb57-22"><a href="web-data.html#cb57-22" tabindex="-1"></a>                                       .x)))</span>
<span id="cb57-23"><a href="web-data.html#cb57-23" tabindex="-1"></a></span>
<span id="cb57-24"><a href="web-data.html#cb57-24" tabindex="-1"></a><span class="co"># convert all chr to numeric</span></span>
<span id="cb57-25"><a href="web-data.html#cb57-25" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020 <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character,as.numeric)</span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="web-data.html#cb58-1" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb58-2"><a href="web-data.html#cb58-2" tabindex="-1"></a><span class="fu">datatable</span>(viadrina_1992_2020)</span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-47efb2710f4b56df4ee7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-47efb2710f4b56df4ee7">{"x":{"filter":"none","vertical":false,"data":[["2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],[1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],[472,997,1443,1810,2321,2835,3132,3451,3802,4170,4549,5094,5110,5093,5001,5145,5587,6194,6452,6506,6716,6645,6492,6501,6647,6542,6461,6020,5586],[236,546,724,949,1242,1584,1841,2057,2308,2559,2080,3214,3228,3221,3168,3222,3499,3833,4064,4096,4269,4206,4098,4073,4143,4018,3922,3607,3285],[50,54.8,50.2,52.4,53.5,55.9,58.8,59.6,60.7,61.4,45.7,63.1,63.2,63.2,63.3,62.6,62.6,61.9,63,63,63.6,63.3,63.1,62.7,62.3,61.4,60.7,59.9,58.8],[325,598,841,1030,1348,1662,1824,2048,2226,2393,2617,3056,3244,3344,3332,3633,4120,4682,4965,4958,5145,5001,4843,4861,4960,4931,4875,4413,4083],[68.90000000000001,60,58.3,56.9,58.1,58.6,58.2,59.3,58.5,57.4,57.5,60,63.5,65.7,66.59999999999999,70.59999999999999,73.7,75.59999999999999,77,76.2,76.59999999999999,75.3,74.59999999999999,74.8,74.59999999999999,75.40000000000001,75.5,73.3,73.09999999999999],[169,399,602,780,973,1173,1308,1403,1576,1777,1932,2038,1866,1748,1669,1512,1467,1512,1487,1548,1571,1644,1649,1640,1687,1611,1586,1607,1503],[35.8,40,41.7,43.1,41.9,41.4,41.8,40.7,41.5,42.6,42.5,40,36.5,34.3,33.4,29.4,26.3,24.4,23,23.8,23.4,24.7,25.4,25.2,25.4,24.6,24.5,26.7,26.9],[167,384,566,731,883,1053,1179,1247,1364,1440,1512,1547,1331,1245,1190,1027,960,897,687,755,726,695,641,621,582,503,437,379,353],[35.4,38.5,39.2,40.4,38,37.1,37.6,36.1,35.9,34.5,33.2,30.4,26,24.4,23.8,20,17.2,14.5,10.6,11.6,10.8,10.5,9.9,9.6,8.800000000000001,7.7,6.8,6.3,6.3]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year<\/th>\n      <th>Total<\/th>\n      <th>Female<\/th>\n      <th>Female_Pct<\/th>\n      <th>German<\/th>\n      <th>German_Pct<\/th>\n      <th>Foreign<\/th>\n      <th>Foreign_Pct<\/th>\n      <th>Pole<\/th>\n      <th>Pole_Pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Year","targets":1},{"name":"Total","targets":2},{"name":"Female","targets":3},{"name":"Female_Pct","targets":4},{"name":"German","targets":5},{"name":"German_Pct","targets":6},{"name":"Foreign","targets":7},{"name":"Foreign_Pct","targets":8},{"name":"Pole","targets":9},{"name":"Pole_Pct","targets":10}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="share-of-female-students" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Share of female students<a href="web-data.html#share-of-female-students" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The share of female students over time in a line plot.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="web-data.html#cb59-1" tabindex="-1"></a>viadrina_1992_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="web-data.html#cb59-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Year)) <span class="sc">+</span></span>
<span id="cb59-3"><a href="web-data.html#cb59-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">colour =</span> <span class="st">&quot;Total&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb59-4"><a href="web-data.html#cb59-4" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Female, <span class="at">colour =</span> <span class="st">&quot;Female&quot;</span>)) <span class="sc">+</span></span>
<span id="cb59-5"><a href="web-data.html#cb59-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Student numbers at Viadrina&quot;</span>,</span>
<span id="cb59-6"><a href="web-data.html#cb59-6" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Share of female students&quot;</span>)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-100-1.png" width="576" /></p>
</div>
<div id="share-of-foreign-students" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Share of foreign students<a href="web-data.html#share-of-foreign-students" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The share of foreign students over time in a stacked barplot.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="web-data.html#cb60-1" tabindex="-1"></a>viadrina_1992_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="web-data.html#cb60-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Year)) <span class="sc">+</span></span>
<span id="cb60-3"><a href="web-data.html#cb60-3" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">fill =</span> <span class="st">&quot;Total&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb60-4"><a href="web-data.html#cb60-4" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> German, <span class="at">fill =</span> <span class="st">&quot;German&quot;</span>)) <span class="sc">+</span></span>
<span id="cb60-5"><a href="web-data.html#cb60-5" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> Foreign, <span class="at">fill =</span> <span class="st">&quot;Foreign&quot;</span>)) <span class="sc">+</span></span>
<span id="cb60-6"><a href="web-data.html#cb60-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Student numbers at Viadrina&quot;</span>,</span>
<span id="cb60-7"><a href="web-data.html#cb60-7" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Share of foreign students&quot;</span>)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-101-1.png" width="576" /></p>
</div>
<div id="web-scraping" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Web scraping<a href="web-data.html#web-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To get more recent numbers, we rely on the webpage information. How can we access all semester data? Investigate the pattern of the URLs.</p>
<p><small></p>
<ul>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2013-Wintersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2013-Wintersemester/index.html</a></li>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2014-Sommersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2014-Sommersemester/index.html</a></li>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2014-Wintersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2014-Wintersemester/index.html</a></li>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2015-Sommersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2015-Sommersemester/index.html</a></li>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2015-wintersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2015-wintersemester/index.html</a></li>
</ul>
<p></small></p>
<p>Usually the pattern is <code>year-semester</code>. Some winter semesters are capitalized, some are not (<code>Wintersemester</code> vs. <code>wintersemester</code>). We use the <code>rvest</code> package to web scrape static html content. It always starts with reading in the html data. Then pipe and use <code>html_table()</code> to extract tabular information (lucky us, there is only one table).</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="web-data.html#cb61-1" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb61-2"><a href="web-data.html#cb61-2" tabindex="-1"></a><span class="fu">read_html</span>(<span class="st">&quot;https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2013-Wintersemester/index.html&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="web-data.html#cb61-3" tabindex="-1"></a>  <span class="fu">html_table</span>() </span>
<span id="cb61-4"><a href="web-data.html#cb61-4" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb61-5"><a href="web-data.html#cb61-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7 × 2</span></span>
<span id="cb61-6"><a href="web-data.html#cb61-6" tabindex="-1"></a><span class="co">#&gt;   X1                      X2</span></span>
<span id="cb61-7"><a href="web-data.html#cb61-7" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                &lt;int&gt;</span></span>
<span id="cb61-8"><a href="web-data.html#cb61-8" tabindex="-1"></a><span class="co">#&gt; 1 Studierende gesamt    6645</span></span>
<span id="cb61-9"><a href="web-data.html#cb61-9" tabindex="-1"></a><span class="co">#&gt; 2 weiblich              4206</span></span>
<span id="cb61-10"><a href="web-data.html#cb61-10" tabindex="-1"></a><span class="co">#&gt; 3 männlich              2439</span></span>
<span id="cb61-11"><a href="web-data.html#cb61-11" tabindex="-1"></a><span class="co">#&gt; 4 Deutsche              5001</span></span>
<span id="cb61-12"><a href="web-data.html#cb61-12" tabindex="-1"></a><span class="co">#&gt; 5 Ausländer/innen       1644</span></span>
<span id="cb61-13"><a href="web-data.html#cb61-13" tabindex="-1"></a><span class="co">#&gt; 6 1. Fachsemester       1783</span></span>
<span id="cb61-14"><a href="web-data.html#cb61-14" tabindex="-1"></a><span class="co">#&gt; 7 1. Hochschulsemester  1110</span></span></code></pre></div>
<p>Now, we would like to do this for every subpage (semester) and combine the data in one table. Focus on the variable component in the URL and create a vector of all semesters.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="web-data.html#cb62-1" tabindex="-1"></a><span class="co"># the manual way</span></span>
<span id="cb62-2"><a href="web-data.html#cb62-2" tabindex="-1"></a>winters <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from=</span><span class="dv">2013</span>, <span class="at">to=</span><span class="dv">2022</span>)</span>
<span id="cb62-3"><a href="web-data.html#cb62-3" tabindex="-1"></a>summers <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from=</span><span class="dv">2014</span>, <span class="at">to=</span><span class="dv">2023</span>)</span>
<span id="cb62-4"><a href="web-data.html#cb62-4" tabindex="-1"></a>winters <span class="ot">&lt;-</span> <span class="fu">paste0</span>(winters, <span class="st">&quot;-wintersemester&quot;</span>)</span>
<span id="cb62-5"><a href="web-data.html#cb62-5" tabindex="-1"></a>summers <span class="ot">&lt;-</span> <span class="fu">paste0</span>(summers, <span class="st">&quot;-Sommersemester&quot;</span>)</span>
<span id="cb62-6"><a href="web-data.html#cb62-6" tabindex="-1"></a></span>
<span id="cb62-7"><a href="web-data.html#cb62-7" tabindex="-1"></a>all_terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rbind</span>(winters, summers))</span>
<span id="cb62-8"><a href="web-data.html#cb62-8" tabindex="-1"></a>all_terms[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;2013-Wintersemester&quot;</span></span>
<span id="cb62-9"><a href="web-data.html#cb62-9" tabindex="-1"></a>all_terms[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;2014-Wintersemester&quot;</span></span>
<span id="cb62-10"><a href="web-data.html#cb62-10" tabindex="-1"></a></span>
<span id="cb62-11"><a href="web-data.html#cb62-11" tabindex="-1"></a><span class="co"># we can paste them together</span></span>
<span id="cb62-12"><a href="web-data.html#cb62-12" tabindex="-1"></a>all_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/&quot;</span>, all_terms, <span class="st">&quot;/index.html&quot;</span>)</span></code></pre></div>
<p>Create a <code>for</code> loop to repeat the <code>rvest</code> procedure for each element in the URL list.</p>
<div class="defbox">
<div class="titeldefbox">
<h2>
Definition
</h2>
</div>
<p>A <strong>loop</strong> is a programming structure that repeats a sequence of instructions until a specific condition is met.</p>
</div>
<p>There are two more components. We initialize a <code>list</code> to store each iteration of the loop.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="web-data.html#cb63-1" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb63-2"><a href="web-data.html#cb63-2" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb63-3"><a href="web-data.html#cb63-3" tabindex="-1"></a></span>
<span id="cb63-4"><a href="web-data.html#cb63-4" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(all_url)){</span>
<span id="cb63-5"><a href="web-data.html#cb63-5" tabindex="-1"></a>  table <span class="ot">&lt;-</span> all_url[i] <span class="sc">%&gt;%</span> </span>
<span id="cb63-6"><a href="web-data.html#cb63-6" tabindex="-1"></a>    <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb63-7"><a href="web-data.html#cb63-7" tabindex="-1"></a>    <span class="fu">html_table</span>()</span>
<span id="cb63-8"><a href="web-data.html#cb63-8" tabindex="-1"></a></span>
<span id="cb63-9"><a href="web-data.html#cb63-9" tabindex="-1"></a>  tables[index] <span class="ot">&lt;-</span> table</span>
<span id="cb63-10"><a href="web-data.html#cb63-10" tabindex="-1"></a>  index <span class="ot">&lt;-</span> index <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb63-11"><a href="web-data.html#cb63-11" tabindex="-1"></a>}</span>
<span id="cb63-12"><a href="web-data.html#cb63-12" tabindex="-1"></a></span>
<span id="cb63-13"><a href="web-data.html#cb63-13" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">&quot;cbind&quot;</span>, tables)</span></code></pre></div>
<p>More and more cleaning.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="web-data.html#cb64-1" tabindex="-1"></a>df[,<span class="fu">c</span>(<span class="fu">seq</span>(<span class="at">from=</span><span class="dv">3</span>, <span class="at">to=</span><span class="dv">40</span> , <span class="at">by=</span><span class="dv">2</span>))] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb64-2"><a href="web-data.html#cb64-2" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Variable&quot;</span>, all_terms)</span>
<span id="cb64-3"><a href="web-data.html#cb64-3" tabindex="-1"></a><span class="co"># transpose dataframe</span></span>
<span id="cb64-4"><a href="web-data.html#cb64-4" tabindex="-1"></a>viadrina_2013_2023 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(df))</span>
<span id="cb64-5"><a href="web-data.html#cb64-5" tabindex="-1"></a><span class="co"># replace header names by first row</span></span>
<span id="cb64-6"><a href="web-data.html#cb64-6" tabindex="-1"></a><span class="fu">names</span>(viadrina_2013_2023) <span class="ot">&lt;-</span> viadrina_2013_2023[<span class="dv">1</span>,]</span>
<span id="cb64-7"><a href="web-data.html#cb64-7" tabindex="-1"></a><span class="co"># drop first row</span></span>
<span id="cb64-8"><a href="web-data.html#cb64-8" tabindex="-1"></a>viadrina_2013_2023 <span class="ot">&lt;-</span> viadrina_2013_2023[<span class="sc">-</span><span class="dv">1</span>,] </span></code></pre></div>
<p>Once more, there are slightly different formats for numbers in winter term 2019, 2020 and 2021. In these terms they use a <code>.</code> for digit grouping, e.g. <code>3.607</code> instead of <code>3607</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="web-data.html#cb65-1" tabindex="-1"></a><span class="co"># all chr to numeric</span></span>
<span id="cb65-2"><a href="web-data.html#cb65-2" tabindex="-1"></a><span class="co"># viadrina_2013_2022 &lt;- viadrina_2013_2022 %&gt;% mutate_if(is.character,parse_number)</span></span>
<span id="cb65-3"><a href="web-data.html#cb65-3" tabindex="-1"></a><span class="co">#viadrina_2013_2022 &lt;- viadrina_2013_2022 %&gt;% mutate_if(is.character,as_numeric)</span></span>
<span id="cb65-4"><a href="web-data.html#cb65-4" tabindex="-1"></a>viadrina_2013_2023 <span class="ot">&lt;-</span> viadrina_2013_2023 <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character,as.numeric)</span>
<span id="cb65-5"><a href="web-data.html#cb65-5" tabindex="-1"></a></span>
<span id="cb65-6"><a href="web-data.html#cb65-6" tabindex="-1"></a><span class="co"># row 13, 15, 17, columns 1 to 6, multiply by 1000</span></span>
<span id="cb65-7"><a href="web-data.html#cb65-7" tabindex="-1"></a>viadrina_2013_2023[<span class="fu">c</span>(<span class="dv">13</span>,<span class="dv">15</span>,<span class="dv">17</span>,<span class="dv">19</span>), <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)] <span class="ot">&lt;-</span> viadrina_2013_2023[<span class="fu">c</span>(<span class="dv">13</span>,<span class="dv">15</span>,<span class="dv">17</span>,<span class="dv">19</span>), <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)] <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb65-8"><a href="web-data.html#cb65-8" tabindex="-1"></a></span>
<span id="cb65-9"><a href="web-data.html#cb65-9" tabindex="-1"></a><span class="co"># round all numbers</span></span>
<span id="cb65-10"><a href="web-data.html#cb65-10" tabindex="-1"></a><span class="co"># viadrina_2013_2022 &lt;- viadrina_2013_2022 %&gt;% mutate_if(is.numeric, round)</span></span>
<span id="cb65-11"><a href="web-data.html#cb65-11" tabindex="-1"></a></span>
<span id="cb65-12"><a href="web-data.html#cb65-12" tabindex="-1"></a><span class="co"># multiply some rows by 1000</span></span>
<span id="cb65-13"><a href="web-data.html#cb65-13" tabindex="-1"></a><span class="co"># viadrina_2013_2022[c(13,15,17),] &lt;- viadrina_2013_2022[c(13,15,17),] %&gt;% </span></span>
<span id="cb65-14"><a href="web-data.html#cb65-14" tabindex="-1"></a><span class="co">#   mutate_all(.funs = funs(. * 1000))</span></span>
<span id="cb65-15"><a href="web-data.html#cb65-15" tabindex="-1"></a></span>
<span id="cb65-16"><a href="web-data.html#cb65-16" tabindex="-1"></a><span class="co"># fix last column and divide by 1000</span></span>
<span id="cb65-17"><a href="web-data.html#cb65-17" tabindex="-1"></a><span class="co"># viadrina_2013_2022[c(13,15,17),7] &lt;- viadrina_2013_2022[c(13,15,17),7]/1000</span></span>
<span id="cb65-18"><a href="web-data.html#cb65-18" tabindex="-1"></a></span>
<span id="cb65-19"><a href="web-data.html#cb65-19" tabindex="-1"></a><span class="co"># create a semester variable</span></span>
<span id="cb65-20"><a href="web-data.html#cb65-20" tabindex="-1"></a>viadrina_2013_2023<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">substr</span>(all_terms, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)</span>
<span id="cb65-21"><a href="web-data.html#cb65-21" tabindex="-1"></a>viadrina_2013_2023<span class="sc">$</span>term <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;summer&quot;</span>), <span class="dv">10</span>)</span>
<span id="cb65-22"><a href="web-data.html#cb65-22" tabindex="-1"></a>viadrina_2013_2023<span class="sc">$</span>semester <span class="ot">&lt;-</span> <span class="fu">paste0</span>(viadrina_2013_2023<span class="sc">$</span>year, <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;-02&quot;</span>, <span class="st">&quot;-01&quot;</span>), <span class="dv">10</span>))</span>
<span id="cb65-23"><a href="web-data.html#cb65-23" tabindex="-1"></a><span class="co"># row names</span></span>
<span id="cb65-24"><a href="web-data.html#cb65-24" tabindex="-1"></a><span class="fu">rownames</span>(viadrina_2013_2023) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(viadrina_2013_2023) </span></code></pre></div>
</div>
<div id="most-recent-student-numbers" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> Most recent student numbers<a href="web-data.html#most-recent-student-numbers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There is a structural difference between summer and winter term. Most new enrollments are in winter.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="web-data.html#cb66-1" tabindex="-1"></a>viadrina_2013_2023 <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="web-data.html#cb66-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>semester, <span class="at">y =</span> <span class="st">`</span><span class="at">Studierende gesamt</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb66-3"><a href="web-data.html#cb66-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col=</span>term), <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb66-4"><a href="web-data.html#cb66-4" tabindex="-1"></a>  <span class="co">#geom_point(aes(y = `Studierende gesamt`, fill = &quot;Total&quot;)) + </span></span>
<span id="cb66-5"><a href="web-data.html#cb66-5" tabindex="-1"></a>  <span class="co">#geom_point(aes(y = `1. Fachsemester`, fill = &quot;First years&quot;)) +</span></span>
<span id="cb66-6"><a href="web-data.html#cb66-6" tabindex="-1"></a>  <span class="co">#geom_point(aes(y = `1. Hochschulsemester`, fill = &quot;First sem&quot;)) +</span></span>
<span id="cb66-7"><a href="web-data.html#cb66-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Student numbers at Viadrina&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-8"><a href="web-data.html#cb66-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-107-1.png" width="576" /></p>
</div>
<div id="the-long-run-trend" class="section level3 hasAnchor" number="6.2.6">
<h3><span class="header-section-number">6.2.6</span> The long run trend<a href="web-data.html#the-long-run-trend" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Combine old and new data.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="web-data.html#cb67-1" tabindex="-1"></a>via_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="web-data.html#cb67-2" tabindex="-1"></a>  <span class="fu">select</span>(Year, Total) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="web-data.html#cb67-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Term =</span> <span class="st">&quot;winter&quot;</span>)</span>
<span id="cb67-4"><a href="web-data.html#cb67-4" tabindex="-1"></a></span>
<span id="cb67-5"><a href="web-data.html#cb67-5" tabindex="-1"></a>via_2013_2023 <span class="ot">&lt;-</span> viadrina_2013_2023 <span class="sc">%&gt;%</span> </span>
<span id="cb67-6"><a href="web-data.html#cb67-6" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Year =</span> year, <span class="at">Term =</span> term, <span class="at">Total =</span> <span class="st">`</span><span class="at">Studierende gesamt</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-7"><a href="web-data.html#cb67-7" tabindex="-1"></a>  <span class="fu">select</span>(Year, Total, Term)</span>
<span id="cb67-8"><a href="web-data.html#cb67-8" tabindex="-1"></a></span>
<span id="cb67-9"><a href="web-data.html#cb67-9" tabindex="-1"></a>via_1992_2023 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(via_1992_2020, via_2013_2023)</span>
<span id="cb67-10"><a href="web-data.html#cb67-10" tabindex="-1"></a>via_1992_2023<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(via_1992_2023<span class="sc">$</span>Year)</span></code></pre></div>
<p>Plot and polish. Assume the enrollment for winter 2020/2021 was not affected by Corona virus.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="web-data.html#cb68-1" tabindex="-1"></a>via_1992_2023 <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="web-data.html#cb68-2" tabindex="-1"></a>  <span class="co">#filter(Term == &quot;winter&quot;) %&gt;% </span></span>
<span id="cb68-3"><a href="web-data.html#cb68-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span>Total, <span class="at">col =</span> Term)) <span class="sc">+</span></span>
<span id="cb68-4"><a href="web-data.html#cb68-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;gam&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-5"><a href="web-data.html#cb68-5" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">28</span>)) <span class="sc">+</span></span>
<span id="cb68-6"><a href="web-data.html#cb68-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Student numbers at Viadrina&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-7"><a href="web-data.html#cb68-7" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb68-8"><a href="web-data.html#cb68-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb68-9"><a href="web-data.html#cb68-9" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fl">2020.5</span>, <span class="at">colour=</span><span class="st">&quot;grey&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="at">lwd =</span> <span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb68-10"><a href="web-data.html#cb68-10" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2021</span>, <span class="at">y=</span><span class="dv">4000</span>, <span class="at">label=</span><span class="st">&quot;Corona&quot;</span>), <span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">angle=</span><span class="dv">90</span>, <span class="at">vjust =</span> <span class="dv">1</span>)  </span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-109-1.png" width="576" /></p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="12">
<li id="fn12"><p>(1) Look for a download button. (2) Search same or similar data somewhere else. (3) Check if there is an API. (4) Ask the website owner for the data.<a href="web-data.html#fnref12" class="footnote-back">↩︎</a></p></li>
<li id="fn13"><p>Get the PDF <a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf</a><a href="web-data.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p>You may use other free services. Search for <em>Online converter PDF to csv/xlsx</em><a href="web-data.html#fnref14" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="time-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geo-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Becoming Fluent In Data.pdf", "Becoming Fluent In Data.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": false
},
"toc_depth": 1,
"toc-title": "Table of Contents",
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
