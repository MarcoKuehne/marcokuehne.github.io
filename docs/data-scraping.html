<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Data Scraping | Becoming Fluent in Data</title>
  <meta name="description" content="A guide to become fluent in data." />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Data Scraping | Becoming Fluent in Data" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/Cover.png" />
  <meta property="og:description" content="A guide to become fluent in data." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Data Scraping | Becoming Fluent in Data" />
  
  <meta name="twitter:description" content="A guide to become fluent in data." />
  <meta name="twitter:image" content="/images/Cover.png" />

<meta name="author" content="Marco Kühne" />


<meta name="date" content="2023-02-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/Logo.ico" type="image/x-icon" />
<link rel="prev" href="panel-data.html"/>
<link rel="next" href="text-mining.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/tippyjs-3.2.0/themes/google.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/light-border.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/light.css" rel="stylesheet" />
<link href="libs/tippyjs-3.2.0/themes/translucent.css" rel="stylesheet" />
<script src="libs/tippyjs-3.2.0/tippy.all.min.js"></script>
<script src="libs/tippy-binding-0.1.0/tippy.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.26/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<script type="application/json" class="js-hypothesis-config">
{
"showHighlights": false
}
</script>
<script async defer src="https://hypothes.is/embed.js"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P9BQG7T00K"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-P9BQG7T00K');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="www/webex.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/box_def.css" type="text/css" />
<link rel="stylesheet" href="css/box_amazing.css" type="text/css" />
<link rel="stylesheet" href="css/box_challenge.css" type="text/css" />
<link rel="stylesheet" href="css/box_dedicated.css" type="text/css" />
<link rel="stylesheet" href="css/box_reading.css" type="text/css" />
<link rel="stylesheet" href="css/ani.css" type="text/css" />
<link rel="stylesheet" href="css/background.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://marcokuehne.github.io/">Becoming Fluent in Data</a></li> <li><p class="aligncenter"> <img src="images/Logo.png" width="60%" height="60%"> </p></li>
<li class="divider"></li>
<li class="part"><span><b>I Intro</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html#dust-and-dark"><i class="fa fa-check"></i>Dust and Dark</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html#teach-learn-repeat"><i class="fa fa-check"></i>Teach – Learn – Repeat</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html"><i class="fa fa-check"></i>About the book</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#aims-of-this-book"><i class="fa fa-check"></i>Aims of this book</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#structure"><i class="fa fa-check"></i>Structure</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#color"><i class="fa fa-check"></i>Color</a></li>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html#components"><i class="fa fa-check"></i>Components</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i>Intro to R</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#watching-paint-dry"><i class="fa fa-check"></i>Watching paint dry</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#when-paint-becomes-art"><i class="fa fa-check"></i>When paint becomes art</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#define-objects"><i class="fa fa-check"></i>Define objects</a>
<ul>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#numeric-variables"><i class="fa fa-check"></i>Numeric Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#logical-variables"><i class="fa fa-check"></i>Logical Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#string-variables"><i class="fa fa-check"></i>String Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#factor-variables"><i class="fa fa-check"></i>Factor Variables</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#combine-objects"><i class="fa fa-check"></i>Combine objects</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#vectors"><i class="fa fa-check"></i>Vectors</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#data-frame"><i class="fa fa-check"></i>Data frame</a></li>
<li class="chapter" data-level="" data-path="intro-to-r.html"><a href="intro-to-r.html#plots"><i class="fa fa-check"></i>Plots</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data</b></span></li>
<li class="chapter" data-level="1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html"><i class="fa fa-check"></i><b>1</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#why-we-measure"><i class="fa fa-check"></i><b>1.1</b> Why we measure</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#women-are-having-far-fewer-children."><i class="fa fa-check"></i><b>1.1.1</b> Women are having far fewer children.</a></li>
<li class="chapter" data-level="1.1.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#global-surface-temperature-is-rising."><i class="fa fa-check"></i><b>1.1.2</b> Global surface temperature is rising.</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#means-of-measuring"><i class="fa fa-check"></i><b>1.2</b> Means of measuring</a></li>
<li class="chapter" data-level="1.3" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#types-of-data"><i class="fa fa-check"></i><b>1.3</b> Types of data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#origin-of-data"><i class="fa fa-check"></i><b>1.3.1</b> Origin of data</a></li>
<li class="chapter" data-level="1.3.2" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#analysis-of-data"><i class="fa fa-check"></i><b>1.3.2</b> Analysis of data</a></li>
<li class="chapter" data-level="1.3.3" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#structure-of-data"><i class="fa fa-check"></i><b>1.3.3</b> Structure of data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#variables-inside-the-data"><i class="fa fa-check"></i><b>1.4</b> Variables inside the data</a></li>
<li class="chapter" data-level="1.5" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#the-reality-behind-the-data"><i class="fa fa-check"></i><b>1.5</b> The reality behind the data</a></li>
<li class="chapter" data-level="1.6" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#data-sets"><i class="fa fa-check"></i><b>1.6</b> Data sets</a></li>
<li class="chapter" data-level="1.7" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#dataset-collections"><i class="fa fa-check"></i><b>1.7</b> Dataset collections</a></li>
<li class="chapter" data-level="1.8" data-path="data-is-everywhere.html"><a href="data-is-everywhere.html#open-data"><i class="fa fa-check"></i><b>1.8</b> Open data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html"><i class="fa fa-check"></i><b>2</b> Software is everywhere</a>
<ul>
<li class="chapter" data-level="2.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#software"><i class="fa fa-check"></i><b>2.1</b> Software</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#command-line-interface-cli"><i class="fa fa-check"></i><b>2.1.1</b> Command line interface (CLI)</a></li>
<li class="chapter" data-level="2.1.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#graphical-user-interface-gui"><i class="fa fa-check"></i><b>2.1.2</b> Graphical user interface (GUI)</a></li>
<li class="chapter" data-level="2.1.3" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#integrated-development-environment-ide"><i class="fa fa-check"></i><b>2.1.3</b> Integrated development environment (IDE)</a></li>
<li class="chapter" data-level="2.1.4" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#online-compiler"><i class="fa fa-check"></i><b>2.1.4</b> Online Compiler</a></li>
<li class="chapter" data-level="2.1.5" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#cloud-solutions"><i class="fa fa-check"></i><b>2.1.5</b> Cloud solutions</a></li>
<li class="chapter" data-level="2.1.6" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#dashboards"><i class="fa fa-check"></i><b>2.1.6</b> Dashboards</a></li>
<li class="chapter" data-level="2.1.7" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#shiny-apps"><i class="fa fa-check"></i><b>2.1.7</b> Shiny Apps</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#file-formats"><i class="fa fa-check"></i><b>2.2</b> File formats</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#text-files"><i class="fa fa-check"></i><b>2.2.1</b> Text files</a></li>
<li class="chapter" data-level="2.2.2" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#text-with-structure"><i class="fa fa-check"></i><b>2.2.2</b> Text with structure</a></li>
<li class="chapter" data-level="2.2.3" data-path="software-is-everywhere.html"><a href="software-is-everywhere.html#file-formats-1"><i class="fa fa-check"></i><b>2.2.3</b> File formats</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="stories-are-everywhere.html"><a href="stories-are-everywhere.html"><i class="fa fa-check"></i><b>3</b> Stories are everywhere</a>
<ul>
<li class="chapter" data-level="3.1" data-path="stories-are-everywhere.html"><a href="stories-are-everywhere.html#telling-a-story"><i class="fa fa-check"></i><b>3.1</b> Telling a story</a></li>
<li class="chapter" data-level="3.2" data-path="stories-are-everywhere.html"><a href="stories-are-everywhere.html#visualization"><i class="fa fa-check"></i><b>3.2</b> Visualization</a></li>
<li class="chapter" data-level="3.3" data-path="stories-are-everywhere.html"><a href="stories-are-everywhere.html#less-is-more"><i class="fa fa-check"></i><b>3.3</b> Less is more</a></li>
<li class="chapter" data-level="3.4" data-path="stories-are-everywhere.html"><a href="stories-are-everywhere.html#never-use-pie-charts"><i class="fa fa-check"></i><b>3.4</b> Never use pie charts</a></li>
<li class="chapter" data-level="3.5" data-path="stories-are-everywhere.html"><a href="stories-are-everywhere.html#grammar-of-graphics"><i class="fa fa-check"></i><b>3.5</b> Grammar of Graphics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="group-comparison.html"><a href="group-comparison.html"><i class="fa fa-check"></i><b>4</b> Group Comparison</a>
<ul>
<li class="chapter" data-level="4.1" data-path="group-comparison.html"><a href="group-comparison.html#comparability"><i class="fa fa-check"></i><b>4.1</b> Comparability</a></li>
<li class="chapter" data-level="4.2" data-path="group-comparison.html"><a href="group-comparison.html#application"><i class="fa fa-check"></i><b>4.2</b> Application</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="group-comparison.html"><a href="group-comparison.html#loading-the-data"><i class="fa fa-check"></i><b>4.2.1</b> Loading the data</a></li>
<li class="chapter" data-level="4.2.2" data-path="group-comparison.html"><a href="group-comparison.html#look-into-data"><i class="fa fa-check"></i><b>4.2.2</b> Look into data</a></li>
<li class="chapter" data-level="4.2.3" data-path="group-comparison.html"><a href="group-comparison.html#fly-over-data"><i class="fa fa-check"></i><b>4.2.3</b> Fly over data</a></li>
<li class="chapter" data-level="4.2.4" data-path="group-comparison.html"><a href="group-comparison.html#missing-data"><i class="fa fa-check"></i><b>4.2.4</b> Missing data</a></li>
<li class="chapter" data-level="4.2.5" data-path="group-comparison.html"><a href="group-comparison.html#explore-data"><i class="fa fa-check"></i><b>4.2.5</b> Explore data</a></li>
<li class="chapter" data-level="4.2.6" data-path="group-comparison.html"><a href="group-comparison.html#standardization"><i class="fa fa-check"></i><b>4.2.6</b> Standardization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mean-comparison.html"><a href="mean-comparison.html"><i class="fa fa-check"></i><b>5</b> Mean Comparison</a>
<ul>
<li class="chapter" data-level="5.1" data-path="mean-comparison.html"><a href="mean-comparison.html#application-1"><i class="fa fa-check"></i><b>5.1</b> Application</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="mean-comparison.html"><a href="mean-comparison.html#data-preparation"><i class="fa fa-check"></i><b>5.1.1</b> Data Preparation</a></li>
<li class="chapter" data-level="5.1.2" data-path="mean-comparison.html"><a href="mean-comparison.html#grouped-mean"><i class="fa fa-check"></i><b>5.1.2</b> Grouped Mean</a></li>
<li class="chapter" data-level="5.1.3" data-path="mean-comparison.html"><a href="mean-comparison.html#furious-with-factors"><i class="fa fa-check"></i><b>5.1.3</b> Furious with Factors</a></li>
<li class="chapter" data-level="5.1.4" data-path="mean-comparison.html"><a href="mean-comparison.html#plot-with-confidence"><i class="fa fa-check"></i><b>5.1.4</b> Plot with Confidence</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="mean-comparison.html"><a href="mean-comparison.html#students-t-test"><i class="fa fa-check"></i><b>5.2</b> Student's t-test</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="mean-comparison.html"><a href="mean-comparison.html#independent-t-test"><i class="fa fa-check"></i><b>5.2.1</b> Independent t-test</a></li>
<li class="chapter" data-level="5.2.2" data-path="mean-comparison.html"><a href="mean-comparison.html#dependent-t-test"><i class="fa fa-check"></i><b>5.2.2</b> Dependent t-test</a></li>
<li class="chapter" data-level="5.2.3" data-path="mean-comparison.html"><a href="mean-comparison.html#one-sample-t-test"><i class="fa fa-check"></i><b>5.2.3</b> One sample t-test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="panel-data.html"><a href="panel-data.html"><i class="fa fa-check"></i><b>6</b> Panel Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="panel-data.html"><a href="panel-data.html#types-of-data-1"><i class="fa fa-check"></i><b>6.1</b> Types of Data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="panel-data.html"><a href="panel-data.html#cross-section"><i class="fa fa-check"></i><b>6.1.1</b> Cross-section</a></li>
<li class="chapter" data-level="6.1.2" data-path="panel-data.html"><a href="panel-data.html#repeated-cross-section"><i class="fa fa-check"></i><b>6.1.2</b> Repeated cross-section</a></li>
<li class="chapter" data-level="6.1.3" data-path="panel-data.html"><a href="panel-data.html#time-series"><i class="fa fa-check"></i><b>6.1.3</b> Time series</a></li>
<li class="chapter" data-level="6.1.4" data-path="panel-data.html"><a href="panel-data.html#panel-data-1"><i class="fa fa-check"></i><b>6.1.4</b> Panel data</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="panel-data.html"><a href="panel-data.html#unemployment"><i class="fa fa-check"></i><b>6.2</b> Unemployment</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="panel-data.html"><a href="panel-data.html#on-decline-in-germany"><i class="fa fa-check"></i><b>6.2.1</b> On decline in Germany</a></li>
<li class="chapter" data-level="6.2.2" data-path="panel-data.html"><a href="panel-data.html#measurement"><i class="fa fa-check"></i><b>6.2.2</b> Measurement</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="panel-data.html"><a href="panel-data.html#application-2"><i class="fa fa-check"></i><b>6.3</b> Application</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="panel-data.html"><a href="panel-data.html#data-inspection"><i class="fa fa-check"></i><b>6.3.1</b> Data Inspection</a></li>
<li class="chapter" data-level="6.3.2" data-path="panel-data.html"><a href="panel-data.html#data-preparation-1"><i class="fa fa-check"></i><b>6.3.2</b> Data Preparation</a></li>
<li class="chapter" data-level="6.3.3" data-path="panel-data.html"><a href="panel-data.html#data-visualization"><i class="fa fa-check"></i><b>6.3.3</b> Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="panel-data.html"><a href="panel-data.html#panel-studies"><i class="fa fa-check"></i><b>6.4</b> Panel Studies</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-scraping.html"><a href="data-scraping.html"><i class="fa fa-check"></i><b>7</b> Data Scraping</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-scraping.html"><a href="data-scraping.html#student-numbers-at-viadrina"><i class="fa fa-check"></i><b>7.1</b> Student numbers at Viadrina</a></li>
<li class="chapter" data-level="7.2" data-path="data-scraping.html"><a href="data-scraping.html#pdf-scraping"><i class="fa fa-check"></i><b>7.2</b> PDF scraping</a></li>
<li class="chapter" data-level="7.3" data-path="data-scraping.html"><a href="data-scraping.html#share-of-female-students"><i class="fa fa-check"></i><b>7.3</b> Share of female students</a></li>
<li class="chapter" data-level="7.4" data-path="data-scraping.html"><a href="data-scraping.html#share-of-foreign-students"><i class="fa fa-check"></i><b>7.4</b> Share of foreign students</a></li>
<li class="chapter" data-level="7.5" data-path="data-scraping.html"><a href="data-scraping.html#web-scraping"><i class="fa fa-check"></i><b>7.5</b> Web scraping</a></li>
<li class="chapter" data-level="7.6" data-path="data-scraping.html"><a href="data-scraping.html#most-recent-student-numbers"><i class="fa fa-check"></i><b>7.6</b> Most recent student numbers</a></li>
<li class="chapter" data-level="7.7" data-path="data-scraping.html"><a href="data-scraping.html#the-long-run-trend"><i class="fa fa-check"></i><b>7.7</b> The long run trend</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>8</b> Text Mining</a>
<ul>
<li class="chapter" data-level="8.1" data-path="text-mining.html"><a href="text-mining.html#wikipedia"><i class="fa fa-check"></i><b>8.1</b> Wikipedia</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="text-mining.html"><a href="text-mining.html#cleaning"><i class="fa fa-check"></i><b>8.1.1</b> Cleaning</a></li>
<li class="chapter" data-level="8.1.2" data-path="text-mining.html"><a href="text-mining.html#tidytext-format"><i class="fa fa-check"></i><b>8.1.2</b> Tidytext Format</a></li>
<li class="chapter" data-level="8.1.3" data-path="text-mining.html"><a href="text-mining.html#stopwords"><i class="fa fa-check"></i><b>8.1.3</b> Stopwords</a></li>
<li class="chapter" data-level="8.1.4" data-path="text-mining.html"><a href="text-mining.html#term-frequency"><i class="fa fa-check"></i><b>8.1.4</b> Term Frequency</a></li>
<li class="chapter" data-level="8.1.5" data-path="text-mining.html"><a href="text-mining.html#little-bit-of-scraping"><i class="fa fa-check"></i><b>8.1.5</b> Little bit of Scraping</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="text-mining.html"><a href="text-mining.html#field-trip-to-berlin"><i class="fa fa-check"></i><b>8.2</b> Field Trip to Berlin</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="text-mining.html"><a href="text-mining.html#text-preparation"><i class="fa fa-check"></i><b>8.2.1</b> Text Preparation</a></li>
<li class="chapter" data-level="8.2.2" data-path="text-mining.html"><a href="text-mining.html#sentiment-analysis"><i class="fa fa-check"></i><b>8.2.2</b> Sentiment Analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="relationships.html"><a href="relationships.html"><i class="fa fa-check"></i><b>9</b> Relationships</a>
<ul>
<li class="chapter" data-level="9.1" data-path="relationships.html"><a href="relationships.html#minimal-example"><i class="fa fa-check"></i><b>9.1</b> Minimal Example</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="relationships.html"><a href="relationships.html#variance"><i class="fa fa-check"></i><b>9.1.1</b> Variance</a></li>
<li class="chapter" data-level="9.1.2" data-path="relationships.html"><a href="relationships.html#variation-around-the-mean"><i class="fa fa-check"></i><b>9.1.2</b> Variation ARound the Mean</a></li>
<li class="chapter" data-level="9.1.3" data-path="relationships.html"><a href="relationships.html#scatterplot"><i class="fa fa-check"></i><b>9.1.3</b> Scatterplot</a></li>
<li class="chapter" data-level="9.1.4" data-path="relationships.html"><a href="relationships.html#covariance"><i class="fa fa-check"></i><b>9.1.4</b> Covariance</a></li>
<li class="chapter" data-level="9.1.5" data-path="relationships.html"><a href="relationships.html#covariance-visualization"><i class="fa fa-check"></i><b>9.1.5</b> Covariance Visualization</a></li>
<li class="chapter" data-level="9.1.6" data-path="relationships.html"><a href="relationships.html#correlation"><i class="fa fa-check"></i><b>9.1.6</b> Correlation</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="relationships.html"><a href="relationships.html#application-3"><i class="fa fa-check"></i><b>9.2</b> Application</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="relationships.html"><a href="relationships.html#one-variable-graphics"><i class="fa fa-check"></i><b>9.2.1</b> One Variable Graphics</a></li>
<li class="chapter" data-level="9.2.2" data-path="relationships.html"><a href="relationships.html#two-variable-graphics"><i class="fa fa-check"></i><b>9.2.2</b> Two Variable Graphics</a></li>
<li class="chapter" data-level="9.2.3" data-path="relationships.html"><a href="relationships.html#correlation-and-regression"><i class="fa fa-check"></i><b>9.2.3</b> Correlation and Regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>10</b> Regression</a>
<ul>
<li class="chapter" data-level="10.1" data-path="regression.html"><a href="regression.html#from-artists-and-economists"><i class="fa fa-check"></i><b>10.1</b> From Artists and Economists</a></li>
<li class="chapter" data-level="10.2" data-path="regression.html"><a href="regression.html#data-is-everywhere-1"><i class="fa fa-check"></i><b>10.2</b> Data is everywhere</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="regression.html"><a href="regression.html#data-in-a-table"><i class="fa fa-check"></i><b>10.2.1</b> Data in a table</a></li>
<li class="chapter" data-level="10.2.2" data-path="regression.html"><a href="regression.html#data-in-a-graph"><i class="fa fa-check"></i><b>10.2.2</b> Data in a graph</a></li>
<li class="chapter" data-level="10.2.3" data-path="regression.html"><a href="regression.html#the-trend"><i class="fa fa-check"></i><b>10.2.3</b> The trend</a></li>
<li class="chapter" data-level="10.2.4" data-path="regression.html"><a href="regression.html#the-blackbox"><i class="fa fa-check"></i><b>10.2.4</b> The blackbox</a></li>
<li class="chapter" data-level="10.2.5" data-path="regression.html"><a href="regression.html#nobodys-perfect"><i class="fa fa-check"></i><b>10.2.5</b> Nobody's perfect</a></li>
<li class="chapter" data-level="10.2.6" data-path="regression.html"><a href="regression.html#vocab-wrap-up"><i class="fa fa-check"></i><b>10.2.6</b> Vocab Wrap-Up</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="regression.html"><a href="regression.html#for-the-truly-dedicated"><i class="fa fa-check"></i><b>10.3</b> For the truly dedicated</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="regression.html"><a href="regression.html#algebra"><i class="fa fa-check"></i><b>10.3.1</b> Algebra</a></li>
<li class="chapter" data-level="10.3.2" data-path="regression.html"><a href="regression.html#analysis"><i class="fa fa-check"></i><b>10.3.2</b> Analysis</a></li>
<li class="chapter" data-level="10.3.3" data-path="regression.html"><a href="regression.html#take-the-long-way-home"><i class="fa fa-check"></i><b>10.3.3</b> Take the Long Way Home</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="regression.html"><a href="regression.html#survival-of-the-fittest-line"><i class="fa fa-check"></i><b>10.4</b> Survival of the Fittest Line</a></li>
<li class="chapter" data-level="10.5" data-path="regression.html"><a href="regression.html#on-the-shoulders-of-giants"><i class="fa fa-check"></i><b>10.5</b> On the Shoulders of Giants</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>11</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="11.1" data-path="logistic-regression.html"><a href="logistic-regression.html#think-inside-the-box"><i class="fa fa-check"></i><b>11.1</b> Think inside the box</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="logistic-regression.html"><a href="logistic-regression.html#from-probability-to-odds"><i class="fa fa-check"></i><b>11.1.1</b> From probability to odds</a></li>
<li class="chapter" data-level="11.1.2" data-path="logistic-regression.html"><a href="logistic-regression.html#from-odds-to-log-of-odds"><i class="fa fa-check"></i><b>11.1.2</b> From odds to log of odds</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="logistic-regression.html"><a href="logistic-regression.html#application-titanic-survival"><i class="fa fa-check"></i><b>11.2</b> Application: Titanic Survival</a></li>
<li class="chapter" data-level="11.3" data-path="logistic-regression.html"><a href="logistic-regression.html#addons"><i class="fa fa-check"></i><b>11.3</b> Addons</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="interaction-models.html"><a href="interaction-models.html"><i class="fa fa-check"></i><b>12</b> Interaction Models</a>
<ul>
<li class="chapter" data-level="12.1" data-path="interaction-models.html"><a href="interaction-models.html#motivation"><i class="fa fa-check"></i><b>12.1</b> Motivation</a></li>
<li class="chapter" data-level="12.2" data-path="interaction-models.html"><a href="interaction-models.html#load-and-merge"><i class="fa fa-check"></i><b>12.2</b> Load and Merge</a></li>
<li class="chapter" data-level="12.3" data-path="interaction-models.html"><a href="interaction-models.html#data-manipulation"><i class="fa fa-check"></i><b>12.3</b> Data Manipulation</a></li>
<li class="chapter" data-level="12.4" data-path="interaction-models.html"><a href="interaction-models.html#simple-linear-model"><i class="fa fa-check"></i><b>12.4</b> Simple linear model</a></li>
<li class="chapter" data-level="12.5" data-path="interaction-models.html"><a href="interaction-models.html#multiple-regression-with-control"><i class="fa fa-check"></i><b>12.5</b> Multiple regression with control</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="interaction-models.html"><a href="interaction-models.html#regression-model"><i class="fa fa-check"></i><b>12.5.1</b> Regression model</a></li>
<li class="chapter" data-level="12.5.2" data-path="interaction-models.html"><a href="interaction-models.html#visualization-parallel-slopes"><i class="fa fa-check"></i><b>12.5.2</b> Visualization (parallel slopes)</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="interaction-models.html"><a href="interaction-models.html#multiple-regression-with-moderator"><i class="fa fa-check"></i><b>12.6</b> Multiple regression with moderator</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="interaction-models.html"><a href="interaction-models.html#interaction-dummy-dummy"><i class="fa fa-check"></i><b>12.6.1</b> Interaction (dummy * dummy)</a></li>
<li class="chapter" data-level="12.6.2" data-path="interaction-models.html"><a href="interaction-models.html#interaction-categorical-dummy"><i class="fa fa-check"></i><b>12.6.2</b> Interaction (categorical * dummy)</a></li>
<li class="chapter" data-level="12.6.3" data-path="interaction-models.html"><a href="interaction-models.html#interaction-continuous-dummy"><i class="fa fa-check"></i><b>12.6.3</b> Interaction (continuous * dummy)</a></li>
<li class="chapter" data-level="12.6.4" data-path="interaction-models.html"><a href="interaction-models.html#visualization-non-parallel-slopes"><i class="fa fa-check"></i><b>12.6.4</b> Visualization (non-parallel slopes)</a></li>
<li class="chapter" data-level="12.6.5" data-path="interaction-models.html"><a href="interaction-models.html#interaction-continuous-continuous"><i class="fa fa-check"></i><b>12.6.5</b> Interaction (continuous * continuous)</a></li>
<li class="chapter" data-level="12.6.6" data-path="interaction-models.html"><a href="interaction-models.html#visualization-non-parallel-slopes-1"><i class="fa fa-check"></i><b>12.6.6</b> Visualization (non-parallel slopes)</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="interaction-models.html"><a href="interaction-models.html#marginal-effects-1"><i class="fa fa-check"></i><b>12.7</b> Marginal Effects</a>
<ul>
<li class="chapter" data-level="12.7.1" data-path="interaction-models.html"><a href="interaction-models.html#marginal-effects-at-representatives-task"><i class="fa fa-check"></i><b>12.7.1</b> Marginal effects at representatives (TASK)</a></li>
<li class="chapter" data-level="12.7.2" data-path="interaction-models.html"><a href="interaction-models.html#marginal-effects-at-the-mean-task"><i class="fa fa-check"></i><b>12.7.2</b> Marginal effects at the mean (TASK)</a></li>
<li class="chapter" data-level="12.7.3" data-path="interaction-models.html"><a href="interaction-models.html#average-marginal-effects"><i class="fa fa-check"></i><b>12.7.3</b> Average marginal effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="fixed-effects.html"><a href="fixed-effects.html"><i class="fa fa-check"></i><b>13</b> Fixed effects</a>
<ul>
<li class="chapter" data-level="13.1" data-path="fixed-effects.html"><a href="fixed-effects.html#cross-sectional-data-2-pt"><i class="fa fa-check"></i><b>13.1</b> Cross-sectional Data (2 pt)</a></li>
<li class="chapter" data-level="13.2" data-path="fixed-effects.html"><a href="fixed-effects.html#panel-data-2-pt"><i class="fa fa-check"></i><b>13.2</b> Panel Data (2 pt)</a></li>
<li class="chapter" data-level="13.3" data-path="fixed-effects.html"><a href="fixed-effects.html#fixed-effects-regression"><i class="fa fa-check"></i><b>13.3</b> Fixed Effects Regression</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="fixed-effects.html"><a href="fixed-effects.html#first-difference-2-pt"><i class="fa fa-check"></i><b>13.3.1</b> First Difference (2 pt)</a></li>
<li class="chapter" data-level="13.3.2" data-path="fixed-effects.html"><a href="fixed-effects.html#within-estimator-2-pt"><i class="fa fa-check"></i><b>13.3.2</b> Within Estimator (2 pt)</a></li>
<li class="chapter" data-level="13.3.3" data-path="fixed-effects.html"><a href="fixed-effects.html#lsdv-1-pt"><i class="fa fa-check"></i><b>13.3.3</b> LSDV (1 pt)</a></li>
<li class="chapter" data-level="13.3.4" data-path="fixed-effects.html"><a href="fixed-effects.html#comparison-1-pt"><i class="fa fa-check"></i><b>13.3.4</b> Comparison (1 pt)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="first-difference.html"><a href="first-difference.html"><i class="fa fa-check"></i><b>14</b> First Difference</a>
<ul>
<li class="chapter" data-level="14.1" data-path="first-difference.html"><a href="first-difference.html#application-mincer-earnings-function"><i class="fa fa-check"></i><b>14.1</b> Application: Mincer earnings function</a></li>
<li class="chapter" data-level="14.2" data-path="first-difference.html"><a href="first-difference.html#data-management-4-pt"><i class="fa fa-check"></i><b>14.2</b> Data Management (4 pt)</a></li>
<li class="chapter" data-level="14.3" data-path="first-difference.html"><a href="first-difference.html#data-visualization-2-pt"><i class="fa fa-check"></i><b>14.3</b> Data Visualization (2 pt)</a></li>
<li class="chapter" data-level="14.4" data-path="first-difference.html"><a href="first-difference.html#data-modeling-2-pt"><i class="fa fa-check"></i><b>14.4</b> Data Modeling (2 pt)</a></li>
<li class="chapter" data-level="14.5" data-path="first-difference.html"><a href="first-difference.html#minimal-example-1"><i class="fa fa-check"></i><b>14.5</b> Minimal Example</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="14.6" data-path="references.html"><a href="references.html#resources"><i class="fa fa-check"></i><b>14.6</b> Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://marco-kuehne.com/" target="blank">Visit my personal page</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Becoming Fluent in Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<br>
<div class = infobox>
This book is <b>Work in Progress</b>. I appreciate your feedback to make the book better.
</div>
<div id="data-scraping" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Data Scraping<a href="data-scraping.html#data-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>“Over the last two years alone, 90 percent of the data in the world was generated.”</b></p>
<footer>
Bernard Marr (2018) <em>How Much Data Do We Create Every Day? The Mind-Blowing Stats Everyone Should Read</em> <a href="https://www.forbes.com/sites/bernardmarr/2018/05/21/how-much-data-do-we-create-every-day-the-mind-blowing-stats-everyone-should-read/#4472289660ba" target="_blank">Forbes.</a>
</footer>
</blockquote>
<p><strong>Data scraping</strong> is a technique where a computer program extracts data from human-readable output coming from another program. Data scraping often takes place in <strong>web scraping</strong> (also known as crawling or spidering). In this process, an application is used to extract valuable information from a website. <strong>PDF scraping</strong> or more general <strong>report mining</strong> is the extraction of data from human-readable computer reports.</p>
<p>Consider alternatives before start scraping data:</p>
<ul>
<li>Look for a download button.</li>
<li>Search same or similar data somewhere else.</li>
<li>Check if there is an API.</li>
<li>Ask the website owner for the data.</li>
</ul>
<div id="student-numbers-at-viadrina" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Student numbers at Viadrina<a href="data-scraping.html#student-numbers-at-viadrina" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Did you notice less and less fellow students sitting next to you? We analyse enrollment numbers of Viadrina European University. <em>Dezernat 1</em> administers and publishes student statistics. There is an overview page where they provide some time series data (overall student numbers from 1992 to 2020) and the number of study programs (between 1992 to 2014).</p>
<iframe src="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/index.html" width="100%" height="400px" data-external="1">
</iframe>
<p>Information is presented in two ways, as <strong>tables in PDF</strong>, e.g. the time series on total student numbers:<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a></p>
<!-- <https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf> -->
<!-- <https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Anzahl-der-Studiengaenge.pdf> -->
<object data="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf" width="800" height="500">
</object>
<p>And as <strong>tables in HTML</strong>. For each semester there is summary information on the webpage (and more comprehensive data in PDF), like for summer term 2022:</p>
<iframe src="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2022-Sommersemester/index.html" width="100%" height="400px" data-external="1">
</iframe>
<p>Let's investigate the student numbers.</p>
</div>
<div id="pdf-scraping" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> PDF scraping<a href="data-scraping.html#pdf-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- https://www.dataquest.io/blog/web-scraping-in-r-rvest/ -->
<!-- https://www.r-bloggers.com/2019/09/pdf-scraping-in-r-with-tabulizer/ -->
<!-- https://www.brodrigues.co/blog/2018-06-10-scraping_pdfs/-->
<!-- https://blog.az.sg/posts/reading-pdfs-in-r/ -->
<!-- https://tabula.technology/ -->
<!-- https://cran.r-hub.io/web/packages/tabulizer/vignettes/tabulizer.html -->
<!-- https://crimebythenumbers.com/scrape-table.html -->
<!-- https://academy.datawrapper.de/article/135-how-to-extract-data-out-of-pdfs -->
<!-- pdftools difficult -->
<!-- tabulizer offline -->
<!-- https://www.europa-uni.de/de/ueber_uns/zahlen_fakten/index.html -->
<!-- https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2022-Sommersemester/Uebersicht.pdf -->
<!-- https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf -->
<p>Apply a programmatic way to download a PDF Use the built in <code>download.file()</code> function and specify an url and a destination and file name.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-scraping.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set URL for PDF </span></span>
<span id="cb64-2"><a href="data-scraping.html#cb64-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf&quot;</span></span>
<span id="cb64-3"><a href="data-scraping.html#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify destination where file should be saved (and name)</span></span>
<span id="cb64-4"><a href="data-scraping.html#cb64-4" aria-hidden="true" tabindex="-1"></a>destfile <span class="ot">&lt;-</span> <span class="st">&quot;data/Viadrina/Gesamtstudierendenzahl.pdf&quot;</span></span>
<span id="cb64-5"><a href="data-scraping.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply download.file function in R</span></span>
<span id="cb64-6"><a href="data-scraping.html#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, destfile, <span class="at">mode =</span> <span class="st">&quot;wb&quot;</span>)</span></code></pre></div>
<!-- https://www.youtube.com/watch?v=jfBZzuDMN0o -->
<p>To extract a table from a PDF we use the <code>pdftables</code> package.<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a> The package is a wrapper for the <strong>PDFTables API</strong>. It requires an API key from <a href="https://pdftables.com/" class="uri">https://pdftables.com/</a>. You can register and get one for free. The result is stored as <code>.csv</code> file.</p>
<div class="defbox">
<div class="titeldefbox">
<h2>
Definition
</h2>
</div>
<p>An <strong>application programming interface (API)</strong> is a way for two or more computer programs to communicate with each other. It is a type of software interface, offering a service to other pieces of software.</p>
</div>
<p>Be careful with your API keys. If you only use a file locally on your computer, you might be fine. Don't share this file. Don't upload it. If you upload an API key on GIT, you get a notification mail from <a href="https://www.gitguardian.com/" class="uri">https://www.gitguardian.com/</a>. Instead, put your API in your environment. This can be done by a .Renviron file. Use <code>usethis::edit_r_environ(scope = "project")</code> in order to access and edit your information. 50 pages are for free.</p>
<p>Read more
* <a href="https://daattali.gitbooks.io/stat545-ubc-github-io/content/bit003_api-key-env-var.html" class="uri">https://daattali.gitbooks.io/stat545-ubc-github-io/content/bit003_api-key-env-var.html</a>
* <a href="https://resources.numbat.space/using-rprofile-and-renviron.html" class="uri">https://resources.numbat.space/using-rprofile-and-renviron.html</a>
* <a href="https://github.com/expersso/pdftables" class="uri">https://github.com/expersso/pdftables</a></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-scraping.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftables)</span>
<span id="cb65-2"><a href="data-scraping.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">convert_pdf</span>(<span class="at">input_file =</span> destfile, </span>
<span id="cb65-3"><a href="data-scraping.html#cb65-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">output_file =</span> <span class="st">&quot;data/Viadrina/viadrina_students.csv&quot;</span>, </span>
<span id="cb65-4"><a href="data-scraping.html#cb65-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">api_key =</span> <span class="st">&quot;YOUR_KEY&quot;</span>)</span></code></pre></div>
<p>Scraped data often requires a lot of cleaning.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-scraping.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb66-2"><a href="data-scraping.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="co"># read csv file</span></span>
<span id="cb66-3"><a href="data-scraping.html#cb66-3" aria-hidden="true" tabindex="-1"></a>viadrina_1992_2020_before <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/Viadrina/viadrina_students.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-4"><a href="data-scraping.html#cb66-4" aria-hidden="true" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020_before</span>
<span id="cb66-5"><a href="data-scraping.html#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="co"># replace header names by first row</span></span>
<span id="cb66-6"><a href="data-scraping.html#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(viadrina_1992_2020) <span class="ot">&lt;-</span> viadrina_1992_2020[<span class="dv">1</span>,]</span>
<span id="cb66-7"><a href="data-scraping.html#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co"># drop first row</span></span>
<span id="cb66-8"><a href="data-scraping.html#cb66-8" aria-hidden="true" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020[<span class="sc">-</span><span class="dv">1</span>,] </span>
<span id="cb66-9"><a href="data-scraping.html#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="co"># drop last row</span></span>
<span id="cb66-10"><a href="data-scraping.html#cb66-10" aria-hidden="true" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020[<span class="sc">-</span><span class="dv">30</span>,] </span>
<span id="cb66-11"><a href="data-scraping.html#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="co"># remove all \n</span></span>
<span id="cb66-12"><a href="data-scraping.html#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(viadrina_1992_2020) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[</span><span class="sc">\r\n</span><span class="st">]&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="fu">colnames</span>(viadrina_1992_2020)) </span>
<span id="cb66-13"><a href="data-scraping.html#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="co"># readable column names</span></span>
<span id="cb66-14"><a href="data-scraping.html#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(viadrina_1992_2020) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Total&quot;</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Female_Pct&quot;</span>, </span>
<span id="cb66-15"><a href="data-scraping.html#cb66-15" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;German&quot;</span>, <span class="st">&quot;German_Pct&quot;</span>, <span class="st">&quot;Foreign&quot;</span>, <span class="st">&quot;Foreign_Pct&quot;</span>,</span>
<span id="cb66-16"><a href="data-scraping.html#cb66-16" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;Pole&quot;</span>, <span class="st">&quot;Pole_Pct&quot;</span>)</span>
<span id="cb66-17"><a href="data-scraping.html#cb66-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-18"><a href="data-scraping.html#cb66-18" aria-hidden="true" tabindex="-1"></a><span class="co"># remove percentage sign </span></span>
<span id="cb66-19"><a href="data-scraping.html#cb66-19" aria-hidden="true" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020 <span class="sc">%&gt;%</span>  </span>
<span id="cb66-20"><a href="data-scraping.html#cb66-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(.x, <span class="st">&quot;%&quot;</span>),</span>
<span id="cb66-21"><a href="data-scraping.html#cb66-21" aria-hidden="true" tabindex="-1"></a>                                       <span class="fu">parse_number</span>(.x) <span class="sc">/</span> <span class="dv">10</span>, </span>
<span id="cb66-22"><a href="data-scraping.html#cb66-22" aria-hidden="true" tabindex="-1"></a>                                       .x)))</span>
<span id="cb66-23"><a href="data-scraping.html#cb66-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-24"><a href="data-scraping.html#cb66-24" aria-hidden="true" tabindex="-1"></a><span class="co"># convert all chr to numeric</span></span>
<span id="cb66-25"><a href="data-scraping.html#cb66-25" aria-hidden="true" tabindex="-1"></a>viadrina_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020 <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character,as.numeric)</span></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-scraping.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb67-2"><a href="data-scraping.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(viadrina_1992_2020)</span></code></pre></div>
<div id="htmlwidget-07f5052f5aee9275c2f8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-07f5052f5aee9275c2f8">{"x":{"filter":"none","vertical":false,"data":[["2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],[1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],[472,997,1443,1810,2321,2835,3132,3451,3802,4170,4549,5094,5110,5093,5001,5145,5587,6194,6452,6506,6716,6645,6492,6501,6647,6542,6461,6020,5586],[236,546,724,949,1242,1584,1841,2057,2308,2559,2080,3214,3228,3221,3168,3222,3499,3833,4064,4096,4269,4206,4098,4073,4143,4018,3922,3607,3285],[50,54.8,50.2,52.4,53.5,55.9,58.8,59.6,60.7,61.4,45.7,63.1,63.2,63.2,63.3,62.6,62.6,61.9,63,63,63.6,63.3,63.1,62.7,62.3,61.4,60.7,59.9,58.8],[325,598,841,1030,1348,1662,1824,2048,2226,2393,2617,3056,3244,3344,3332,3633,4120,4682,4965,4958,5145,5001,4843,4861,4960,4931,4875,4413,4083],[68.9,60,58.3,56.9,58.1,58.6,58.2,59.3,58.5,57.4,57.5,60,63.5,65.7,66.6,70.6,73.7,75.6,77,76.2,76.6,75.3,74.6,74.8,74.6,75.4,75.5,73.3,73.1],[169,399,602,780,973,1173,1308,1403,1576,1777,1932,2038,1866,1748,1669,1512,1467,1512,1487,1548,1571,1644,1649,1640,1687,1611,1586,1607,1503],[35.8,40,41.7,43.1,41.9,41.4,41.8,40.7,41.5,42.6,42.5,40,36.5,34.3,33.4,29.4,26.3,24.4,23,23.8,23.4,24.7,25.4,25.2,25.4,24.6,24.5,26.7,26.9],[167,384,566,731,883,1053,1179,1247,1364,1440,1512,1547,1331,1245,1190,1027,960,897,687,755,726,695,641,621,582,503,437,379,353],[35.4,38.5,39.2,40.4,38,37.1,37.6,36.1,35.9,34.5,33.2,30.4,26,24.4,23.8,20,17.2,14.5,10.6,11.6,10.8,10.5,9.9,9.6,8.8,7.7,6.8,6.3,6.3]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year<\/th>\n      <th>Total<\/th>\n      <th>Female<\/th>\n      <th>Female_Pct<\/th>\n      <th>German<\/th>\n      <th>German_Pct<\/th>\n      <th>Foreign<\/th>\n      <th>Foreign_Pct<\/th>\n      <th>Pole<\/th>\n      <th>Pole_Pct<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="share-of-female-students" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Share of female students<a href="data-scraping.html#share-of-female-students" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The share of female students over time in a line plot.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-scraping.html#cb68-1" aria-hidden="true" tabindex="-1"></a>viadrina_1992_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="data-scraping.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Year)) <span class="sc">+</span></span>
<span id="cb68-3"><a href="data-scraping.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">colour =</span> <span class="st">&quot;Total&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb68-4"><a href="data-scraping.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Female, <span class="at">colour =</span> <span class="st">&quot;Female&quot;</span>)) <span class="sc">+</span></span>
<span id="cb68-5"><a href="data-scraping.html#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Student numbers at Viadrina&quot;</span>,</span>
<span id="cb68-6"><a href="data-scraping.html#cb68-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Share of female students&quot;</span>)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-108-1.png" width="576" /></p>
</div>
<div id="share-of-foreign-students" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Share of foreign students<a href="data-scraping.html#share-of-foreign-students" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The share of foreign students over time in a stacked barplot.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-scraping.html#cb69-1" aria-hidden="true" tabindex="-1"></a>viadrina_1992_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="data-scraping.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Year)) <span class="sc">+</span></span>
<span id="cb69-3"><a href="data-scraping.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> Total, <span class="at">fill =</span> <span class="st">&quot;Total&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb69-4"><a href="data-scraping.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> German, <span class="at">fill =</span> <span class="st">&quot;German&quot;</span>)) <span class="sc">+</span></span>
<span id="cb69-5"><a href="data-scraping.html#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> Foreign, <span class="at">fill =</span> <span class="st">&quot;Foreign&quot;</span>)) <span class="sc">+</span></span>
<span id="cb69-6"><a href="data-scraping.html#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Student numbers at Viadrina&quot;</span>,</span>
<span id="cb69-7"><a href="data-scraping.html#cb69-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Share of foreign students&quot;</span>)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-109-1.png" width="576" /></p>
</div>
<div id="web-scraping" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Web scraping<a href="data-scraping.html#web-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To get more recent numbers, we rely on the webpage information. How can we access all semester data? Investigate the pattern of the URLs.</p>
<p><small></p>
<ul>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2013-Wintersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2013-Wintersemester/index.html</a></li>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2014-Sommersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2014-Sommersemester/index.html</a></li>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2014-Wintersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2014-Wintersemester/index.html</a></li>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2015-Sommersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2015-Sommersemester/index.html</a></li>
<li><a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2015-wintersemester/index.html" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2015-wintersemester/index.html</a></li>
</ul>
<p></small></p>
<p>Usually the pattern is <code>year-semester</code>. Some winter semesters are capitalized, some are not (<code>Wintersemester</code> vs. <code>wintersemester</code>). We use the <code>rvest</code> package to web scrape static html content. It always starts with reading in the html data. Then pipe and use <code>html_table()</code> to extract tabular information (lucky us, there is only one table).</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-scraping.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb70-2"><a href="data-scraping.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_html</span>(<span class="st">&quot;https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/2013-Wintersemester/index.html&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="data-scraping.html#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>() </span>
<span id="cb70-4"><a href="data-scraping.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb70-5"><a href="data-scraping.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7 × 2</span></span>
<span id="cb70-6"><a href="data-scraping.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   X1                      X2</span></span>
<span id="cb70-7"><a href="data-scraping.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                &lt;int&gt;</span></span>
<span id="cb70-8"><a href="data-scraping.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Studierende gesamt    6645</span></span>
<span id="cb70-9"><a href="data-scraping.html#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 weiblich              4206</span></span>
<span id="cb70-10"><a href="data-scraping.html#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 männlich              2439</span></span>
<span id="cb70-11"><a href="data-scraping.html#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Deutsche              5001</span></span>
<span id="cb70-12"><a href="data-scraping.html#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Ausländer/innen       1644</span></span>
<span id="cb70-13"><a href="data-scraping.html#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 1. Fachsemester       1783</span></span>
<span id="cb70-14"><a href="data-scraping.html#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 1. Hochschulsemester  1110</span></span></code></pre></div>
<p>Now, we would like to do this for every subpage (semester) and combine the data in one table. Focus on the variable component in the URL and create a vector of all semesters.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-scraping.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the manual way</span></span>
<span id="cb71-2"><a href="data-scraping.html#cb71-2" aria-hidden="true" tabindex="-1"></a>winters <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from=</span><span class="dv">2013</span>, <span class="at">to=</span><span class="dv">2021</span>)</span>
<span id="cb71-3"><a href="data-scraping.html#cb71-3" aria-hidden="true" tabindex="-1"></a>summers <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from=</span><span class="dv">2014</span>, <span class="at">to=</span><span class="dv">2022</span>)</span>
<span id="cb71-4"><a href="data-scraping.html#cb71-4" aria-hidden="true" tabindex="-1"></a>winters <span class="ot">&lt;-</span> <span class="fu">paste0</span>(winters, <span class="st">&quot;-wintersemester&quot;</span>)</span>
<span id="cb71-5"><a href="data-scraping.html#cb71-5" aria-hidden="true" tabindex="-1"></a>summers <span class="ot">&lt;-</span> <span class="fu">paste0</span>(summers, <span class="st">&quot;-Sommersemester&quot;</span>)</span>
<span id="cb71-6"><a href="data-scraping.html#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="data-scraping.html#cb71-7" aria-hidden="true" tabindex="-1"></a>all_terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rbind</span>(winters, summers))</span>
<span id="cb71-8"><a href="data-scraping.html#cb71-8" aria-hidden="true" tabindex="-1"></a>all_terms[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;2013-Wintersemester&quot;</span></span>
<span id="cb71-9"><a href="data-scraping.html#cb71-9" aria-hidden="true" tabindex="-1"></a>all_terms[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;2014-Wintersemester&quot;</span></span>
<span id="cb71-10"><a href="data-scraping.html#cb71-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-11"><a href="data-scraping.html#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="co"># we can paste them together</span></span>
<span id="cb71-12"><a href="data-scraping.html#cb71-12" aria-hidden="true" tabindex="-1"></a>all_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/&quot;</span>, all_terms, <span class="st">&quot;/index.html&quot;</span>)</span></code></pre></div>
<p>Create a <code>for</code> loop to repeat the <code>rvest</code> procedure for each element in the URL list.</p>
<div class="defbox">
<div class="titeldefbox">
<h2>
Definition
</h2>
</div>
<p>A <strong>loop</strong> is a programming structure that repeats a sequence of instructions until a specific condition is met.</p>
</div>
<p>There are two more components. We initialize a <code>list</code> to store each iteration of the loop.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-scraping.html#cb72-1" aria-hidden="true" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb72-2"><a href="data-scraping.html#cb72-2" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb72-3"><a href="data-scraping.html#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="data-scraping.html#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(all_url)){</span>
<span id="cb72-5"><a href="data-scraping.html#cb72-5" aria-hidden="true" tabindex="-1"></a>  table <span class="ot">&lt;-</span> all_url[i] <span class="sc">%&gt;%</span> </span>
<span id="cb72-6"><a href="data-scraping.html#cb72-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb72-7"><a href="data-scraping.html#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>()</span>
<span id="cb72-8"><a href="data-scraping.html#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-9"><a href="data-scraping.html#cb72-9" aria-hidden="true" tabindex="-1"></a>  tables[index] <span class="ot">&lt;-</span> table</span>
<span id="cb72-10"><a href="data-scraping.html#cb72-10" aria-hidden="true" tabindex="-1"></a>  index <span class="ot">&lt;-</span> index <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb72-11"><a href="data-scraping.html#cb72-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb72-12"><a href="data-scraping.html#cb72-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-13"><a href="data-scraping.html#cb72-13" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">do.call</span>(<span class="st">&quot;cbind&quot;</span>, tables)</span></code></pre></div>
<p>More and more cleaning.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-scraping.html#cb73-1" aria-hidden="true" tabindex="-1"></a>df[,<span class="fu">c</span>(<span class="fu">seq</span>(<span class="at">from=</span><span class="dv">3</span>, <span class="at">to=</span><span class="dv">35</span> , <span class="at">by=</span><span class="dv">2</span>))] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb73-2"><a href="data-scraping.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Variable&quot;</span>, all_terms)</span>
<span id="cb73-3"><a href="data-scraping.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co"># transpose dataframe</span></span>
<span id="cb73-4"><a href="data-scraping.html#cb73-4" aria-hidden="true" tabindex="-1"></a>viadrina_2013_2022 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(df))</span>
<span id="cb73-5"><a href="data-scraping.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="co"># replace header names by first row</span></span>
<span id="cb73-6"><a href="data-scraping.html#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(viadrina_2013_2022) <span class="ot">&lt;-</span> viadrina_2013_2022[<span class="dv">1</span>,]</span>
<span id="cb73-7"><a href="data-scraping.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co"># drop first row</span></span>
<span id="cb73-8"><a href="data-scraping.html#cb73-8" aria-hidden="true" tabindex="-1"></a>viadrina_2013_2022 <span class="ot">&lt;-</span> viadrina_2013_2022[<span class="sc">-</span><span class="dv">1</span>,] </span></code></pre></div>
<p>Once more, there are slightly different formats for numbers in winter term 2019, 2020 and 2021. In these terms they use a <code>.</code> for digit grouping, e.g. <code>3.607</code> instead of <code>3607</code>.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-scraping.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all chr to numeric</span></span>
<span id="cb74-2"><a href="data-scraping.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co"># viadrina_2013_2022 &lt;- viadrina_2013_2022 %&gt;% mutate_if(is.character,parse_number)</span></span>
<span id="cb74-3"><a href="data-scraping.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co">#viadrina_2013_2022 &lt;- viadrina_2013_2022 %&gt;% mutate_if(is.character,as_numeric)</span></span>
<span id="cb74-4"><a href="data-scraping.html#cb74-4" aria-hidden="true" tabindex="-1"></a>viadrina_2013_2022 <span class="ot">&lt;-</span> viadrina_2013_2022 <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character,as.numeric)</span>
<span id="cb74-5"><a href="data-scraping.html#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="data-scraping.html#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="co"># row 13, 15, 17, columns 1 to 6, multiply by 1000</span></span>
<span id="cb74-7"><a href="data-scraping.html#cb74-7" aria-hidden="true" tabindex="-1"></a>viadrina_2013_2022[<span class="fu">c</span>(<span class="dv">13</span>,<span class="dv">15</span>,<span class="dv">17</span>), <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)] <span class="ot">&lt;-</span> viadrina_2013_2022[<span class="fu">c</span>(<span class="dv">13</span>,<span class="dv">15</span>,<span class="dv">17</span>), <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)] <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb74-8"><a href="data-scraping.html#cb74-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-9"><a href="data-scraping.html#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="co"># round all numbers</span></span>
<span id="cb74-10"><a href="data-scraping.html#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="co"># viadrina_2013_2022 &lt;- viadrina_2013_2022 %&gt;% mutate_if(is.numeric, round)</span></span>
<span id="cb74-11"><a href="data-scraping.html#cb74-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-12"><a href="data-scraping.html#cb74-12" aria-hidden="true" tabindex="-1"></a><span class="co"># multiply some rows by 1000</span></span>
<span id="cb74-13"><a href="data-scraping.html#cb74-13" aria-hidden="true" tabindex="-1"></a><span class="co"># viadrina_2013_2022[c(13,15,17),] &lt;- viadrina_2013_2022[c(13,15,17),] %&gt;% </span></span>
<span id="cb74-14"><a href="data-scraping.html#cb74-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate_all(.funs = funs(. * 1000))</span></span>
<span id="cb74-15"><a href="data-scraping.html#cb74-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-16"><a href="data-scraping.html#cb74-16" aria-hidden="true" tabindex="-1"></a><span class="co"># fix last column and divide by 1000</span></span>
<span id="cb74-17"><a href="data-scraping.html#cb74-17" aria-hidden="true" tabindex="-1"></a><span class="co"># viadrina_2013_2022[c(13,15,17),7] &lt;- viadrina_2013_2022[c(13,15,17),7]/1000</span></span>
<span id="cb74-18"><a href="data-scraping.html#cb74-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-19"><a href="data-scraping.html#cb74-19" aria-hidden="true" tabindex="-1"></a><span class="co"># create a semester variable</span></span>
<span id="cb74-20"><a href="data-scraping.html#cb74-20" aria-hidden="true" tabindex="-1"></a>viadrina_2013_2022<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">substr</span>(all_terms, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">4</span>)</span>
<span id="cb74-21"><a href="data-scraping.html#cb74-21" aria-hidden="true" tabindex="-1"></a>viadrina_2013_2022<span class="sc">$</span>term <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;summer&quot;</span>), <span class="dv">9</span>)</span>
<span id="cb74-22"><a href="data-scraping.html#cb74-22" aria-hidden="true" tabindex="-1"></a>viadrina_2013_2022<span class="sc">$</span>semester <span class="ot">&lt;-</span> <span class="fu">paste0</span>(viadrina_2013_2022<span class="sc">$</span>year, <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;-02&quot;</span>, <span class="st">&quot;-01&quot;</span>), <span class="dv">9</span>))</span>
<span id="cb74-23"><a href="data-scraping.html#cb74-23" aria-hidden="true" tabindex="-1"></a><span class="co"># row names</span></span>
<span id="cb74-24"><a href="data-scraping.html#cb74-24" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(viadrina_2013_2022) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(viadrina_2013_2022) </span></code></pre></div>
</div>
<div id="most-recent-student-numbers" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Most recent student numbers<a href="data-scraping.html#most-recent-student-numbers" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There is a structural difference between summer and winter term. Most new enrollments are in winter.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-scraping.html#cb75-1" aria-hidden="true" tabindex="-1"></a>viadrina_2013_2022 <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="data-scraping.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>semester, <span class="at">y =</span> <span class="st">`</span><span class="at">Studierende gesamt</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb75-3"><a href="data-scraping.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col=</span>term), <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb75-4"><a href="data-scraping.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_point(aes(y = `Studierende gesamt`, fill = &quot;Total&quot;)) + </span></span>
<span id="cb75-5"><a href="data-scraping.html#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_point(aes(y = `1. Fachsemester`, fill = &quot;First years&quot;)) +</span></span>
<span id="cb75-6"><a href="data-scraping.html#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_point(aes(y = `1. Hochschulsemester`, fill = &quot;First sem&quot;)) +</span></span>
<span id="cb75-7"><a href="data-scraping.html#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Student numbers at Viadrina&quot;</span>) <span class="sc">+</span></span>
<span id="cb75-8"><a href="data-scraping.html#cb75-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-115-1.png" width="576" /></p>
</div>
<div id="the-long-run-trend" class="section level2 hasAnchor" number="7.7">
<h2><span class="header-section-number">7.7</span> The long run trend<a href="data-scraping.html#the-long-run-trend" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Combine old and new data.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data-scraping.html#cb76-1" aria-hidden="true" tabindex="-1"></a>via_1992_2020 <span class="ot">&lt;-</span> viadrina_1992_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="data-scraping.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, Total) <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="data-scraping.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Term =</span> <span class="st">&quot;winter&quot;</span>)</span>
<span id="cb76-4"><a href="data-scraping.html#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="data-scraping.html#cb76-5" aria-hidden="true" tabindex="-1"></a>via_2013_2022 <span class="ot">&lt;-</span> viadrina_2013_2022 <span class="sc">%&gt;%</span> </span>
<span id="cb76-6"><a href="data-scraping.html#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Year =</span> year, <span class="at">Term =</span> term, <span class="at">Total =</span> <span class="st">`</span><span class="at">Studierende gesamt</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb76-7"><a href="data-scraping.html#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, Total, Term)</span>
<span id="cb76-8"><a href="data-scraping.html#cb76-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-9"><a href="data-scraping.html#cb76-9" aria-hidden="true" tabindex="-1"></a>via_1992_2022 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(via_1992_2020, via_2013_2022)</span>
<span id="cb76-10"><a href="data-scraping.html#cb76-10" aria-hidden="true" tabindex="-1"></a>via_1992_2022<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(via_1992_2022<span class="sc">$</span>Year)</span></code></pre></div>
<p>Plot and polish. Assume the enrollment for winter 2020/2023 was not affected by Corona virus.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-scraping.html#cb77-1" aria-hidden="true" tabindex="-1"></a>via_1992_2022 <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="data-scraping.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Term <span class="sc">==</span> <span class="st">&quot;winter&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="data-scraping.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span>Total)) <span class="sc">+</span></span>
<span id="cb77-4"><a href="data-scraping.html#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;gam&quot;</span>) <span class="sc">+</span></span>
<span id="cb77-5"><a href="data-scraping.html#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">28</span>)) <span class="sc">+</span></span>
<span id="cb77-6"><a href="data-scraping.html#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Student numbers at Viadrina&quot;</span>) <span class="sc">+</span></span>
<span id="cb77-7"><a href="data-scraping.html#cb77-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb77-8"><a href="data-scraping.html#cb77-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb77-9"><a href="data-scraping.html#cb77-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fl">2020.5</span>, <span class="at">colour=</span><span class="st">&quot;grey&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="at">lwd =</span> <span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb77-10"><a href="data-scraping.html#cb77-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2021</span>, <span class="at">y=</span><span class="dv">4000</span>, <span class="at">label=</span><span class="st">&quot;Corona&quot;</span>), <span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">angle=</span><span class="dv">90</span>, <span class="at">vjust =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="Becoming-Fluent-In-Data_files/figure-html/unnamed-chunk-117-1.png" width="576" /></p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="11">
<li id="fn11"><p>Get the PDF <a href="https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf" class="uri">https://www.europa-uni.de/de/struktur/verwaltung/dezernat_1/statistiken/Entwicklung-der-Gesamtstudierendenzahl.pdf</a><a href="data-scraping.html#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p>You may use other free services. Search for <em>Online converter PDF to csv/xlsx</em><a href="data-scraping.html#fnref12" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="panel-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="text-mining.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Becoming Fluent In Data.pdf", "Becoming Fluent In Data.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": false
},
"toc_depth": 1,
"toc-title": "Table of Contents",
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
